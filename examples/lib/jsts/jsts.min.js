jsts={version:"0.13.0",algorithm:{distance:{},locate:{}},error:{},geom:{util:{}},geomgraph:{index:{}},index:{bintree:{},chain:{},kdtree:{},quadtree:{},strtree:{}},io:{},noding:{snapround:{}},operation:{buffer:{},distance:{},overlay:{snap:{}},polygonize:{},relate:{},union:{},valid:{}},planargraph:{},simplify:{},triangulate:{quadedge:{}},util:{}};if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}jsts.abstractFunc=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.error={};jsts.error.IllegalArgumentError=function(a){this.name="IllegalArgumentError";this.message=a};jsts.error.IllegalArgumentError.prototype=new Error();jsts.error.TopologyError=function(a,b){this.name="TopologyError";this.message=b?a+" [ "+b+" ]":a};jsts.error.TopologyError.prototype=new Error();jsts.error.AbstractMethodInvocationError=function(){this.name="AbstractMethodInvocationError";this.message="Abstract method called, should be implemented in subclass."};jsts.error.AbstractMethodInvocationError.prototype=new Error();jsts.error.NotImplementedError=function(){this.name="NotImplementedError";this.message="This method has not yet been implemented."};jsts.error.NotImplementedError.prototype=new Error();jsts.error.NotRepresentableError=function(a){this.name="NotRepresentableError";this.message=a};jsts.error.NotRepresentableError.prototype=new Error();jsts.error.LocateFailureError=function(a){this.name="LocateFailureError";this.message=a};jsts.error.LocateFailureError.prototype=new Error();if(typeof module!=="undefined"){module.exports=jsts}jsts.geom.GeometryFilter=function(){};jsts.geom.GeometryFilter.prototype.filter=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.util.PolygonExtracter=function(a){this.comps=a};jsts.geom.util.PolygonExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PolygonExtracter.prototype.comps=null;jsts.geom.util.PolygonExtracter.getPolygons=function(a,b){if(b===undefined){b=[]}if(a instanceof jsts.geom.Polygon){b.push(a)}else{if(a instanceof jsts.geom.GeometryCollection){a.apply(new jsts.geom.util.PolygonExtracter(b))}}return b};jsts.geom.util.PolygonExtracter.prototype.filter=function(a){if(a instanceof jsts.geom.Polygon){this.comps.push(a)}};jsts.io.WKTParser=function(a){this.geometryFactory=a||new jsts.geom.GeometryFactory();this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/}};jsts.io.WKTParser.prototype.read=function(b){var e,a,d;b=b.replace(/[\n\r]/g," ");var c=this.regExes.typeStr.exec(b);if(b.search("EMPTY")!==-1){c=this.regExes.emptyTypeStr.exec(b);c[2]=undefined}if(c){a=c[1].toLowerCase();d=c[2];if(this.parse[a]){e=this.parse[a].apply(this,[d])}}if(e===undefined){throw new Error("Could not parse WKT "+b)}return e};jsts.io.WKTParser.prototype.write=function(a){return this.extractGeometry(a)};jsts.io.WKTParser.prototype.extractGeometry=function(d){var b=d.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[b]){return null}var a=b.toUpperCase();var c;if(d.isEmpty()){c=a+" EMPTY"}else{c=a+"("+this.extract[b].apply(this,[d])+")"}return c};jsts.io.WKTParser.prototype.extract={coordinate:function(a){return a.x+" "+a.y},point:function(a){return a.coordinate.x+" "+a.coordinate.y},multipoint:function(c){var d=[];for(var b=0,a=c.geometries.length;b<a;++b){d.push("("+this.extract.point.apply(this,[c.geometries[b]])+")")}return d.join(",")},linestring:function(b){var d=[];for(var c=0,a=b.points.length;c<a;++c){d.push(this.extract.coordinate.apply(this,[b.points[c]]))}return d.join(",")},multilinestring:function(c){var d=[];for(var b=0,a=c.geometries.length;b<a;++b){d.push("("+this.extract.linestring.apply(this,[c.geometries[b]])+")")}return d.join(",")},polygon:function(c){var d=[];d.push("("+this.extract.linestring.apply(this,[c.shell])+")");for(var b=0,a=c.holes.length;b<a;++b){d.push("("+this.extract.linestring.apply(this,[c.holes[b]])+")")}return d.join(",")},multipolygon:function(d){var c=[];for(var b=0,a=d.geometries.length;b<a;++b){c.push("("+this.extract.polygon.apply(this,[d.geometries[b]])+")")}return c.join(",")},geometrycollection:function(c){var d=[];for(var b=0,a=c.geometries.length;b<a;++b){d.push(this.extractGeometry.apply(this,[c.geometries[b]]))}return d.join(",")}};jsts.io.WKTParser.prototype.parse={point:function(b){if(b===undefined){return this.geometryFactory.createPoint(null)}var a=b.trim().split(this.regExes.spaces);return this.geometryFactory.createPoint(new jsts.geom.Coordinate(a[0],a[1]))},multipoint:function(f){if(f===undefined){return this.geometryFactory.createMultiPoint(null)}var b;var d=f.trim().split(",");var e=[];for(var c=0,a=d.length;c<a;++c){b=d[c].replace(this.regExes.trimParens,"$1");e.push(this.parse.point.apply(this,[b]))}return this.geometryFactory.createMultiPoint(e)},linestring:function(f){if(f===undefined){return this.geometryFactory.createLineString(null)}var c=f.trim().split(",");var d=[];var e;for(var b=0,a=c.length;b<a;++b){e=c[b].trim().split(this.regExes.spaces);d.push(new jsts.geom.Coordinate(e[0],e[1]))}return this.geometryFactory.createLineString(d)},linearring:function(f){if(f===undefined){return this.geometryFactory.createLinearRing(null)}var c=f.trim().split(",");var d=[];var e;for(var b=0,a=c.length;b<a;++b){e=c[b].trim().split(this.regExes.spaces);d.push(new jsts.geom.Coordinate(e[0],e[1]))}return this.geometryFactory.createLinearRing(d)},multilinestring:function(f){if(f===undefined){return this.geometryFactory.createMultiLineString(null)}var c;var b=f.trim().split(this.regExes.parenComma);var e=[];for(var d=0,a=b.length;d<a;++d){c=b[d].replace(this.regExes.trimParens,"$1");e.push(this.parse.linestring.apply(this,[c]))}return this.geometryFactory.createMultiLineString(e)},polygon:function(h){if(h===undefined){return this.geometryFactory.createPolygon(null)}var b,e,a;var j=h.trim().split(this.regExes.parenComma);var g;var c=[];for(var d=0,f=j.length;d<f;++d){b=j[d].replace(this.regExes.trimParens,"$1");e=this.parse.linestring.apply(this,[b]);a=this.geometryFactory.createLinearRing(e.points);if(d===0){g=a}else{c.push(a)}}return this.geometryFactory.createPolygon(g,c)},multipolygon:function(f){if(f===undefined){return this.geometryFactory.createMultiPolygon(null)}var d;var b=f.trim().split(this.regExes.doubleParenComma);var e=[];for(var c=0,a=b.length;c<a;++c){d=b[c].replace(this.regExes.trimParens,"$1");e.push(this.parse.polygon.apply(this,[d]))}return this.geometryFactory.createMultiPolygon(e)},geometrycollection:function(e){if(e===undefined){return this.geometryFactory.createGeometryCollection(null)}e=e.replace(/,\s*([A-Za-z])/g,"|$1");var d=e.trim().split("|");var c=[];for(var b=0,a=d.length;b<a;++b){c.push(jsts.io.WKTParser.prototype.read.apply(this,[d[b]]))}return this.geometryFactory.createGeometryCollection(c)}};jsts.algorithm.HCoordinate=function(){this.x=0;this.y=0;this.w=1;if(arguments.length===1){this.initFrom1Coordinate(arguments[0])}else{if(arguments.length===2&&arguments[0] instanceof jsts.geom.Coordinate){this.initFrom2Coordinates(arguments[0],arguments[1])}else{if(arguments.length===2&&arguments[0] instanceof jsts.algorithm.HCoordinate){this.initFrom2HCoordinates(arguments[0],arguments[1])}else{if(arguments.length===2){this.initFromXY(arguments[0],arguments[1])}else{if(arguments.length===3){this.initFromXYW(arguments[0],arguments[1],arguments[2])}else{if(arguments.length===4){this.initFromXYW(arguments[0],arguments[1],arguments[2],arguments[3])}}}}}}};jsts.algorithm.HCoordinate.intersection=function(o,m,f,e){var l,j,n,c,b,d,h,g,k,a,q;l=o.y-m.y;j=m.x-o.x;n=o.x*m.y-m.x*o.y;c=f.y-e.y;b=e.x-f.x;d=f.x*e.y-e.x*f.y;h=j*d-b*n;g=c*n-l*d;k=l*b-c*j;a=h/k;q=g/k;if(!isFinite(a)||!isFinite(q)){throw new jsts.error.NotRepresentableError()}return new jsts.geom.Coordinate(a,q)};jsts.algorithm.HCoordinate.prototype.initFrom1Coordinate=function(a){this.x=a.x;this.y=a.y;this.w=1};jsts.algorithm.HCoordinate.prototype.initFrom2Coordinates=function(b,a){this.x=b.y-a.y;this.y=a.x-b.x;this.w=b.x*a.y-a.x*b.y};jsts.algorithm.HCoordinate.prototype.initFrom2HCoordinates=function(b,a){this.x=b.y*a.w-a.y*b.w;this.y=a.x*b.w-b.x*a.w;this.w=b.x*a.y-a.x*b.y};jsts.algorithm.HCoordinate.prototype.initFromXYW=function(a,c,b){this.x=a;this.y=c;this.w=b};jsts.algorithm.HCoordinate.prototype.initFromXY=function(a,b){this.x=a;this.y=b;this.w=1};jsts.algorithm.HCoordinate.prototype.initFrom4Coordinates=function(k,h,e,d){var g,f,j,b,a,c;g=k.y-h.y;f=h.x-k.x;j=k.x*h.y-h.x*k.y;b=e.y-d.y;a=d.x-e.x;c=e.x*d.y-d.x*e.y;this.x=f*c-a*j;this.y=b*j-g*c;this.w=g*a-b*f};jsts.algorithm.HCoordinate.prototype.getX=function(){var b=this.x/this.w;if(!isFinite(b)){throw new jsts.error.NotRepresentableError()}return b};jsts.algorithm.HCoordinate.prototype.getY=function(){var b=this.y/this.w;if(!isFinite(b)){throw new jsts.error.NotRepresentableError()}return b};jsts.algorithm.HCoordinate.prototype.getCoordinate=function(){var a=new jsts.geom.Coordinate();a.x=this.getX();a.y=this.getY();return a};jsts.algorithm.CGAlgorithms=function(){};jsts.algorithm.CGAlgorithms.CLOCKWISE=-1;jsts.algorithm.CGAlgorithms.RIGHT=jsts.algorithm.CGAlgorithms.CLOCKWISE;jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE=1;jsts.algorithm.CGAlgorithms.LEFT=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.algorithm.CGAlgorithms.COLLINEAR=0;jsts.algorithm.CGAlgorithms.STRAIGHT=jsts.algorithm.CGAlgorithms.COLLINEAR;jsts.algorithm.CGAlgorithms.orientationIndex=function(f,d,c){var g,b,e,a;g=d.x-f.x;b=d.y-f.y;e=c.x-d.x;a=c.y-d.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(g,b,e,a)};jsts.algorithm.CGAlgorithms.isPointInRing=function(b,a){return jsts.algorithm.CGAlgorithms.locatePointInRing(b,a)!==jsts.geom.Location.EXTERIOR};jsts.algorithm.CGAlgorithms.locatePointInRing=function(b,a){return jsts.algorithm.RayCrossingCounter.locatePointInRing(b,a)};jsts.algorithm.CGAlgorithms.isOnLine=function(e,d){var c,b,a,g,f;c=new jsts.algorithm.RobustLineIntersector();for(b=1,a=d.length;b<a;b++){g=d[b-1];f=d[b];c.computeIntersection(e,g,f);if(c.hasIntersection()){return true}}return false};jsts.algorithm.CGAlgorithms.isCCW=function(e){var d,l,m,a,j,k,b,h,g,f,c;d=e.length-1;if(d<3){throw new jsts.IllegalArgumentError("Ring has fewer than 3 points, so orientation cannot be determined")}l=e[0];m=0;g=1;for(g;g<=d;g++){a=e[g];if(a.y>l.y){l=a;m=g}}j=m;do{j=j-1;if(j<0){j=d}}while(e[j].equals2D(l)&&j!==m);k=m;do{k=(k+1)%d}while(e[k].equals2D(l)&&k!==m);b=e[j];h=e[k];if(b.equals2D(l)||h.equals2D(l)||b.equals2D(h)){return false}f=jsts.algorithm.CGAlgorithms.computeOrientation(b,l,h);c=false;if(f===0){c=(b.x>h.x)}else{c=(f>0)}return c};jsts.algorithm.CGAlgorithms.computeOrientation=function(c,b,a){return jsts.algorithm.CGAlgorithms.orientationIndex(c,b,a)};jsts.algorithm.CGAlgorithms.distancePointLine=function(d,a,e){if(!(a instanceof jsts.geom.Coordinate)){jsts.algorithm.CGAlgorithms.distancePointLine2.apply(this,arguments)}if(a.x===e.x&&a.y===e.y){return d.distance(a)}var c,b;c=((d.x-a.x)*(e.x-a.x)+(d.y-a.y)*(e.y-a.y))/((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y));if(c<=0){return d.distance(a)}if(c>=1){return d.distance(e)}b=((a.y-d.y)*(e.x-a.x)-(a.x-d.x)*(e.y-a.y))/((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y));return Math.abs(b)*Math.sqrt(((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y)))};jsts.algorithm.CGAlgorithms.distancePointLinePerpendicular=function(c,a,d){var b=((a.y-c.y)*(d.x-a.x)-(a.x-c.x)*(d.y-a.y))/((d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y));return Math.abs(b)*Math.sqrt(((d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y)))};jsts.algorithm.CGAlgorithms.distancePointLine2=function(d,a){var f,c,b,e;if(a.length===0){throw new jsts.error.IllegalArgumentError("Line array must contain at least one vertex")}f=d.distance(a[0]);for(c=0,b=a.length-1;c<b;c++){e=jsts.algorithm.CGAlgorithms.distancePointLine(d,a[c],a[c+1]);if(e<f){f=e}}return f};jsts.algorithm.CGAlgorithms.distanceLineLine=function(f,e,d,b){if(f.equals(e)){return jsts.algorithm.CGAlgorithms.distancePointLine(f,d,b)}if(d.equals(b)){return jsts.algorithm.CGAlgorithms.distancePointLine(b,f,e)}var c,j,h,g,k,a;c=(f.y-d.y)*(b.x-d.x)-(f.x-d.x)*(b.y-d.y);j=(e.x-f.x)*(b.y-d.y)-(e.y-f.y)*(b.x-d.x);h=(f.y-d.y)*(e.x-f.x)-(f.x-d.x)*(e.y-f.y);g=(e.x-f.x)*(b.y-d.y)-(e.y-f.y)*(b.x-d.x);if((j===0)||(g===0)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(f,d,b),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,d,b),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(d,f,e),jsts.algorithm.CGAlgorithms.distancePointLine(b,f,e))))}k=h/g;a=c/j;if((a<0)||(a>1)||(k<0)||(k>1)){return Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(f,d,b),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(e,d,b),Math.min(jsts.algorithm.CGAlgorithms.distancePointLine(d,f,e),jsts.algorithm.CGAlgorithms.distancePointLine(b,f,e))))}return 0};jsts.algorithm.CGAlgorithms.signedArea=function(c){if(c.length<3){return 0}var e,d,b,g,f,a,h;e=0;for(d=0,b=c.length-1;d<b;d++){g=c[d].x;f=c[d].y;a=c[d+1].x;h=c[d+1].y;e+=(g+a)*(h-f)}return -e/2};jsts.algorithm.CGAlgorithms.signedArea=function(d){var b,g,a,j,h,f,e,c;b=d.length;if(b<3){return 0}g=0;a=d[0];j=a.x;h=a.y;for(f=1;f<b;f++){a=d[f];e=a.x;c=a.y;g+=(j+e)*(c-h);j=e;h=c}return -g/2};jsts.algorithm.CGAlgorithms.computeLength=function(l){var d=l.length,f,c,j,b,h,m,k,a,e,g;if(d<=1){return 0}f=0;a=l[0];c=a.x;j=a.y;e=1,g=d;for(e;e<d;e++){a=l[e];b=a.x;h=a.y;m=b-c;k=h-j;f+=Math.sqrt(m*m+k*k);c=b;j=h}return f};jsts.algorithm.CGAlgorithms.length=function(){};jsts.algorithm.Angle=function(){};jsts.algorithm.Angle.PI_TIMES_2=2*Math.PI;jsts.algorithm.Angle.PI_OVER_2=Math.PI/2;jsts.algorithm.Angle.PI_OVER_4=Math.PI/4;jsts.algorithm.Angle.COUNTERCLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.COUNTERCLOCKWISE;jsts.algorithm.Angle.CLOCKWISE=jsts.algorithm.CGAlgorithms.prototype.CLOCKWISE;jsts.algorithm.Angle.NONE=jsts.algorithm.CGAlgorithms.prototype.COLLINEAR;jsts.algorithm.Angle.toDegrees=function(a){return(a*180)/Math.PI};jsts.algorithm.Angle.toRadians=function(a){return(a*Math.PI)/180};jsts.algorithm.Angle.angle=function(){if(arguments.length===1){return jsts.algorithm.Angle.angleFromOrigo(arguments[0])}else{return jsts.algorithm.Angle.angleBetweenCoords(arguments[0],arguments[1])}};jsts.algorithm.Angle.angleBetweenCoords=function(d,c){var b,a;b=c.x-d.x;a=c.y-d.y;return Math.atan2(a,b)};jsts.algorithm.Angle.angleFromOrigo=function(a){return Math.atan2(a.y,a.x)};jsts.algorithm.Angle.isAcute=function(h,f,e){var b,d,g,c,a;b=h.x-f.x;d=h.y-f.y;g=e.x-f.x;c=e.y-f.y;a=b*g+d*c;return a>0};jsts.algorithm.Angle.isObtuse=function(h,f,e){var b,d,g,c,a;b=h.x-f.x;d=h.y-f.y;g=e.x-f.x;c=e.y-f.y;a=b*g+d*c;return a<0};jsts.algorithm.Angle.angleBetween=function(b,d,e){var c,a;c=jsts.algorithm.Angle.angle(d,b);a=jsts.algorithm.Angle.angle(d,e);return jsts.algorithm.Angle.diff(c,a)};jsts.algorithm.Angle.angleBetweenOriented=function(c,e,f){var d,b,a;d=jsts.algorithm.Angle.angle(e,c);b=jsts.algorithm.Angle.angle(e,f);a=b-d;if(a<=-Math.PI){return a+jsts.algorithm.Angle.PI_TIMES_2}if(a>Math.PI){return a-jsts.algorithm.Angle.PI_TIMES_2}return a};jsts.algorithm.Angle.interiorAngle=function(e,d,c){var b,a;b=jsts.algorithm.Angle.angle(d,e);a=jsts.algorithm.Angle.angle(d,c);return Math.abs(a-b)};jsts.algorithm.Angle.getTurn=function(c,b){var a=Math.sin(b-c);if(a>0){return jsts.algorithm.Angle.COUNTERCLOCKWISE}if(a<0){return jsts.algorithm.Angle.CLOCKWISE}return jsts.algorithm.Angle.NONE};jsts.algorithm.Angle.normalize=function(a){while(a>Math.PI){a-=jsts.algorithm.Angle.PI_TIMES_2}while(a<=-Math.PI){a+=jsts.algorithm.Angle.PI_TIMES_2}return a};jsts.algorithm.Angle.normalizePositive=function(a){if(a<0){while(a<0){a+=jsts.algorithm.Angle.PI_TIMES_2}if(a>=jsts.algorithm.Angle.PI_TIMES_2){a=0}}else{while(a>=jsts.algorithm.Angle.PI_TIMES_2){a-=jsts.algorithm.Angle.PI_TIMES_2}if(a<0){a=0}}return a};jsts.algorithm.Angle.diff=function(c,b){var a;if(c<b){a=b-c}else{a=c-b}if(a>Math.PI){a=(2*Math.PI)-a}return a};jsts.geom.GeometryComponentFilter=function(){};jsts.geom.GeometryComponentFilter.prototype.filter=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.util.LinearComponentExtracter=function(a,b){this.lines=a;this.isForcedToLineString=b};jsts.geom.util.LinearComponentExtracter.prototype=new jsts.geom.GeometryComponentFilter();jsts.geom.util.LinearComponentExtracter.prototype.lines=null;jsts.geom.util.LinearComponentExtracter.prototype.isForcedToLineString=false;jsts.geom.util.LinearComponentExtracter.getLines=function(d,a){if(arguments.length==1){return jsts.geom.util.LinearComponentExtracter.getLines5.apply(this,arguments)}else{if(arguments.length==2&&typeof a==="boolean"){return jsts.geom.util.LinearComponentExtracter.getLines6.apply(this,arguments)}else{if(arguments.length==2&&d instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines3.apply(this,arguments)}else{if(arguments.length==3&&d instanceof jsts.geom.Geometry){return jsts.geom.util.LinearComponentExtracter.getLines4.apply(this,arguments)}else{if(arguments.length==3){return jsts.geom.util.LinearComponentExtracter.getLines2.apply(this,arguments)}}}}}for(var b=0;b<d.length;b++){var c=d[b];jsts.geom.util.LinearComponentExtracter.getLines3(c,a)}return a};jsts.geom.util.LinearComponentExtracter.getLines2=function(d,a,e){for(var b=0;b<d.length;b++){var c=d[b];jsts.geom.util.LinearComponentExtracter.getLines4(c,a,e)}return a};jsts.geom.util.LinearComponentExtracter.getLines3=function(b,a){if(b instanceof LineString){a.add(b)}else{b.apply(new jsts.geom.util.LinearComponentExtracter(a))}return a};jsts.geom.util.LinearComponentExtracter.getLines4=function(b,a,c){b.apply(new jsts.geom.util.LinearComponentExtracter(a,c));return a};jsts.geom.util.LinearComponentExtracter.getLines5=function(a){return jsts.geom.util.LinearComponentExtracter.getLines6(a,false)};jsts.geom.util.LinearComponentExtracter.getLines6=function(b,c){var a=[];b.apply(new jsts.geom.util.LinearComponentExtracter(a,c));return a};jsts.geom.util.LinearComponentExtracter.prototype.setForceToLineString=function(a){this.isForcedToLineString=a};jsts.geom.util.LinearComponentExtracter.prototype.filter=function(b){if(this.isForcedToLineString&&b instanceof jsts.geom.LinearRing){var a=b.getFactory().createLineString(b.getCoordinateSequence());this.lines.push(a);return}if(b instanceof jsts.geom.LineString||b instanceof jsts.geom.LinearRing){this.lines.push(b)}};(function(){var a=function(){};a.setVisited=function(d,b){while(d.hasNext()){var c=d.next();c.setVisited(b)}};a.setMarked=function(d,c){while(d.hasNext()){var b=d.next();b.setMarked(c)}};a.getComponentWithVisitedState=function(d,c){while(d.hasNext()){var b=d.next();if(b.isVisited()==c){return b}}return null};a.prototype._isMarked=false;a.prototype._isVisited=false;a.prototype.data;a.prototype.isVisited=function(){return this._isVisited};a.prototype.setVisited=function(b){this._isVisited=b};a.prototype.isMarked=function(){return this._isMarked};a.prototype.setMarked=function(b){this._isMarked=b};a.prototype.setContext=function(b){this.data=b};a.prototype.getContext=function(){return data};a.prototype.setData=function(b){this.data=b};a.prototype.getData=function(){return data};a.prototype.isRemoved=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.planargraph.GraphComponent=a})();(function(){var a=javascript.util.ArrayList;var b=function(){this.outEdges=new a()};b.prototype.outEdges=null;b.prototype.sorted=false;b.prototype.add=function(c){this.outEdges.add(c);this.sorted=false};b.prototype.remove=function(c){this.outEdges.remove(c)};b.prototype.iterator=function(){this.sortEdges();return this.outEdges.iterator()};b.prototype.getDegree=function(){return this.outEdges.size()};b.prototype.getCoordinate=function(){var c=iterator();if(!c.hasNext()){return null}var d=c.next();return d.getCoordinate()};b.prototype.getEdges=function(){this.sortEdges();return this.outEdges};b.prototype.sortEdges=function(){if(!this.sorted){var c=this.outEdges.toArray();c.sort(function(e,d){return e.compareTo(d)});this.outEdges=javascript.util.Arrays.asList(c);this.sorted=true}};b.prototype.getIndex=function(d){if(d instanceof jsts.planargraph.DirectedEdge){return this.getIndex2(d)}else{if(typeof(d)==="number"){return this.getIndex3(d)}}this.sortEdges();for(var c=0;c<this.outEdges.size();c++){var e=this.outEdges.get(c);if(e.getEdge()==d){return c}}return -1};b.prototype.getIndex2=function(d){this.sortEdges();for(var c=0;c<this.outEdges.size();c++){var e=this.outEdges.get(c);if(e==d){return c}}return -1};b.prototype.getIndex3=function(c){var d=toInt(c%this.outEdges.size());if(d<0){d+=this.outEdges.size()}return d};b.prototype.getNextEdge=function(d){var c=this.getIndex(d);return this.outEdges.get(getIndex(c+1))};b.prototype.getNextCWEdge=function(d){var c=this.getIndex(d);return this.outEdges.get(getIndex(c-1))};jsts.planargraph.DirectedEdgeStar=b})();(function(){var c=jsts.planargraph.GraphComponent;var b=jsts.planargraph.DirectedEdgeStar;var a=function(e,d){this.pt=e;this.deStar=d||new b()};a.prototype=new c();a.getEdgesBetween=function(h,g){var f=DirectedEdge.toEdges(h.getOutEdges().getEdges());var e=new javascript.util.HashSet(f);var d=DirectedEdge.toEdges(g.getOutEdges().getEdges());e.retainAll(d);return e};a.prototype.pt=null;a.prototype.deStar=null;a.prototype.getCoordinate=function(){return this.pt};a.prototype.addOutEdge=function(d){this.deStar.add(d)};a.prototype.getOutEdges=function(){return this.deStar};a.prototype.getDegree=function(){return this.deStar.getDegree()};a.prototype.getIndex=function(d){return this.deStar.getIndex(d)};a.prototype.remove=function(d){if(d===undefined){return this.remove2()}this.deStar.remove(d)};a.prototype.remove2=function(){this.pt=null};a.prototype.isRemoved=function(){return this.pt==null};jsts.planargraph.Node=a})();(function(){jsts.io.GeoJSONReader=function(a){this.geometryFactory=a||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)};jsts.io.GeoJSONReader.prototype.read=function(a){var b=this.parser.read(a);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(b)}return b};jsts.io.GeoJSONReader.prototype.reducePrecision=function(c){var b,a;if(c.coordinate){this.precisionModel.makePrecise(c.coordinate)}else{if(c.points){for(b=0,a=c.points.length;b<a;b++){this.precisionModel.makePrecise(c.points[b])}}else{if(c.geometries){for(b=0,a=c.geometries.length;b<a;b++){this.reducePrecision(c.geometries[b])}}}}}})();jsts.geom.Geometry=function(a){this.factory=a};jsts.geom.Geometry.prototype.envelope=null;jsts.geom.Geometry.prototype.factory=null;jsts.geom.Geometry.prototype.getGeometryType=function(){return"Geometry"};jsts.geom.Geometry.hasNonEmptyElements=function(b){var a;for(a=0;a<b.length;a++){if(!b[a].isEmpty()){return true}}return false};jsts.geom.Geometry.hasNullElements=function(b){var a;for(a=0;a<b.length;a++){if(b[a]===null){return true}}return false};jsts.geom.Geometry.prototype.getFactory=function(){if(this.factory===null||this.factory===undefined){this.factory=new jsts.geom.GeometryFactory()}return this.factory};jsts.geom.Geometry.prototype.getNumGeometries=function(){return 1};jsts.geom.Geometry.prototype.getGeometryN=function(a){return this};jsts.geom.Geometry.prototype.getPrecisionModel=function(){return this.getFactory().getPrecisionModel()};jsts.geom.Geometry.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.getCoordinates=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.getNumPoints=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.isSimple=function(){this.checkNotGeometryCollection(this);var a=new jsts.operation.IsSimpleOp(this);return a.isSimple()};jsts.geom.Geometry.prototype.isValid=function(){var a=new jsts.operation.valid.IsValidOp(this);return a.isValid()};jsts.geom.Geometry.prototype.isEmpty=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.distance=function(a){return jsts.operation.distance.DistanceOp.distance(this,a)};jsts.geom.Geometry.prototype.isWithinDistance=function(b,c){var a=this.getEnvelopeInternal().distance(b.getEnvelopeInternal());if(a>c){return false}return DistanceOp.isWithinDistance(this,b,c)};jsts.geom.Geometry.prototype.isRectangle=function(){return false};jsts.geom.Geometry.prototype.getArea=function(){return 0};jsts.geom.Geometry.prototype.getLength=function(){return 0};jsts.geom.Geometry.prototype.getCentroid=function(){if(this.isEmpty()){return null}var b;var a=null;var c=this.getDimension();if(c===0){b=new jsts.algorithm.CentroidPoint();b.add(this);a=b.getCentroid()}else{if(c===1){b=new jsts.algorithm.CentroidLine();b.add(this);a=b.getCentroid()}else{b=new jsts.algorithm.CentroidArea();b.add(this);a=b.getCentroid()}}return this.createPointFromInternalCoord(a,this)};jsts.geom.Geometry.prototype.getInteriorPoint=function(){var a;var b=null;var c=this.getDimension();if(c===0){a=new InteriorPointPoint(this);b=a.getInteriorPoint()}else{if(c===1){a=new InteriorPointLine(this);b=a.getInteriorPoint()}else{a=new InteriorPointArea(this);b=a.getInteriorPoint()}}return this.createPointFromInternalCoord(b,this)};jsts.geom.Geometry.prototype.getDimension=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.getBoundary=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.getBoundaryDimension=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};jsts.geom.Geometry.prototype.getEnvelopeInternal=function(){if(this.envelope===null){this.envelope=this.computeEnvelopeInternal()}return this.envelope};jsts.geom.Geometry.prototype.disjoint=function(a){return !this.intersects(a)};jsts.geom.Geometry.prototype.touches=function(a){if(!this.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){return false}return this.relate(a).isTouches(this.getDimension(),a.getDimension())};jsts.geom.Geometry.prototype.intersects=function(a){if(!this.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){return false}if(this.isRectangle()){return RectangleIntersects.intersects(this,a)}if(a.isRectangle()){return RectangleIntersects.intersects(a,this)}return this.relate(a).isIntersects()};jsts.geom.Geometry.prototype.crosses=function(a){if(!this.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){return false}return this.relate(a).isCrosses(this.getDimension(),a.getDimension())};jsts.geom.Geometry.prototype.within=function(a){return a.contains(this)};jsts.geom.Geometry.prototype.contains=function(a){if(!this.getEnvelopeInternal().contains(a.getEnvelopeInternal())){return false}if(this.isRectangle()){return RectangleContains.contains(this,a)}return this.relate(a).isContains()};jsts.geom.Geometry.prototype.overlaps=function(a){if(!this.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){return false}return this.relate(a).isOverlaps(this.getDimension(),a.getDimension())};jsts.geom.Geometry.prototype.covers=function(a){if(!this.getEnvelopeInternal().covers(a.getEnvelopeInternal())){return false}if(this.isRectangle()){return true}return this.relate(a).isCovers()};jsts.geom.Geometry.prototype.coveredBy=function(a){return a.covers(this)};jsts.geom.Geometry.prototype.relate=function(b,a){if(arguments.length===1){return this.relate2.apply(this,arguments)}return this.relate2(b).matches(a)};jsts.geom.Geometry.prototype.relate2=function(a){this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(a);return jsts.operation.relate.RelateOp.relate(this,a)};jsts.geom.Geometry.prototype.equalsTopo=function(a){if(!this.getEnvelopeInternal().equals(a.getEnvelopeInternal())){return false}return this.relate(a).isEquals(this.getDimension(),a.getDimension())};jsts.geom.Geometry.prototype.equals=function(a){if(a instanceof jsts.geom.Geometry||a instanceof jsts.geom.LinearRing||a instanceof jsts.geom.Polygon||a instanceof jsts.geom.GeometryCollection||a instanceof jsts.geom.MultiPoint||a instanceof jsts.geom.MultiLineString||a instanceof jsts.geom.MultiPolygon){return this.equalsExact(a)}return false};jsts.geom.Geometry.prototype.buffer=function(){var a=[this];for(var b=0;b<arguments.length;b++){a[b+1]=arguments[b]}return jsts.operation.buffer.BufferOp.bufferOp.apply(this,a)};jsts.geom.Geometry.prototype.convexHull=function(){return new jsts.algorithm.ConvexHull(this).getConvexHull()};jsts.geom.Geometry.prototype.intersection=function(a){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null)}if(a.isEmpty()){return this.getFactory().createGeometryCollection(null)}if(this.isGeometryCollection(this)){var b=a}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(a);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,a,jsts.operation.overlay.OverlayOp.INTERSECTION)};jsts.geom.Geometry.prototype.union=function(a){if(arguments.length===0){return jsts.operation.union.UnaryUnionOp.union(this)}if(this.isEmpty()){return a.clone()}if(a.isEmpty()){return this.clone()}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(a);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,a,jsts.operation.overlay.OverlayOp.UNION)};jsts.geom.Geometry.prototype.difference=function(a){if(this.isEmpty()){return this.getFactory().createGeometryCollection(null)}if(a.isEmpty()){return this.clone()}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(a);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,a,jsts.operation.overlay.OverlayOp.DIFFERENCE)};jsts.geom.Geometry.prototype.symDifference=function(a){if(this.isEmpty()){return a.clone()}if(a.isEmpty()){return this.clone()}this.checkNotGeometryCollection(this);this.checkNotGeometryCollection(a);return jsts.operation.overlay.snap.SnapIfNeededOverlayOp.overlayOp(this,a,jsts.operation.overlay.OverlayOp.SYMDIFFERENCE)};jsts.geom.Geometry.prototype.equalsExact=function(a,b){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.equalsNorm=function(a){if(a===null||a===undefined){return false}return this.norm().equalsExact(a.norm())};jsts.geom.Geometry.prototype.apply=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.clone=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.normalize=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.norm=function(){var a=this.clone();a.normalize();return a};jsts.geom.Geometry.prototype.compareTo=function(b){var a=b;if(this.getClassSortIndex()!==a.getClassSortIndex()){return this.getClassSortIndex()-a.getClassSortIndex()}if(this.isEmpty()&&a.isEmpty()){return 0}if(this.isEmpty()){return -1}if(a.isEmpty()){return 1}return this.compareToSameClass(b)};jsts.geom.Geometry.prototype.isEquivalentClass=function(a){if(this instanceof jsts.geom.Point&&a instanceof jsts.geom.Point){return true}else{if(this instanceof jsts.geom.LineString&&(a instanceof jsts.geom.LineString|a instanceof jsts.geom.LinearRing)){return true}else{if(this instanceof jsts.geom.LinearRing&&(a instanceof jsts.geom.LineString|a instanceof jsts.geom.LinearRing)){return true}else{if(this instanceof jsts.geom.Polygon&&(a instanceof jsts.geom.Polygon)){return true}else{if(this instanceof jsts.geom.MultiPoint&&(a instanceof jsts.geom.MultiPoint)){return true}else{if(this instanceof jsts.geom.MultiLineString&&(a instanceof jsts.geom.MultiLineString)){return true}else{if(this instanceof jsts.geom.MultiPolygon&&(a instanceof jsts.geom.MultiPolygon)){return true}else{if(this instanceof jsts.geom.GeometryCollection&&(a instanceof jsts.geom.GeometryCollection)){return true}}}}}}}}return false};jsts.geom.Geometry.prototype.checkNotGeometryCollection=function(a){if(a.isGeometryCollectionBase()){throw new jsts.error.IllegalArgumentError("This method does not support GeometryCollection")}};jsts.geom.Geometry.prototype.isGeometryCollection=function(){return(this instanceof jsts.geom.GeometryCollection)};jsts.geom.Geometry.prototype.isGeometryCollectionBase=function(){return(this.CLASS_NAME==="jsts.geom.GeometryCollection")};jsts.geom.Geometry.prototype.computeEnvelopeInternal=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.compareToSameClass=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Geometry.prototype.compare=function(d,c){var f=d.iterator();var e=c.iterator();while(f.hasNext()&&e.hasNext()){var k=f.next();var h=e.next();var g=k.compareTo(h);if(g!==0){return g}}if(f.hasNext()){return 1}if(e.hasNext()){return -1}return 0};jsts.geom.Geometry.prototype.equal=function(d,c,e){if(e===undefined||e===null||e===0){return d.equals(c)}return d.distance(c)<=e};jsts.geom.Geometry.prototype.getClassSortIndex=function(){var b=[jsts.geom.Point,jsts.geom.MultiPoint,jsts.geom.LineString,jsts.geom.LinearRing,jsts.geom.MultiLineString,jsts.geom.Polygon,jsts.geom.MultiPolygon,jsts.geom.GeometryCollection];for(var a=0;a<b.length;a++){if(this instanceof b[a]){return a}}jsts.util.Assert.shouldNeverReachHere("Class not supported: "+this);return -1};jsts.geom.Geometry.prototype.toString=function(){return new jsts.io.WKTWriter().write(this)};jsts.geom.Geometry.prototype.createPointFromInternalCoord=function(b,a){a.getPrecisionModel().makePrecise(b);return a.getFactory().createPoint(b)};(function(){jsts.geom.Coordinate=function(a,b){if(typeof a==="number"){this.x=a;this.y=b}else{if(a instanceof jsts.geom.Coordinate){this.x=parseFloat(a.x);this.y=parseFloat(a.y)}else{if(a===undefined||a===null){this.x=0;this.y=0}else{if(typeof a==="string"){this.x=parseFloat(a);this.y=parseFloat(b)}}}}};jsts.geom.Coordinate.prototype.setCoordinate=function(a){this.x=a.x;this.y=a.y};jsts.geom.Coordinate.prototype.clone=function(){return new jsts.geom.Coordinate(this.x,this.y)};jsts.geom.Coordinate.prototype.distance=function(c){var b=this.x-c.x;var a=this.y-c.y;return Math.sqrt(b*b+a*a)};jsts.geom.Coordinate.prototype.equals2D=function(a){if(this.x!==a.x){return false}if(this.y!==a.y){return false}return true};jsts.geom.Coordinate.prototype.equals=function(a){if(!a instanceof jsts.geom.Coordinate||a===undefined){return false}return this.equals2D(a)};jsts.geom.Coordinate.prototype.compareTo=function(a){if(this.x<a.x){return -1}if(this.x>a.x){return 1}if(this.y<a.y){return -1}if(this.y>a.y){return 1}return 0};jsts.geom.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}})();jsts.geom.Envelope=function(){jsts.geom.Envelope.prototype.init.apply(this,arguments)};jsts.geom.Envelope.prototype.minx=null;jsts.geom.Envelope.prototype.maxx=null;jsts.geom.Envelope.prototype.miny=null;jsts.geom.Envelope.prototype.maxy=null;jsts.geom.Envelope.prototype.init=function(){if(typeof arguments[0]==="number"&&arguments.length===4){this.initFromValues(arguments[0],arguments[1],arguments[2],arguments[3])}else{if(arguments[0] instanceof jsts.geom.Coordinate&&arguments.length===1){this.initFromCoordinate(arguments[0])}else{if(arguments[0] instanceof jsts.geom.Coordinate&&arguments.length===2){this.initFromCoordinates(arguments[0],arguments[1])}else{if(arguments[0] instanceof jsts.geom.Envelope&&arguments.length===1){this.initFromEnvelope(arguments[0])}else{this.setToNull()}}}}};jsts.geom.Envelope.prototype.initFromValues=function(b,a,d,c){if(b<a){this.minx=b;this.maxx=a}else{this.minx=a;this.maxx=b}if(d<c){this.miny=d;this.maxy=c}else{this.miny=c;this.maxy=d}};jsts.geom.Envelope.prototype.initFromCoordinates=function(b,a){this.initFromValues(b.x,a.x,b.y,a.y)};jsts.geom.Envelope.prototype.initFromCoordinate=function(a){this.initFromValues(a.x,a.x,a.y,a.y)};jsts.geom.Envelope.prototype.initFromEnvelope=function(a){this.minx=a.minx;this.maxx=a.maxx;this.miny=a.miny;this.maxy=a.maxy};jsts.geom.Envelope.prototype.setToNull=function(){this.minx=0;this.maxx=-1;this.miny=0;this.maxy=-1};jsts.geom.Envelope.prototype.isNull=function(){return this.maxx<this.minx};jsts.geom.Envelope.prototype.getHeight=function(){if(this.isNull()){return 0}return this.maxy-this.miny};jsts.geom.Envelope.prototype.getWidth=function(){if(this.isNull()){return 0}return this.maxx-this.minx};jsts.geom.Envelope.prototype.getMinX=function(){return this.minx};jsts.geom.Envelope.prototype.getMaxX=function(){return this.maxx};jsts.geom.Envelope.prototype.getMinY=function(){return this.miny};jsts.geom.Envelope.prototype.getMaxY=function(){return this.maxy};jsts.geom.Envelope.prototype.getArea=function(){return getWidth()*getHeight()};jsts.geom.Envelope.prototype.expandToInclude=function(){if(arguments[0] instanceof jsts.geom.Coordinate){this.expandToIncludeCoordinate(arguments[0])}else{if(arguments[0] instanceof jsts.geom.Envelope){this.expandToIncludeEnvelope(arguments[0])}else{this.expandToIncludeValues(arguments[0],arguments[1])}}};jsts.geom.Envelope.prototype.expandToIncludeCoordinate=function(a){this.expandToIncludeValues(a.x,a.y)};jsts.geom.Envelope.prototype.expandToIncludeValues=function(a,b){if(this.isNull()){this.minx=a;this.maxx=a;this.miny=b;this.maxy=b}else{if(a<this.minx){this.minx=a}if(a>this.maxx){this.maxx=a}if(b<this.miny){this.miny=b}if(b>this.maxy){this.maxy=b}}};jsts.geom.Envelope.prototype.expandToIncludeEnvelope=function(a){if(a.isNull()){return}if(this.isNull()){this.minx=a.getMinX();this.maxx=a.getMaxX();this.miny=a.getMinY();this.maxy=a.getMaxY()}else{if(a.minx<this.minx){this.minx=a.minx}if(a.maxx>this.maxx){this.maxx=a.maxx}if(a.miny<this.miny){this.miny=a.miny}if(a.maxy>this.maxy){this.maxy=a.maxy}}};jsts.geom.Envelope.prototype.expandBy=function(){if(arguments.length===1){this.expandByDistance(arguments[0])}else{this.expandByDistances(arguments[0],arguments[1])}};jsts.geom.Envelope.prototype.expandByDistance=function(a){this.expandByDistances(a,a)};jsts.geom.Envelope.prototype.expandByDistances=function(b,a){if(this.isNull()){return}this.minx-=b;this.maxx+=b;this.miny-=a;this.maxy+=a;if(this.minx>this.maxx||this.miny>this.maxy){this.setToNull()}};jsts.geom.Envelope.prototype.translate=function(b,a){if(this.isNull()){return}this.init(this.minx+b,this.maxx+b,this.miny+a,this.maxy+a)};jsts.geom.Envelope.prototype.centre=function(){if(this.isNull()){return null}return new jsts.geom.Coordinate((this.minx+this.maxx)/2,(this.miny+this.maxy)/2)};jsts.geom.Envelope.prototype.intersection=function(c){if(this.isNull()||c.isNull()||!this.intersects(c)){return new jsts.geom.Envelope()}var b=this.minx>c.minx?this.minx:c.minx;var a=this.miny>c.miny?this.miny:c.miny;var e=this.maxx<c.maxx?this.maxx:c.maxx;var d=this.maxy<c.maxy?this.maxy:c.maxy;return new jsts.geom.Envelope(b,e,a,d)};jsts.geom.Envelope.prototype.intersects=function(){if(arguments[0] instanceof jsts.geom.Envelope){return this.intersectsEnvelope(arguments[0])}else{if(arguments[0] instanceof jsts.geom.Coordinate){return this.intersectsCoordinate(arguments[0])}else{return this.intersectsValues(arguments[0],arguments[1])}}};jsts.geom.Envelope.prototype.intersectsEnvelope=function(b){if(this.isNull()||b.isNull()){return false}var a=!(b.minx>this.maxx||b.maxx<this.minx||b.miny>this.maxy||b.maxy<this.miny);return a};jsts.geom.Envelope.prototype.intersectsCoordinate=function(a){return this.intersectsValues(a.x,a.y)};jsts.geom.Envelope.prototype.intersectsValues=function(a,b){if(this.isNull()){return false}return !(a>this.maxx||a<this.minx||b>this.maxy||b<this.miny)};jsts.geom.Envelope.prototype.contains=function(){if(arguments[0] instanceof jsts.geom.Envelope){return this.containsEnvelope(arguments[0])}else{if(arguments[0] instanceof jsts.geom.Coordinate){return this.containsCoordinate(arguments[0])}else{return this.containsValues(arguments[0],arguments[1])}}};jsts.geom.Envelope.prototype.containsEnvelope=function(a){return this.coversEnvelope(a)};jsts.geom.Envelope.prototype.containsCoordinate=function(a){return this.coversCoordinate(a)};jsts.geom.Envelope.prototype.containsValues=function(a,b){return this.coversValues(a,b)};jsts.geom.Envelope.prototype.covers=function(){if(p instanceof jsts.geom.Envelope){this.coversEnvelope(arguments[0])}else{if(p instanceof jsts.geom.Coordinate){this.coversCoordinate(arguments[0])}else{this.coversValues(arguments[0],arguments[1])}}};jsts.geom.Envelope.prototype.coversValues=function(a,b){if(this.isNull()){return false}return a>=this.minx&&a<=this.maxx&&b>=this.miny&&b<=this.maxy};jsts.geom.Envelope.prototype.coversCoordinate=function(a){return this.coversValues(a.x,a.y)};jsts.geom.Envelope.prototype.coversEnvelope=function(a){if(this.isNull()||a.isNull()){return false}return a.minx>=this.minx&&a.maxx<=this.maxx&&a.miny>=this.miny&&a.maxy<=this.maxy};jsts.geom.Envelope.prototype.distance=function(c){if(this.intersects(c)){return 0}var b=0;if(this.maxx<c.minx){b=c.minx-this.maxx}if(this.minx>c.maxx){b=this.minx-c.maxx}var a=0;if(this.maxy<c.miny){a=c.miny-this.maxy}if(this.miny>c.maxy){a=this.miny-c.maxy}if(b===0){return a}if(a===0){return b}return Math.sqrt(b*b+a*a)};jsts.geom.Envelope.prototype.equals=function(a){if(this.isNull()){return a.isNull()}return this.maxx===a.maxx&&this.maxy===a.maxy&&this.minx===a.minx&&this.miny===a.miny};jsts.geom.Envelope.prototype.toString=function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"};jsts.geom.Envelope.intersects=function(g,e,c){if(arguments.length===4){return jsts.geom.Envelope.intersectsEnvelope(arguments[0],arguments[1],arguments[2],arguments[3])}var f=g.x<e.x?g.x:e.x;var d=g.x>e.x?g.x:e.x;var b=g.y<e.y?g.y:e.y;var a=g.y>e.y?g.y:e.y;if(((c.x>=f)&&(c.x<=d))&&((c.y>=b)&&(c.y<=a))){return true}return false};jsts.geom.Envelope.intersectsEnvelope=function(g,e,a,h){var d=Math.min(a.x,h.x);var b=Math.max(a.x,h.x);var f=Math.min(g.x,e.x);var c=Math.max(g.x,e.x);if(f>b){return false}if(c<d){return false}d=Math.min(a.y,h.y);b=Math.max(a.y,h.y);f=Math.min(g.y,e.y);c=Math.max(g.y,e.y);if(f>b){return false}if(c<d){return false}return true};jsts.geom.Envelope.prototype.clone=function(){return new jsts.geom.Envelope(this.minx,this.miny,this.maxx,this.maxy)};jsts.geom.util.GeometryCombiner=function(a){this.geomFactory=jsts.geom.util.GeometryCombiner.extractFactory(a);this.inputGeoms=a};jsts.geom.util.GeometryCombiner.combiner=function(b){var a=new jsts.geom.util.GeometryCombiner(b);return a.combine()};jsts.geom.util.GeometryCombiner.combine=function(){var a=jsts.geom.util.GeometryCombiner([].slice.call(arguments));return a.combine()};jsts.geom.util.GeometryCombiner.prototype.geomFactory=null;jsts.geom.util.GeometryCombiner.prototype.skipEmpty=false;jsts.geom.util.GeometryCombiner.prototype.inputGeoms;jsts.geom.util.GeometryCombiner.extractFactory=function(a){if(a.length===0){return null}return a[0].getFactory()};jsts.geom.util.GeometryCombiner.prototype.combine=function(){var b=[];for(var c=0,a=this.inputGeoms.length;c<a;c++){var d=this.inputGeoms[c];this.extractElements(d,b)}if(b.length===0){if(this.geomFactory!==null){return this.geomFactory.createGeometryCollection(null)}return null}return this.geomFactory.buildGeometry(b)};jsts.geom.util.GeometryCombiner.prototype.extractElements=function(c,a){if(c===null){return}for(var b=0;b<c.getNumGeometries();b++){var d=c.getGeometryN(b);if(this.skipEmpty&&d.isEmpty()){continue}a.add(d)}};jsts.geom.PrecisionModel=function(a){if(typeof a==="number"){this.modelType=jsts.geom.PrecisionModel.FIXED;this.scale=a;return}this.modelType=a||jsts.geom.PrecisionModel.FLOATING;if(this.modelType===jsts.geom.PrecisionModel.FIXED){this.scale=1}};jsts.geom.PrecisionModel.FLOATING="FLOATING";jsts.geom.PrecisionModel.FIXED="FIXED";jsts.geom.PrecisionModel.FLOATING_SINGLE="FLOATING_SINGLE";jsts.geom.PrecisionModel.prototype.scale=null;jsts.geom.PrecisionModel.prototype.modelType=null;jsts.geom.PrecisionModel.prototype.isFloating=function(){return this.modelType===jsts.geom.PrecisionModel.FLOATING||this.modelType===jsts.geom.PrecisionModel.FLOATING_SINLGE};jsts.geom.PrecisionModel.prototype.getScale=function(){return this.scale};jsts.geom.PrecisionModel.prototype.getType=function(){return this.modelType};jsts.geom.PrecisionModel.prototype.equals=function(a){return true;if(!(a instanceof jsts.geom.PrecisionModel)){return false}var b=a;return this.modelType===b.modelType&&this.scale===b.scale};jsts.geom.PrecisionModel.prototype.makePrecise=function(a){if(a instanceof jsts.geom.Coordinate){this.makePrecise2(a);return}if(isNaN(a)){return a}if(this.modelType===jsts.geom.PrecisionModel.FIXED){return Math.round(a*this.scale)/this.scale}return a};jsts.geom.PrecisionModel.prototype.makePrecise2=function(a){if(this.modelType===jsts.geom.PrecisionModel.FLOATING){return}a.x=this.makePrecise(a.x);a.y=this.makePrecise(a.y)};jsts.geom.PrecisionModel.prototype.compareTo=function(b){var a=b;return 0};jsts.geom.CoordinateFilter=function(){};jsts.geom.CoordinateFilter.prototype.filter=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.Point=function(b,a){this.factory=a;if(b===undefined){return}this.coordinate=b};jsts.geom.Point.prototype=new jsts.geom.Geometry();jsts.geom.Point.constructor=jsts.geom.Point;jsts.geom.Point.CLASS_NAME="jsts.geom.Point";jsts.geom.Point.prototype.coordinate=null;jsts.geom.Point.prototype.getX=function(){return this.coordinate.x};jsts.geom.Point.prototype.getY=function(){return this.coordinate.y};jsts.geom.Point.prototype.getCoordinate=function(){return this.coordinate};jsts.geom.Point.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.coordinate]};jsts.geom.Point.prototype.isEmpty=function(){return this.coordinate===null};jsts.geom.Point.prototype.equalsExact=function(a,b){if(!this.isEquivalentClass(a)){return false}if(this.isEmpty()&&a.isEmpty()){return true}return this.equal(a.getCoordinate(),this.getCoordinate(),b)};jsts.geom.Point.prototype.getNumPoints=function(){return this.isEmpty()?0:1};jsts.geom.Point.prototype.isSimple=function(){return true};jsts.geom.Point.prototype.getBoundary=function(){return new jsts.geom.GeometryCollection(null)};jsts.geom.Point.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope()}return new jsts.geom.Envelope(this.coordinate)};jsts.geom.Point.prototype.apply=function(a){if(a instanceof jsts.geom.GeometryFilter||a instanceof jsts.geom.GeometryComponentFilter){a.filter(this)}else{if(a instanceof jsts.geom.CoordinateFilter){if(this.isEmpty()){return}a.filter(this.getCoordinate())}}};jsts.geom.Point.prototype.clone=function(){return new jsts.geom.Point(this.coordinate.clone(),this.factory)};jsts.geom.Point.prototype.getDimension=function(){return 0};jsts.geom.Point.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE};jsts.geom.Point.prototype.reverse=function(){return this.clone()};jsts.geom.Point.prototype.isValid=function(){if(!jsts.operation.valid.IsValidOp.isValid(this.getCoordinate())){return false}return true};jsts.geom.Point.prototype.normalize=function(){};jsts.geom.Point.prototype.compareToSameClass=function(b){var a=b;return this.getCoordinate().compareTo(a.getCoordinate())};jsts.geom.Point.prototype.getGeometryType=function(){return"Point"};jsts.geom.Point.prototype.hashCode=function(){return"Point_"+this.coordinate.hashCode()};jsts.geom.Point.prototype.CLASS_NAME="jsts.geom.Point";jsts.geomgraph.EdgeIntersection=function(c,b,a){this.coord=new jsts.geom.Coordinate(c);this.segmentIndex=b;this.dist=a};jsts.geomgraph.EdgeIntersection.prototype.coord=null;jsts.geomgraph.EdgeIntersection.prototype.segmentIndex=null;jsts.geomgraph.EdgeIntersection.prototype.dist=null;jsts.geomgraph.EdgeIntersection.prototype.getCoordinate=function(){return this.coord};jsts.geomgraph.EdgeIntersection.prototype.getSegmentIndex=function(){return this.segmentIndex};jsts.geomgraph.EdgeIntersection.prototype.getDistance=function(){return this.dist};jsts.geomgraph.EdgeIntersection.prototype.compareTo=function(a){return this.compare(a.segmentIndex,a.dist)};jsts.geomgraph.EdgeIntersection.prototype.compare=function(b,a){if(this.segmentIndex<b){return -1}if(this.segmentIndex>b){return 1}if(this.dist<a){return -1}if(this.dist>a){return 1}return 0};jsts.geomgraph.EdgeIntersection.prototype.isEndPoint=function(a){if(this.segmentIndex===0&&this.dist===0){return true}if(this.segmentIndex===a){return true}return false};jsts.geomgraph.EdgeIntersection.prototype.toString=function(){return""+this.segmentIndex+this.dist};(function(){var a=jsts.geomgraph.EdgeIntersection;var b=javascript.util.TreeMap;jsts.geomgraph.EdgeIntersectionList=function(c){this.nodeMap=new b();this.edge=c};jsts.geomgraph.EdgeIntersectionList.prototype.nodeMap=null;jsts.geomgraph.EdgeIntersectionList.prototype.edge=null;jsts.geomgraph.EdgeIntersectionList.prototype.isIntersection=function(e){for(var c=this.iterator();c.hasNext();){var d=c.next();if(d.coord.equals(e)){return true}}return false};jsts.geomgraph.EdgeIntersectionList.prototype.add=function(c,g,f){var d=new a(c,g,f);var e=this.nodeMap.get(d);if(e!==null){return e}this.nodeMap.put(d,d);return d};jsts.geomgraph.EdgeIntersectionList.prototype.iterator=function(){return this.nodeMap.values().iterator()};jsts.geomgraph.EdgeIntersectionList.prototype.addEndpoints=function(){var c=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0);this.add(this.edge.pts[c],c,0)};jsts.geomgraph.EdgeIntersectionList.prototype.addSplitEdges=function(e){this.addEndpoints();var d=this.iterator();var f=d.next();while(d.hasNext()){var g=d.next();var c=this.createSplitEdge(f,g);e.add(c);f=g}};jsts.geomgraph.EdgeIntersectionList.prototype.createSplitEdge=function(k,j){var h=j.segmentIndex-k.segmentIndex+2;var g=this.edge.pts[j.segmentIndex];var c=j.dist>0||!j.coord.equals2D(g);if(!c){h--}var f=[];var e=0;f[e++]=new jsts.geom.Coordinate(k.coord);for(var d=k.segmentIndex+1;d<=j.segmentIndex;d++){f[e++]=this.edge.pts[d]}if(c){f[e]=j.coord}return new jsts.geomgraph.Edge(f,new jsts.geomgraph.Label(this.edge.label))}})();jsts.geom.Location=function(){};jsts.geom.Location.INTERIOR=0;jsts.geom.Location.BOUNDARY=1;jsts.geom.Location.EXTERIOR=2;jsts.geom.Location.NONE=-1;jsts.geom.Location.toLocationSymbol=function(a){switch(a){case jsts.geom.Location.EXTERIOR:return"e";case jsts.geom.Location.BOUNDARY:return"b";case jsts.geom.Location.INTERIOR:return"i";case jsts.geom.Location.NONE:return"-"}throw new jsts.IllegalArgumentError("Unknown location value: "+a)};(function(){var a=function(b){this.message=b};a.prototype=new Error();a.prototype.name="AssertionFailedException";jsts.util.AssertionFailedException=a})();(function(){var a=jsts.util.AssertionFailedException;jsts.util.Assert=function(){};jsts.util.Assert.isTrue=function(b,c){if(!b){if(c===null){throw new a()}else{throw new a(c)}}};jsts.util.Assert.equals=function(b,d,c){if(!d.equals(b)){throw new a("Expected "+b+" but encountered "+d+(c!=null?": "+c:""))}};jsts.util.Assert.shouldNeverReachHere=function(b){throw new a("Should never reach here"+(b!=null?": "+b:""))}})();(function(){var b=jsts.geom.Location;var c=jsts.util.Assert;var a=javascript.util.ArrayList;jsts.operation.relate.RelateComputer=function(d){this.li=new jsts.algorithm.RobustLineIntersector();this.ptLocator=new jsts.algorithm.PointLocator();this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory());this.isolatedEdges=new a();this.arg=d};jsts.operation.relate.RelateComputer.prototype.li=null;jsts.operation.relate.RelateComputer.prototype.ptLocator=null;jsts.operation.relate.RelateComputer.prototype.arg=null;jsts.operation.relate.RelateComputer.prototype.nodes=null;jsts.operation.relate.RelateComputer.prototype.im=null;jsts.operation.relate.RelateComputer.prototype.isolatedEdges=null;jsts.operation.relate.RelateComputer.prototype.invalidPoint=null;jsts.operation.relate.RelateComputer.prototype.computeIM=function(){var g=new jsts.geom.IntersectionMatrix();g.set(b.EXTERIOR,b.EXTERIOR,2);if(!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal())){this.computeDisjointIM(g);return g}this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);var d=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,false);this.computeIntersectionNodes(0);this.computeIntersectionNodes(1);this.copyNodesAndLabels(0);this.copyNodesAndLabels(1);this.labelIsolatedNodes();this.computeProperIntersectionIM(d,g);var f=new jsts.operation.relate.EdgeEndBuilder();var h=f.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(h);var e=f.computeEdgeEnds(this.arg[1].getEdgeIterator());this.insertEdgeEnds(e);this.labelNodeEdges();this.labelIsolatedEdges(0,1);this.labelIsolatedEdges(1,0);this.updateIM(g);return g};jsts.operation.relate.RelateComputer.prototype.insertEdgeEnds=function(d){for(var f=d.iterator();f.hasNext();){var g=f.next();this.nodes.add(g)}};jsts.operation.relate.RelateComputer.prototype.computeProperIntersectionIM=function(e,f){var h=this.arg[0].getGeometry().getDimension();var g=this.arg[1].getGeometry().getDimension();var j=e.hasProperIntersection();var d=e.hasProperInteriorIntersection();if(h===2&&g===2){if(j){f.setAtLeast("212101212")}}else{if(h===2&&g===1){if(j){f.setAtLeast("FFF0FFFF2")}if(d){f.setAtLeast("1FFFFF1FF")}}else{if(h===1&&g===2){if(j){f.setAtLeast("F0FFFFFF2")}if(d){f.setAtLeast("1F1FFFFFF")}}else{if(h===1&&g===1){if(d){f.setAtLeast("0FFFFFFFF")}}}}}};jsts.operation.relate.RelateComputer.prototype.copyNodesAndLabels=function(g){for(var e=this.arg[g].getNodeIterator();e.hasNext();){var f=e.next();var d=this.nodes.addNode(f.getCoordinate());d.setLabel(g,f.getLabel().getLocation(g))}};jsts.operation.relate.RelateComputer.prototype.computeIntersectionNodes=function(f){for(var d=this.arg[f].getEdgeIterator();d.hasNext();){var h=d.next();var l=h.getLabel().getLocation(f);for(var k=h.getEdgeIntersectionList().iterator();k.hasNext();){var g=k.next();var j=this.nodes.addNode(g.coord);if(l===b.BOUNDARY){j.setLabelBoundary(f)}else{if(j.getLabel().isNull(f)){j.setLabel(f,b.INTERIOR)}}}}};jsts.operation.relate.RelateComputer.prototype.labelIntersectionNodes=function(f){for(var d=this.arg[f].getEdgeIterator();d.hasNext();){var h=d.next();var l=h.getLabel().getLocation(f);for(var k=h.getEdgeIntersectionList().iterator();k.hasNext();){var g=k.next();var j=this.nodes.find(g.coord);if(j.getLabel().isNull(f)){if(l===b.BOUNDARY){j.setLabelBoundary(f)}else{j.setLabel(f,b.INTERIOR)}}}}};jsts.operation.relate.RelateComputer.prototype.computeDisjointIM=function(d){var f=this.arg[0].getGeometry();if(!f.isEmpty()){d.set(b.INTERIOR,b.EXTERIOR,f.getDimension());d.set(b.BOUNDARY,b.EXTERIOR,f.getBoundaryDimension())}var e=this.arg[1].getGeometry();if(!e.isEmpty()){d.set(b.EXTERIOR,b.INTERIOR,e.getDimension());d.set(b.EXTERIOR,b.BOUNDARY,e.getBoundaryDimension())}};jsts.operation.relate.RelateComputer.prototype.labelNodeEdges=function(){for(var d=this.nodes.iterator();d.hasNext();){var e=d.next();e.getEdges().computeLabelling(this.arg)}};jsts.operation.relate.RelateComputer.prototype.updateIM=function(d){for(var j=this.isolatedEdges.iterator();j.hasNext();){var h=j.next();h.updateIM(d)}for(var f=this.nodes.iterator();f.hasNext();){var g=f.next();g.updateIM(d);g.updateIMFromEdges(d)}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdges=function(h,d){for(var g=this.arg[h].getEdgeIterator();g.hasNext();){var f=g.next();if(f.isIsolated()){this.labelIsolatedEdge(f,d,this.arg[d].getGeometry());this.isolatedEdges.add(f)}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedEdge=function(g,d,f){if(f.getDimension()>0){var h=this.ptLocator.locate(g.getCoordinate(),f);g.getLabel().setAllLocations(d,h)}else{g.getLabel().setAllLocations(d,b.EXTERIOR)}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNodes=function(){for(var e=this.nodes.iterator();e.hasNext();){var f=e.next();var d=f.getLabel();c.isTrue(d.getGeometryCount()>0,"node with empty label found");if(f.isIsolated()){if(d.isNull(0)){this.labelIsolatedNode(f,0)}else{this.labelIsolatedNode(f,1)}}}};jsts.operation.relate.RelateComputer.prototype.labelIsolatedNode=function(f,d){var e=this.ptLocator.locate(f.getCoordinate(),this.arg[d].getGeometry());f.getLabel().setAllLocations(d,e)}})();(function(){var a=jsts.util.Assert;jsts.geomgraph.GraphComponent=function(b){this.label=b};jsts.geomgraph.GraphComponent.prototype.label=null;jsts.geomgraph.GraphComponent.prototype._isInResult=false;jsts.geomgraph.GraphComponent.prototype._isCovered=false;jsts.geomgraph.GraphComponent.prototype._isCoveredSet=false;jsts.geomgraph.GraphComponent.prototype._isVisited=false;jsts.geomgraph.GraphComponent.prototype.getLabel=function(){return this.label};jsts.geomgraph.GraphComponent.prototype.setLabel=function(b){if(arguments.length===2){this.setLabel2.apply(this,arguments);return}this.label=b};jsts.geomgraph.GraphComponent.prototype.setInResult=function(b){this._isInResult=b};jsts.geomgraph.GraphComponent.prototype.isInResult=function(){return this._isInResult};jsts.geomgraph.GraphComponent.prototype.setCovered=function(b){this._isCovered=b;this._isCoveredSet=true};jsts.geomgraph.GraphComponent.prototype.isCovered=function(){return this._isCovered};jsts.geomgraph.GraphComponent.prototype.isCoveredSet=function(){return this._isCoveredSet};jsts.geomgraph.GraphComponent.prototype.isVisited=function(){return this._isVisited};jsts.geomgraph.GraphComponent.prototype.setVisited=function(b){this._isVisited=b};jsts.geomgraph.GraphComponent.prototype.getCoordinate=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.GraphComponent.prototype.computeIM=function(b){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.GraphComponent.prototype.isIsolated=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.GraphComponent.prototype.updateIM=function(b){a.isTrue(this.label.getGeometryCount()>=2,"found partial label");this.computeIM(b)}})();jsts.geomgraph.Node=function(b,a){this.coord=b;this.edges=a;this.label=new jsts.geomgraph.Label(0,jsts.geom.Location.NONE)};jsts.geomgraph.Node.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Node.prototype.coord=null;jsts.geomgraph.Node.prototype.edges=null;jsts.geomgraph.Node.prototype.isIsolated=function(){return(this.label.getGeometryCount()==1)};jsts.geomgraph.Node.prototype.setLabel2=function(a,b){if(this.label===null){this.label=new jsts.geomgraph.Label(a,b)}else{this.label.setLocation(a,b)}};jsts.geomgraph.Node.prototype.setLabelBoundary=function(b){var c=jsts.geom.Location.NONE;if(this.label!==null){c=this.label.getLocation(b)}var a;switch(c){case jsts.geom.Location.BOUNDARY:a=jsts.geom.Location.INTERIOR;break;case jsts.geom.Location.INTERIOR:a=jsts.geom.Location.BOUNDARY;break;default:a=jsts.geom.Location.BOUNDARY;break}this.label.setLocation(b,a)};jsts.geomgraph.Node.prototype.add=function(a){this.edges.insert(a);a.setNode(this)};jsts.geomgraph.Node.prototype.getCoordinate=function(){return this.coord};jsts.geomgraph.Node.prototype.getEdges=function(){return this.edges};jsts.geomgraph.Node.prototype.isIncidentEdgeInResult=function(){for(var a=this.getEdges().getEdges().iterator();a.hasNext();){var b=a.next();if(b.getEdge().isInResult()){return true}}return false};(function(){var a=function(b){this.deList=new javascript.util.ArrayList();this.factory=b};a.findEdgeRingContaining=function(b,j){var n=b.getRing();var f=n.getEnvelopeInternal();var d=n.getCoordinateN(0);var k=null;var e=null;for(var h=j.iterator();h.hasNext();){var g=h.next();var c=g.getRing();var l=c.getEnvelopeInternal();if(k!=null){e=k.getRing().getEnvelopeInternal()}var m=false;if(l.equals(f)){continue}d=jsts.geom.CoordinateArrays.ptNotInList(n.getCoordinates(),c.getCoordinates());if(l.contains(f)&&jsts.algorithm.CGAlgorithms.isPointInRing(d,c.getCoordinates())){m=true}if(m){if(k==null||e.contains(l)){k=g}}}return k};a.ptNotInList=function(d,e){for(var c=0;c<d.length;c++){var b=d[c];if(!isInList(b,e)){return b}}return null};a.isInList=function(c,d){for(var b=0;b<d.length;b++){if(c.equals(d[b])){return true}}return false};a.prototype.factory=null;a.prototype.deList=null;a.prototype.ring=null;a.prototype.ringPts=null;a.prototype.holes=null;a.prototype.add=function(b){this.deList.add(b)};a.prototype.isHole=function(){var b=this.getRing();return jsts.algorithm.CGAlgorithms.isCCW(b.getCoordinates())};a.prototype.addHole=function(b){if(this.holes==null){this.holes=new javascript.util.ArrayList()}this.holes.add(b)};a.prototype.getPolygon=function(){var c=null;if(this.holes!=null){c=[];for(var b=0;b<this.holes.size();b++){c[b]=this.holes.get(b)}}var d=this.factory.createPolygon(this.ring,c);return d};a.prototype.isValid=function(){this.getCoordinates();if(this.ringPts.length<=3){return false}this.getRing();return this.ring.isValid()};a.prototype.getCoordinates=function(){if(this.ringPts==null){var c=new jsts.geom.CoordinateList();for(var b=this.deList.iterator();b.hasNext();){var e=b.next();var d=e.getEdge();a.addEdge(d.getLine().getCoordinates(),e.getEdgeDirection(),c)}this.ringPts=c.toCoordinateArray()}return this.ringPts};a.prototype.getLineString=function(){this.getCoordinates();return this.factory.createLineString(this.ringPts)};a.prototype.getRing=function(){if(this.ring!=null){return this.ring}this.getCoordinates();if(this.ringPts.length<3){console.log(this.ringPts)}try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(b){console.log(this.ringPts)}return this.ring};a.addEdge=function(e,d,c){if(d){for(var b=0;b<e.length;b++){c.add(e[b],false)}}else{for(var b=e.length-1;b>=0;b--){c.add(e[b],false)}}};jsts.operation.polygonize.EdgeRing=a})();(function(){var b=jsts.planargraph.GraphComponent;var a=function(d,c){if(d===undefined){return}this.setDirectedEdges(d,c)};a.prototype=new b();a.prototype.dirEdge=null;a.prototype.setDirectedEdges=function(d,c){this.dirEdge=[d,c];d.setEdge(this);c.setEdge(this);d.setSym(c);c.setSym(d);d.getFromNode().addOutEdge(d);c.getFromNode().addOutEdge(c)};a.prototype.getDirEdge=function(c){if(c instanceof jsts.planargraph.Node){this.getDirEdge2(c)}return this.dirEdge[c]};a.prototype.getDirEdge2=function(c){if(this.dirEdge[0].getFromNode()==c){return this.dirEdge[0]}if(this.dirEdge[1].getFromNode()==c){return this.dirEdge[1]}return null};a.prototype.getOppositeNode=function(c){if(this.dirEdge[0].getFromNode()==c){return this.dirEdge[0].getToNode()}if(this.dirEdge[1].getFromNode()==c){return this.dirEdge[1].getToNode()}return null};a.prototype.remove=function(){this.dirEdge=null};a.prototype.isRemoved=function(){return dirEdge==null};jsts.planargraph.Edge=a})();jsts.operation.polygonize.PolygonizeEdge=function(a){this.line=a};jsts.operation.polygonize.PolygonizeEdge.prototype=new jsts.planargraph.Edge();jsts.operation.polygonize.PolygonizeEdge.prototype.line=null;jsts.operation.polygonize.PolygonizeEdge.prototype.getLine=function(){return this.line};(function(){var a=javascript.util.ArrayList;var c=jsts.planargraph.GraphComponent;var b=function(j,h,f,g){if(j===undefined){return}this.from=j;this.to=h;this.edgeDirection=g;this.p0=j.getCoordinate();this.p1=f;var e=this.p1.x-this.p0.x;var d=this.p1.y-this.p0.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(e,d);this.angle=Math.atan2(d,e)};b.prototype=new c();b.toEdges=function(e){var d=new a();for(var f=e.iterator();f.hasNext();){d.add((f.next()).parentEdge)}return d};b.prototype.parentEdge=null;b.prototype.from=null;b.prototype.to=null;b.prototype.p0=null;b.prototype.p1=null;b.prototype.sym=null;b.prototype.edgeDirection=null;b.prototype.quadrant=null;b.prototype.angle=null;b.prototype.getEdge=function(){return this.parentEdge};b.prototype.setEdge=function(d){this.parentEdge=d};b.prototype.getQuadrant=function(){return this.quadrant};b.prototype.getDirectionPt=function(){return this.p1};b.prototype.getEdgeDirection=function(){return this.edgeDirection};b.prototype.getFromNode=function(){return this.from};b.prototype.getToNode=function(){return this.to};b.prototype.getCoordinate=function(){return this.from.getCoordinate()};b.prototype.getAngle=function(){return this.angle};b.prototype.getSym=function(){return this.sym};b.prototype.setSym=function(d){this.sym=d};b.prototype.remove=function(){this.sym=null;this.parentEdge=null};b.prototype.isRemoved=function(){return this.parentEdge==null};b.prototype.compareTo=function(d){var e=d;return this.compareDirection(e)};b.prototype.compareDirection=function(d){if(this.quadrant>d.quadrant){return 1}if(this.quadrant<d.quadrant){return -1}return jsts.algorithm.CGAlgorithms.computeOrientation(d.p0,d.p1,this.p1)};jsts.planargraph.DirectedEdge=b})();(function(){var b=jsts.planargraph.DirectedEdge;var a=function(f,e,c,d){b.apply(this,arguments)};a.prototype=new b();a.prototype.edgeRing=null;a.prototype.next=null;a.prototype.label=-1;a.prototype.getLabel=function(){return this.label};a.prototype.setLabel=function(c){this.label=c};a.prototype.getNext=function(){return this.next};a.prototype.setNext=function(c){this.next=c};a.prototype.isInRing=function(){return this.edgeRing!=null};a.prototype.setRing=function(c){this.edgeRing=c};jsts.operation.polygonize.PolygonizeDirectedEdge=a})();(function(){var a=function(){this.nodeMap=new javascript.util.TreeMap()};a.prototype.nodeMap=null;a.prototype.add=function(b){this.nodeMap.put(b.getCoordinate(),b);return b};a.prototype.remove=function(b){return this.nodeMap.remove(b)};a.prototype.find=function(b){return this.nodeMap.get(b)};a.prototype.iterator=function(){return this.nodeMap.values().iterator()};a.prototype.values=function(){return this.nodeMap.values()};jsts.planargraph.NodeMap=a})();(function(){var a=javascript.util.ArrayList;var b=function(){this.edges=new javascript.util.HashSet();this.dirEdges=new javascript.util.HashSet();this.nodeMap=new jsts.planargraph.NodeMap()};b.prototype.edges=null;b.prototype.dirEdges=null;b.prototype.nodeMap=null;b.prototype.findNode=function(c){return this.nodeMap.find(c)};b.prototype.add=function(c){if(c instanceof jsts.planargraph.Edge){return this.add2(c)}else{if(c instanceof jsts.planargraph.DirectedEdge){return this.add3(c)}}this.nodeMap.add(c)};b.prototype.add2=function(c){this.edges.add(c);this.add(c.getDirEdge(0));this.add(c.getDirEdge(1))};b.prototype.add3=function(c){this.dirEdges.add(c)};b.prototype.nodeIterator=function(){return this.nodeMap.iterator()};b.prototype.contains=function(c){if(c instanceof jsts.planargraph.DirectedEdge){return this.contains2(c)}return this.edges.contains(c)};b.prototype.contains2=function(c){return this.dirEdges.contains(c)};b.prototype.getNodes=function(){return this.nodeMap.values()};b.prototype.dirEdgeIterator=function(){return this.dirEdges.iterator()};b.prototype.edgeIterator=function(){return this.edges.iterator()};b.prototype.getEdges=function(){return this.edges};b.prototype.remove=function(c){if(c instanceof jsts.planargraph.DirectedEdge){return this.remove2(c)}this.remove(c.getDirEdge(0));this.remove(c.getDirEdge(1));this.edges.remove(c);this.edge.remove()};b.prototype.remove2=function(d){if(d instanceof jsts.planargraph.Node){return this.remove3(d)}var c=d.getSym();if(c!=null){c.setSym(null)}d.getFromNode().remove(d);d.remove();this.dirEdges.remove(d)};b.prototype.remove3=function(f){var g=f.getOutEdges().getEdges();for(var d=g.iterator();d.hasNext();){var h=d.next();var c=h.getSym();if(c!=null){this.remove(c)}this.dirEdges.remove(h);var e=h.getEdge();if(e!=null){this.edges.remove(e)}}this.nodeMap.remove(f.getCoordinate());f.remove()};b.prototype.findNodesOfDegree=function(f){var e=new a();for(var c=this.nodeIterator();c.hasNext();){var d=c.next();if(d.getDegree()==f){e.add(d)}}return e};jsts.planargraph.PlanarGraph=b})();(function(){var h=javascript.util.ArrayList;var d=javascript.util.Stack;var f=javascript.util.HashSet;var a=jsts.util.Assert;var b=jsts.operation.polygonize.EdgeRing;var c=jsts.operation.polygonize.PolygonizeEdge;var j=jsts.operation.polygonize.PolygonizeDirectedEdge;var k=jsts.planargraph.PlanarGraph;var e=jsts.planargraph.Node;var g=function(l){k.apply(this);this.factory=l};g.prototype=new k();g.getDegreeNonDeleted=function(n){var l=n.getOutEdges().getEdges();var o=0;for(var m=l.iterator();m.hasNext();){var q=m.next();if(!q.isMarked()){o++}}return o};g.getDegree=function(o,m){var l=o.getOutEdges().getEdges();var q=0;for(var n=l.iterator();n.hasNext();){var r=n.next();if(r.getLabel()==m){q++}}return q};g.deleteAllEdges=function(o){var m=o.getOutEdges().getEdges();for(var n=m.iterator();n.hasNext();){var q=n.next();q.setMarked(true);var l=q.getSym();if(l!=null){l.setMarked(true)}}};g.prototype.factory=null;g.prototype.addEdge=function(u){if(u.isEmpty()){return}var l=jsts.geom.CoordinateArrays.removeRepeatedPoints(u.getCoordinates());if(l.length<2){return}var n=l[0];var o=l[l.length-1];var s=this.getNode(n);var t=this.getNode(o);var r=new j(s,t,l[1],true);var q=new j(t,s,l[l.length-2],false);var m=new c(u);m.setDirectedEdges(r,q);this.add(m)};g.prototype.getNode=function(m){var l=this.findNode(m);if(l==null){l=new e(m);this.add(l)}return l};g.prototype.computeNextCWEdges=function(){for(var m=this.nodeIterator();m.hasNext();){var l=m.next();g.computeNextCWEdges(l)}};g.prototype.convertMaximalToMinimalEdgeRings=function(m){for(var o=m.iterator();o.hasNext();){var s=o.next();var n=s.getLabel();var l=g.findIntersectionNodes(s,n);if(l==null){continue}for(var r=l.iterator();r.hasNext();){var q=r.next();g.computeNextCCWEdges(q,n)}}};g.findIntersectionNodes=function(q,m){var o=q;var l=null;do{var n=o.getFromNode();if(g.getDegree(n,m)>1){if(l==null){l=new h()}l.add(n)}o=o.getNext();a.isTrue(o!=null,"found null DE in ring");a.isTrue(o==q||!o.isInRing(),"found DE already in ring")}while(o!=q);return l};g.prototype.getEdgeRings=function(){this.computeNextCWEdges();g.label(this.dirEdges,-1);var n=g.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(n);var m=new h();for(var l=this.dirEdges.iterator();l.hasNext();){var q=l.next();if(q.isMarked()){continue}if(q.isInRing()){continue}var o=this.findEdgeRing(q);m.add(o)}return m};g.findLabeledEdgeRings=function(m){var o=new h();var q=1;for(var n=m.iterator();n.hasNext();){var r=n.next();if(r.isMarked()){continue}if(r.getLabel()>=0){continue}o.add(r);var l=g.findDirEdgesInRing(r);g.label(l,q);q++}return o};g.prototype.deleteCutEdges=function(){this.computeNextCWEdges();g.findLabeledEdgeRings(this.dirEdges);var l=new h();for(var n=this.dirEdges.iterator();n.hasNext();){var q=n.next();if(q.isMarked()){continue}var m=q.getSym();if(q.getLabel()==m.getLabel()){q.setMarked(true);m.setMarked(true);var o=q.getEdge();l.add(o.getLine())}}return l};g.label=function(l,m){for(var n=l.iterator();n.hasNext();){var o=n.next();o.setLabel(m)}};g.computeNextCWEdges=function(q){var o=q.getOutEdges();var s=null;var r=null;for(var m=o.getEdges().iterator();m.hasNext();){var n=m.next();if(n.isMarked()){continue}if(s==null){s=n}if(r!=null){var l=r.getSym();l.setNext(n)}r=n}if(r!=null){var l=r.getSym();l.setNext(s)}};g.computeNextCCWEdges=function(m,t){var s=m.getOutEdges();var w=null;var r=null;var o=s.getEdges();for(var q=o.size()-1;q>=0;q--){var u=o.get(q);var l=u.getSym();var n=null;if(u.getLabel()==t){n=u}var v=null;if(l.getLabel()==t){v=l}if(n==null&&v==null){continue}if(v!=null){r=v}if(n!=null){if(r!=null){r.setNext(n);r=null}if(w==null){w=n}}}if(r!=null){a.isTrue(w!=null);r.setNext(w)}};g.findDirEdgesInRing=function(n){var m=n;var l=new h();do{l.add(m);m=m.getNext();a.isTrue(m!=null,"found null DE in ring");a.isTrue(m==n||!m.isInRing(),"found DE already in ring")}while(m!=n);return l};g.prototype.findEdgeRing=function(n){var m=n;var l=new b(this.factory);do{l.add(m);m.setRing(l);m=m.getNext();a.isTrue(m!=null,"found null DE in ring");a.isTrue(m==n||!m.isInRing(),"found DE already in ring")}while(m!=n);return l};g.prototype.deleteDangles=function(){var v=this.findNodesOfDegree(1);var m=new f();var r=new d();for(var q=v.iterator();q.hasNext();){r.push(q.next())}while(!r.isEmpty()){var o=r.pop();g.deleteAllEdges(o);var l=o.getOutEdges().getEdges();for(var q=l.iterator();q.hasNext();){var u=q.next();u.setMarked(true);var n=u.getSym();if(n!=null){n.setMarked(true)}var t=u.getEdge();m.add(t.getLine());var s=u.getToNode();if(g.getDegreeNonDeleted(s)==1){r.push(s)}}}return m};g.prototype.computeDepthParity=function(){while(true){var l=null;if(l==null){return}this.computeDepthParity(l)}};g.prototype.computeDepthParity=function(l){};jsts.operation.polygonize.PolygonizeGraph=g})();jsts.index.strtree.Interval=function(){var a;if(arguments.length===1){a=arguments[0];return jsts.index.strtree.Interval(a.min,a.max)}else{if(arguments.length===2){jsts.util.Assert.isTrue(this.min<=this.max);this.min=arguments[0];this.max=arguments[1]}}};jsts.index.strtree.Interval.prototype.min=null;jsts.index.strtree.Interval.prototype.max=null;jsts.index.strtree.Interval.prototype.getCentre=function(){return(this.min+this.max)/2};jsts.index.strtree.Interval.prototype.expandToInclude=function(a){this.max=Math.max(this.max,a.max);this.min=Math.min(this.min,a.min);return this};jsts.index.strtree.Interval.prototype.intersects=function(a){return !(a.min>this.max||a.max<this.min)};jsts.index.strtree.Interval.prototype.equals=function(a){if(!(a instanceof jsts.index.strtree.Interval)){return false}other=a;return this.min===other.min&&this.max===other.max};jsts.geom.GeometryFactory=function(a){this.precisionModel=a||new jsts.geom.PrecisionModel()};jsts.geom.GeometryFactory.prototype.precisionModel=null;jsts.geom.GeometryFactory.prototype.getPrecisionModel=function(){return this.precisionModel};jsts.geom.GeometryFactory.prototype.createPoint=function(b){var a=new jsts.geom.Point(b,this);return a};jsts.geom.GeometryFactory.prototype.createLineString=function(b){var a=new jsts.geom.LineString(b,this);return a};jsts.geom.GeometryFactory.prototype.createLinearRing=function(b){var a=new jsts.geom.LinearRing(b,this);return a};jsts.geom.GeometryFactory.prototype.createPolygon=function(c,a){var b=new jsts.geom.Polygon(c,a,this);return b};jsts.geom.GeometryFactory.prototype.createMultiPoint=function(b){if(b&&b[0] instanceof jsts.geom.Coordinate){var c=[];var a;for(a=0;a<b.length;a++){c.push(this.createPoint(b[a]))}b=c}return new jsts.geom.MultiPoint(b,this)};jsts.geom.GeometryFactory.prototype.createMultiLineString=function(a){return new jsts.geom.MultiLineString(a,this)};jsts.geom.GeometryFactory.prototype.createMultiPolygon=function(a){return new jsts.geom.MultiPolygon(a,this)};jsts.geom.GeometryFactory.prototype.buildGeometry=function(h){var a=null;var d=false;var e=false;for(var c=h.iterator();c.hasNext();){var g=c.next();var f=g.CLASS_NAME;if(a===null){a=f}if(!(f===a)){d=true}if(g.isGeometryCollectionBase()){e=true}}if(a===null){return this.createGeometryCollection(null)}if(d||e){return this.createGeometryCollection(h.toArray())}var j=h.get(0);var b=h.size()>1;if(b){if(j instanceof jsts.geom.Polygon){return this.createMultiPolygon(h.toArray())}else{if(j instanceof jsts.geom.LineString){return this.createMultiLineString(h.toArray())}else{if(j instanceof jsts.geom.Point){return this.createMultiPoint(h.toArray())}}}jsts.util.Assert.shouldNeverReachHere("Unhandled class: "+j)}return j};jsts.geom.GeometryFactory.prototype.createGeometryCollection=function(a){return new jsts.geom.GeometryCollection(a,this)};jsts.geom.GeometryFactory.prototype.toGeometry=function(a){if(a.isNull()){return this.createPoint(null)}if(a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()){return this.createPoint(new jsts.geom.Coordinate(a.getMinX(),a.getMinY()))}if(a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()){return this.createLineString([new jsts.geom.Coordinate(a.getMinX(),a.getMinY()),new jsts.geom.Coordinate(a.getMaxX(),a.getMaxY())])}return this.createPolygon(this.createLinearRing([new jsts.geom.Coordinate(a.getMinX(),a.getMinY()),new jsts.geom.Coordinate(a.getMinX(),a.getMaxY()),new jsts.geom.Coordinate(a.getMaxX(),a.getMaxY()),new jsts.geom.Coordinate(a.getMaxX(),a.getMinY()),new jsts.geom.Coordinate(a.getMinX(),a.getMinY())]),null)};jsts.geomgraph.NodeFactory=function(){};jsts.geomgraph.NodeFactory.prototype.createNode=function(a){return new jsts.geomgraph.Node(a,null)};(function(){jsts.geomgraph.Position=function(){};jsts.geomgraph.Position.ON=0;jsts.geomgraph.Position.LEFT=1;jsts.geomgraph.Position.RIGHT=2;jsts.geomgraph.Position.opposite=function(a){if(a===jsts.geomgraph.Position.LEFT){return jsts.geomgraph.Position.RIGHT}if(a===jsts.geomgraph.Position.RIGHT){return jsts.geomgraph.Position.LEFT}return a}})();jsts.geomgraph.TopologyLocation=function(){this.location=[];if(arguments.length===3){var b=arguments[0];var e=arguments[1];var d=arguments[2];this.init(3);this.location[jsts.geomgraph.Position.ON]=b;this.location[jsts.geomgraph.Position.LEFT]=e;this.location[jsts.geomgraph.Position.RIGHT]=d}else{if(arguments[0] instanceof jsts.geomgraph.TopologyLocation){var f=arguments[0];this.init(f.location.length);if(f!=null){for(var c=0;c<this.location.length;c++){this.location[c]=f.location[c]}}}else{if(typeof arguments[0]==="number"){var b=arguments[0];this.init(1);this.location[jsts.geomgraph.Position.ON]=b}else{if(arguments[0] instanceof Array){var a=arguments[0];this.init(a.length)}}}}};jsts.geomgraph.TopologyLocation.prototype.location=null;jsts.geomgraph.TopologyLocation.prototype.init=function(a){this.location[a-1]=null;this.setAllLocations(jsts.geom.Location.NONE)};jsts.geomgraph.TopologyLocation.prototype.get=function(a){if(a<this.location.length){return this.location[a]}return jsts.geom.Location.NONE};jsts.geomgraph.TopologyLocation.prototype.isNull=function(){for(var a=0;a<this.location.length;a++){if(this.location[a]!==jsts.geom.Location.NONE){return false}}return true};jsts.geomgraph.TopologyLocation.prototype.isAnyNull=function(){for(var a=0;a<this.location.length;a++){if(this.location[a]===jsts.geom.Location.NONE){return true}}return false};jsts.geomgraph.TopologyLocation.prototype.isEqualOnSide=function(a,b){return this.location[b]==a.location[b]};jsts.geomgraph.TopologyLocation.prototype.isArea=function(){return this.location.length>1};jsts.geomgraph.TopologyLocation.prototype.isLine=function(){return this.location.length===1};jsts.geomgraph.TopologyLocation.prototype.flip=function(){if(this.location.length<=1){return}var a=this.location[jsts.geomgraph.Position.LEFT];this.location[jsts.geomgraph.Position.LEFT]=this.location[jsts.geomgraph.Position.RIGHT];this.location[jsts.geomgraph.Position.RIGHT]=a};jsts.geomgraph.TopologyLocation.prototype.setAllLocations=function(a){for(var b=0;b<this.location.length;b++){this.location[b]=a}};jsts.geomgraph.TopologyLocation.prototype.setAllLocationsIfNull=function(a){for(var b=0;b<this.location.length;b++){if(this.location[b]===jsts.geom.Location.NONE){this.location[b]=a}}};jsts.geomgraph.TopologyLocation.prototype.setLocation=function(b,a){if(a!==undefined){this.location[b]=a}else{this.setLocation(jsts.geomgraph.Position.ON,b)}};jsts.geomgraph.TopologyLocation.prototype.getLocations=function(){return location};jsts.geomgraph.TopologyLocation.prototype.setLocations=function(a,c,b){this.location[jsts.geomgraph.Position.ON]=a;this.location[jsts.geomgraph.Position.LEFT]=c;this.location[jsts.geomgraph.Position.RIGHT]=b};jsts.geomgraph.TopologyLocation.prototype.allPositionsEqual=function(b){for(var a=0;a<this.location.length;a++){if(this.location[a]!==b){return false}}return true};jsts.geomgraph.TopologyLocation.prototype.merge=function(c){if(c.location.length>this.location.length){var a=[];a[jsts.geomgraph.Position.ON]=this.location[jsts.geomgraph.Position.ON];a[jsts.geomgraph.Position.LEFT]=jsts.geom.Location.NONE;a[jsts.geomgraph.Position.RIGHT]=jsts.geom.Location.NONE;this.location=a}for(var b=0;b<this.location.length;b++){if(this.location[b]===jsts.geom.Location.NONE&&b<c.location.length){this.location[b]=c.location[b]}}};jsts.geomgraph.Label=function(){this.elt=[];var e,a,b,d,c;if(arguments.length===4){e=arguments[0];a=arguments[1];b=arguments[2];c=arguments[3];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE);this.elt[e].setLocations(a,b,c)}else{if(arguments.length===3){a=arguments[0];b=arguments[1];c=arguments[2];this.elt[0]=new jsts.geomgraph.TopologyLocation(a,b,c);this.elt[1]=new jsts.geomgraph.TopologyLocation(a,b,c)}else{if(arguments.length===2){e=arguments[0];a=arguments[1];this.elt[0]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[1]=new jsts.geomgraph.TopologyLocation(jsts.geom.Location.NONE);this.elt[e].setLocation(a)}else{if(arguments[0] instanceof jsts.geomgraph.Label){d=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(d.elt[0]);this.elt[1]=new jsts.geomgraph.TopologyLocation(d.elt[1])}else{if(typeof arguments[0]==="number"){a=arguments[0];this.elt[0]=new jsts.geomgraph.TopologyLocation(a);this.elt[1]=new jsts.geomgraph.TopologyLocation(a)}}}}}};jsts.geomgraph.Label.toLineLabel=function(a){var b,c=new jsts.geomgraph.Label(jsts.geom.Location.NONE);for(b=0;b<2;b++){c.setLocation(b,a.getLocation(b))}return c};jsts.geomgraph.Label.prototype.elt=null;jsts.geomgraph.Label.prototype.flip=function(){this.elt[0].flip();this.elt[1].flip()};jsts.geomgraph.Label.prototype.getLocation=function(b,a){if(arguments.length==1){return this.getLocation2.apply(this,arguments)}return this.elt[b].get(a)};jsts.geomgraph.Label.prototype.getLocation2=function(a){return this.elt[a].get(jsts.geomgraph.Position.ON)};jsts.geomgraph.Label.prototype.setLocation=function(c,b,a){if(arguments.length==2){this.setLocation2.apply(this,arguments);return}this.elt[c].setLocation(b,a)};jsts.geomgraph.Label.prototype.setLocation2=function(b,a){this.elt[b].setLocation(jsts.geomgraph.Position.ON,a)};jsts.geomgraph.Label.prototype.setAllLocations=function(b,a){this.elt[b].setAllLocations(a)};jsts.geomgraph.Label.prototype.setAllLocationsIfNull=function(b,a){if(arguments.length==1){this.setAllLocationsIfNull2.apply(this,arguments);return}this.elt[b].setAllLocationsIfNull(a)};jsts.geomgraph.Label.prototype.setAllLocationsIfNull2=function(a){this.setAllLocationsIfNull(0,a);this.setAllLocationsIfNull(1,a)};jsts.geomgraph.Label.prototype.merge=function(b){var a;for(a=0;a<2;a++){if(this.elt[a]===null&&b.elt[a]!==null){this.elt[a]=new jsts.geomgraph.TopologyLocation(b.elt[a])}else{this.elt[a].merge(b.elt[a])}}};jsts.geomgraph.Label.prototype.getGeometryCount=function(){var a=0;if(!this.elt[0].isNull()){a++}if(!this.elt[1].isNull()){a++}return a};jsts.geomgraph.Label.prototype.isNull=function(a){return this.elt[a].isNull()};jsts.geomgraph.Label.prototype.isAnyNull=function(a){return this.elt[a].isAnyNull()};jsts.geomgraph.Label.prototype.isArea=function(){if(arguments.length==1){return this.isArea2(arguments[0])}return this.elt[0].isArea()||this.elt[1].isArea()};jsts.geomgraph.Label.prototype.isArea2=function(a){return this.elt[a].isArea()};jsts.geomgraph.Label.prototype.isLine=function(a){return this.elt[a].isLine()};jsts.geomgraph.Label.prototype.isEqualOnSide=function(b,a){return this.elt[0].isEqualOnSide(b.elt[0],a)&&this.elt[1].isEqualOnSide(b.elt[1],a)};jsts.geomgraph.Label.prototype.allPositionsEqual=function(a,b){return this.elt[a].allPositionsEqual(b)};jsts.geomgraph.Label.prototype.toLine=function(a){if(this.elt[a].isArea()){this.elt[a]=new jsts.geomgraph.TopologyLocation(this.elt[a].location[0])}};jsts.geomgraph.EdgeRing=function(b,a){this.edges=[];this.pts=[];this.holes=[];this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE);this.geometryFactory=a;if(b){this.computePoints(b);this.computeRing()}};jsts.geomgraph.EdgeRing.prototype.startDe=null;jsts.geomgraph.EdgeRing.prototype.maxNodeDegree=-1;jsts.geomgraph.EdgeRing.prototype.edges=null;jsts.geomgraph.EdgeRing.prototype.pts=null;jsts.geomgraph.EdgeRing.prototype.label=null;jsts.geomgraph.EdgeRing.prototype.ring=null;jsts.geomgraph.EdgeRing.prototype._isHole=null;jsts.geomgraph.EdgeRing.prototype.shell=null;jsts.geomgraph.EdgeRing.prototype.holes=null;jsts.geomgraph.EdgeRing.prototype.geometryFactory=null;jsts.geomgraph.EdgeRing.prototype.isIsolated=function(){return(this.label.getGeometryCount()==1)};jsts.geomgraph.EdgeRing.prototype.isHole=function(){return this._isHole};jsts.geomgraph.EdgeRing.prototype.getCoordinate=function(a){return this.pts[a]};jsts.geomgraph.EdgeRing.prototype.getLinearRing=function(){return this.ring};jsts.geomgraph.EdgeRing.prototype.getLabel=function(){return this.label};jsts.geomgraph.EdgeRing.prototype.isShell=function(){return this.shell===null};jsts.geomgraph.EdgeRing.prototype.getShell=function(){return this.shell};jsts.geomgraph.EdgeRing.prototype.setShell=function(a){this.shell=a;if(a!==null){a.addHole(this)}};jsts.geomgraph.EdgeRing.prototype.addHole=function(a){this.holes.push(a)};jsts.geomgraph.EdgeRing.prototype.toPolygon=function(d){var b=[];for(var a=0;a<this.holes.length;a++){b[a]=this.holes[a].getLinearRing()}var c=this.geometryFactory.createPolygon(this.getLinearRing(),b);return c};jsts.geomgraph.EdgeRing.prototype.computeRing=function(){if(this.ring!==null){return}var b=[];for(var a=0;a<this.pts.length;a++){b[a]=this.pts[a]}this.ring=this.geometryFactory.createLinearRing(b);this._isHole=jsts.algorithm.CGAlgorithms.isCCW(this.ring.getCoordinates())};jsts.geomgraph.EdgeRing.prototype.getNext=function(a){throw new jsts.error.AbstractInvocationError()};jsts.geomgraph.EdgeRing.prototype.setEdgeRing=function(b,a){throw new jsts.error.AbstractInvocationError()};jsts.geomgraph.EdgeRing.prototype.getEdges=function(){return this.edges};jsts.geomgraph.EdgeRing.prototype.computePoints=function(d){this.startDe=d;var c=d;var b=true;do{if(c===null){throw new jsts.error.TopologyError("Found null DirectedEdge")}if(c.getEdgeRing()===this){throw new jsts.error.TopologyError("Directed Edge visited twice during ring-building at "+c.getCoordinate())}this.edges.push(c);var a=c.getLabel();jsts.util.Assert.isTrue(a.isArea());this.mergeLabel(a);this.addPoints(c.getEdge(),c.isForward(),b);b=false;this.setEdgeRing(c,this);c=this.getNext(c)}while(c!==this.startDe)};jsts.geomgraph.EdgeRing.prototype.getMaxNodeDegree=function(){if(this.maxNodeDegree<0){this.computeMaxNodeDegree()}return this.maxNodeDegree};jsts.geomgraph.EdgeRing.prototype.computeMaxNodeDegree=function(){this.maxNodeDegree=0;var c=this.startDe;do{var a=c.getNode();var b=a.getEdges().getOutgoingDegree(this);if(b>this.maxNodeDegree){this.maxNodeDegree=b}c=this.getNext(c)}while(c!==this.startDe);this.maxNodeDegree*=2};jsts.geomgraph.EdgeRing.prototype.setInResult=function(){var a=this.startDe;do{a.getEdge().setInResult(true);a=a.getNext()}while(a!=this.startDe)};jsts.geomgraph.EdgeRing.prototype.mergeLabel=function(a){this.mergeLabel2(a,0);this.mergeLabel2(a,1)};jsts.geomgraph.EdgeRing.prototype.mergeLabel2=function(a,b){var c=a.getLocation(b,jsts.geomgraph.Position.RIGHT);if(c==jsts.geom.Location.NONE){return}if(this.label.getLocation(b)===jsts.geom.Location.NONE){this.label.setLocation(b,c);return}};jsts.geomgraph.EdgeRing.prototype.addPoints=function(c,d,f){var a=c.getCoordinates();if(d){var e=1;if(f){e=0}for(var b=e;b<a.length;b++){this.pts.push(a[b])}}else{var e=a.length-2;if(f){e=a.length-1}for(var b=e;b>=0;b--){this.pts.push(a[b])}}};jsts.geomgraph.EdgeRing.prototype.containsPoint=function(e){var b=this.getLinearRing();var c=b.getEnvelopeInternal();if(!c.contains(e)){return false}if(!jsts.algorithm.CGAlgorithms.isPointInRing(e,b.getCoordinates())){return false}for(var a=0;a<this.holes.length;a++){var d=this.holes[a];if(d.containsPoint(e)){return false}}return true};jsts.geom.Dimension=function(){};jsts.geom.Dimension.P=0;jsts.geom.Dimension.L=1;jsts.geom.Dimension.A=2;jsts.geom.Dimension.FALSE=-1;jsts.geom.Dimension.TRUE=-2;jsts.geom.Dimension.DONTCARE=-3;jsts.geom.Dimension.toDimensionSymbol=function(a){switch(a){case jsts.geom.Dimension.FALSE:return"F";case jsts.geom.Dimension.TRUE:return"T";case jsts.geom.Dimension.DONTCARE:return"*";case jsts.geom.Dimension.P:return"0";case jsts.geom.Dimension.L:return"1";case jsts.geom.Dimension.A:return"2"}throw new jsts.IllegalArgumentError("Unknown dimension value: "+a)};jsts.geom.Dimension.toDimensionValue=function(a){switch(a.toUpperCase()){case"F":return jsts.geom.Dimension.FALSE;case"T":return jsts.geom.Dimension.TRUE;case"*":return jsts.geom.Dimension.DONTCARE;case"0":return jsts.geom.Dimension.P;case"1":return jsts.geom.Dimension.L;case"2":return jsts.geom.Dimension.A}throw new jsts.error.IllegalArgumentError("Unknown dimension symbol: "+a)};(function(){var a=jsts.geom.Dimension;jsts.geom.LineString=function(c,b){this.factory=b;this.points=c||[]};jsts.geom.LineString.prototype=new jsts.geom.Geometry();jsts.geom.LineString.constructor=jsts.geom.LineString;jsts.geom.LineString.prototype.points=null;jsts.geom.LineString.prototype.getCoordinates=function(){return this.points};jsts.geom.LineString.prototype.getCoordinateSequence=function(){return this.points};jsts.geom.LineString.prototype.getCoordinateN=function(b){return this.points[b]};jsts.geom.LineString.prototype.getCoordinate=function(){if(this.isEmpty()){return null}return this.getCoordinateN(0)};jsts.geom.LineString.prototype.getDimension=function(){return 1};jsts.geom.LineString.prototype.getBoundaryDimension=function(){if(this.isClosed()){return a.FALSE}return 0};jsts.geom.LineString.prototype.isEmpty=function(){return this.points.length===0};jsts.geom.LineString.prototype.getNumPoints=function(){return this.points.length};jsts.geom.LineString.prototype.getPointN=function(b){return this.getFactory().createPoint(this.points[b])};jsts.geom.LineString.prototype.getStartPoint=function(){if(this.isEmpty()){return null}return this.getPointN(0)};jsts.geom.LineString.prototype.getEndPoint=function(){if(this.isEmpty()){return null}return this.getPointN(this.getNumPoints()-1)};jsts.geom.LineString.prototype.isClosed=function(){if(this.isEmpty()){return false}return this.getCoordinateN(0).equals2D(this.getCoordinateN(this.points.length-1))};jsts.geom.LineString.prototype.isRing=function(){return this.isClosed()&&this.isSimple()};jsts.geom.LineString.prototype.getGeometryType=function(){return"LineString"};jsts.geom.LineString.prototype.getLength=function(){return jsts.algorithm.CGAlgorithms.computeLength(this.points)};jsts.geom.LineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary()};jsts.geom.LineString.prototype.computeEnvelopeInternal=function(){if(this.isEmpty()){return new jsts.geom.Envelope()}var b=new jsts.geom.Envelope();this.points.forEach(function(c){b.expandToInclude(c)});return b};jsts.geom.LineString.prototype.equalsExact=function(b,c){if(!this.isEquivalentClass(b)){return false}if(this.points.length!==b.points.length){return false}if(this.isEmpty()&&b.isEmpty()){return true}return this.points.reduce(function(f,d,e){return f&&jsts.geom.Geometry.prototype.equal(d,b.points[e],c)})};jsts.geom.LineString.prototype.isEquivalentClass=function(b){return b instanceof jsts.geom.LineString};jsts.geom.LineString.prototype.compareToSameClass=function(h){var b=h;var f=0,c=this.points.length;var d=0,e=b.points.length;while(f<c&&d<e){var g=this.points[f].compareTo(b.points[d]);if(g!==0){return g}f++;d++}if(f<c){return 1}if(d<e){return -1}return 0};jsts.geom.LineString.prototype.apply=function(d){if(d instanceof jsts.geom.GeometryFilter||d instanceof jsts.geom.GeometryComponentFilter){d.filter(this)}else{if(d instanceof jsts.geom.CoordinateFilter){for(var c=0,b=this.points.length;c<b;c++){d.filter(this.points[c])}}else{if(d instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments)}}}};jsts.geom.LineString.prototype.apply2=function(c){if(this.points.length===0){return}for(var b=0;b<this.points.length;b++){c.filter(this.points,b);if(c.isDone()){break}}if(c.isGeometryChanged()){}};jsts.geom.LineString.prototype.clone=function(){var d=[];for(var c=0,b=this.points.length;c<b;c++){d.push(this.points[c].clone())}return this.factory.createLineString(d)};jsts.geom.LineString.prototype.normalize=function(){var g,c,e,f,d,b;b=this.points.length;c=parseInt(b/2);for(g=0;g<c;g++){e=b-1-g;f=this.points[g];d=this.points[e];if(!f.equals(d)){if(f.compareTo(d)>0){this.points.reverse()}return}}};jsts.geom.LineString.prototype.CLASS_NAME="jsts.geom.LineString"})();(function(){jsts.geom.LinearRing=function(b,a){jsts.geom.LineString.apply(this,arguments)};jsts.geom.LinearRing.prototype=new jsts.geom.LineString();jsts.geom.LinearRing.constructor=jsts.geom.LinearRing;jsts.geom.LinearRing.prototype.getBoundaryDimension=function(){return jsts.geom.Dimension.FALSE};jsts.geom.LinearRing.prototype.isSimple=function(){return true};jsts.geom.LinearRing.prototype.getGeometryType=function(){return"LinearRing"};jsts.geom.LinearRing.MINIMUM_VALID_SIZE=4;jsts.geom.LinearRing.prototype.CLASS_NAME="jsts.geom.LinearRing"})();jsts.operation.overlay.OverlayNodeFactory=function(){};jsts.operation.overlay.OverlayNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.overlay.OverlayNodeFactory.constructor=jsts.operation.overlay.OverlayNodeFactory;jsts.operation.overlay.OverlayNodeFactory.prototype.createNode=function(a){return new jsts.geomgraph.Node(a,new jsts.geomgraph.DirectedEdgeStar())};jsts.operation.buffer.SubgraphDepthLocater=function(a){this.subgraphs=[];this.seg=new jsts.geom.LineSegment();this.subgraphs=a};jsts.operation.buffer.SubgraphDepthLocater.prototype.subgraphs=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.seg=null;jsts.operation.buffer.SubgraphDepthLocater.prototype.getDepth=function(b){var c=this.findStabbedSegments(b);if(c.length===0){return 0}c.sort();var a=c[0];return a.leftDepth};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments=function(c){if(arguments.length===3){this.findStabbedSegments2.apply(this,arguments);return}var e=[];for(var a=0;a<this.subgraphs.length;a++){var d=this.subgraphs[a];var b=d.getEnvelope();if(c.y<b.getMinY()||c.y>b.getMaxY()){continue}this.findStabbedSegments2(c,d.getDirectedEdges(),e)}return e};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments2=function(c,a,d){if(arguments[1] instanceof jsts.geomgraph.DirectedEdge){this.findStabbedSegments3(c,a,d);return}for(var b=a.iterator();b.hasNext();){var e=b.next();if(!e.isForward()){continue}this.findStabbedSegments3(c,e,d)}};jsts.operation.buffer.SubgraphDepthLocater.prototype.findStabbedSegments3=function(b,d,h){var g=d.getEdge().getCoordinates();for(var a=0;a<g.length-1;a++){this.seg.p0=g[a];this.seg.p1=g[a+1];if(this.seg.p0.y>this.seg.p1.y){this.seg.reverse()}var f=Math.max(this.seg.p0.x,this.seg.p1.x);if(f<b.x){continue}if(this.seg.isHorizontal()){continue}if(b.y<this.seg.p0.y||b.y>this.seg.p1.y){continue}if(jsts.algorithm.CGAlgorithms.computeOrientation(this.seg.p0,this.seg.p1,b)===jsts.algorithm.CGAlgorithms.RIGHT){continue}var e=d.getDepth(jsts.geomgraph.Position.LEFT);if(!this.seg.p0.equals(g[a])){e=d.getDepth(jsts.geomgraph.Position.RIGHT)}var c=new jsts.operation.buffer.SubgraphDepthLocater.DepthSegment(this.seg,e);h.push(c)}};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment=function(a,b){this.upwardSeg=new jsts.geom.LineSegment(a);this.leftDepth=b};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.upwardSeg=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.leftDepth=null;jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareTo=function(b){var a=b;var c=this.upwardSeg.orientationIndex(a.upwardSeg);if(c===0){c=-1*a.upwardSeg.orientationIndex(upwardSeg)}if(c!==0){return c}return this.compareX(this.upwardSeg,a.upwardSeg)};jsts.operation.buffer.SubgraphDepthLocater.DepthSegment.prototype.compareX=function(b,a){var c=b.p0.compareTo(a.p0);if(c!==0){return c}return b.p1.compareTo(a.p1)};jsts.index.ItemVisitor=function(){};jsts.index.ItemVisitor.prototype.visitItem=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.simplify.LineSegmentIndex=function(){this.index=new jsts.index.quadtree.Quadtree()};jsts.simplify.LineSegmentIndex.prototype.index=null;jsts.simplify.LineSegmentIndex.prototype.add=function(c){if(c instanceof jsts.geom.LineSegment){this.add2(c);return}var b=c.getSegments();for(var d=0;d<b.length;d++){var a=b[d];this.add2(a)}};jsts.simplify.LineSegmentIndex.prototype.add2=function(a){this.index.insert(new jsts.geom.Envelope(a.p0,a.p1),a)};jsts.simplify.LineSegmentIndex.prototype.remove=function(a){this.index.remove(new jsts.geom.Envelope(a.p0,a.p1),a)};jsts.simplify.LineSegmentIndex.prototype.query=function(b){var c=new jsts.geom.Envelope(b.p0,b.p1);var d=new jsts.simplify.LineSegmentIndex.LineSegmentVisitor(b);this.index.query(c,d);var a=d.getItems();return a};jsts.simplify.LineSegmentIndex.LineSegmentVisitor=function(a){this.items=[];this.querySeg=a};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype=new jsts.index.ItemVisitor();jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.querySeg=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.items=null;jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.visitItem=function(b){var a=b;if(jsts.geom.Envelope.intersects(a.p0,a.p1,this.querySeg.p0,this.querySeg.p1)){this.items.push(b)}};jsts.simplify.LineSegmentIndex.LineSegmentVisitor.prototype.getItems=function(){return this.items};jsts.geomgraph.EdgeEndStar=function(){this.edgeMap=new javascript.util.TreeMap();this.edgeList=null;this.ptInAreaLocation=[jsts.geom.Location.NONE,jsts.geom.Location.NONE]};jsts.geomgraph.EdgeEndStar.prototype.edgeMap=null;jsts.geomgraph.EdgeEndStar.prototype.edgeList=null;jsts.geomgraph.EdgeEndStar.prototype.ptInAreaLocation=null;jsts.geomgraph.EdgeEndStar.prototype.insert=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.EdgeEndStar.prototype.insertEdgeEnd=function(b,a){this.edgeMap.put(b,a);this.edgeList=null};jsts.geomgraph.EdgeEndStar.prototype.getCoordinate=function(){var a=this.iterator();if(!a.hasNext()){return null}var b=a.next();return b.getCoordinate()};jsts.geomgraph.EdgeEndStar.prototype.getDegree=function(){return this.edgeMap.size()};jsts.geomgraph.EdgeEndStar.prototype.iterator=function(){return this.getEdges().iterator()};jsts.geomgraph.EdgeEndStar.prototype.getEdges=function(){if(this.edgeList===null){this.edgeList=new javascript.util.ArrayList(this.edgeMap.values())}return this.edgeList};jsts.geomgraph.EdgeEndStar.prototype.getNextCW=function(a){this.getEdges();var c=this.edgeList.indexOf(a);var b=c-1;if(c===0){b=this.edgeList.length-1}return this.edgeList[b]};jsts.geomgraph.EdgeEndStar.prototype.computeLabelling=function(a){this.computeEdgeEndLabels(a[0].getBoundaryNodeRule());this.propagateSideLabels(0);this.propagateSideLabels(1);var j=[false,false];for(var d=this.iterator();d.hasNext();){var g=d.next();var b=g.getLabel();for(var c=0;c<2;c++){if(b.isLine(c)&&b.getLocation(c)===jsts.geom.Location.BOUNDARY){j[c]=true}}}for(var d=this.iterator();d.hasNext();){var g=d.next();var b=g.getLabel();for(var c=0;c<2;c++){if(b.isAnyNull(c)){var h=jsts.geom.Location.NONE;if(j[c]){h=jsts.geom.Location.EXTERIOR}else{var f=g.getCoordinate();h=this.getLocation(c,f,a)}b.setAllLocationsIfNull(c,h)}}}};jsts.geomgraph.EdgeEndStar.prototype.computeEdgeEndLabels=function(b){for(var c=this.iterator();c.hasNext();){var a=c.next();a.computeLabel(b)}};jsts.geomgraph.EdgeEndStar.prototype.getLocation=function(c,b,a){if(this.ptInAreaLocation[c]===jsts.geom.Location.NONE){this.ptInAreaLocation[c]=jsts.algorithm.locate.SimplePointInAreaLocator.locate(b,a[c].getGeometry())}return this.ptInAreaLocation[c]};jsts.geomgraph.EdgeEndStar.prototype.isAreaLabelsConsistent=function(a){this.computeEdgeEndLabels(a.getBoundaryNodeRule());return this.checkAreaLabelsConsistent(0)};jsts.geomgraph.EdgeEndStar.prototype.checkAreaLabelsConsistent=function(c){var f=this.getEdges();if(f.size()<=0){return true}var d=f.size()-1;var a=f.get(d).getLabel();var j=a.getLocation(c,jsts.geomgraph.Position.LEFT);jsts.util.Assert.isTrue(j!=jsts.geom.Location.NONE,"Found unlabelled area edge");var k=j;for(var h=this.iterator();h.hasNext();){var l=h.next();var m=l.getLabel();jsts.util.Assert.isTrue(m.isArea(c),"Found non-area edge");var b=m.getLocation(c,jsts.geomgraph.Position.LEFT);var g=m.getLocation(c,jsts.geomgraph.Position.RIGHT);if(b===g){return false}if(g!==k){return false}k=b}return true};jsts.geomgraph.EdgeEndStar.prototype.propagateSideLabels=function(j){var a=jsts.geom.Location.NONE;for(var f=this.iterator();f.hasNext();){var h=f.next();var c=h.getLabel();if(c.isArea(j)&&c.getLocation(j,jsts.geomgraph.Position.LEFT)!==jsts.geom.Location.NONE){a=c.getLocation(j,jsts.geomgraph.Position.LEFT)}}if(a===jsts.geom.Location.NONE){return}var g=a;for(var f=this.iterator();f.hasNext();){var h=f.next();var c=h.getLabel();if(c.getLocation(j,jsts.geomgraph.Position.ON)===jsts.geom.Location.NONE){c.setLocation(j,jsts.geomgraph.Position.ON,g)}if(c.isArea(j)){var b=c.getLocation(j,jsts.geomgraph.Position.LEFT);var d=c.getLocation(j,jsts.geomgraph.Position.RIGHT);if(d!==jsts.geom.Location.NONE){if(d!==g){throw new jsts.error.TopologyError("side location conflict",h.getCoordinate())}if(b===jsts.geom.Location.NONE){jsts.util.Assert.shouldNeverReachHere("found single null side (at "+h.getCoordinate()+")")}g=b}else{jsts.util.Assert.isTrue(c.getLocation(j,jsts.geomgraph.Position.LEFT)===jsts.geom.Location.NONE,"found single null side");c.setLocation(j,jsts.geomgraph.Position.RIGHT,g);c.setLocation(j,jsts.geomgraph.Position.LEFT,g)}}}};jsts.geomgraph.EdgeEndStar.prototype.findIndex=function(a){this.iterator();for(var b=0;b<this.edgeList.size();b++){var c=this.edgeList.get(b);if(c===a){return b}}return -1};jsts.operation.relate.EdgeEndBundleStar=function(){jsts.geomgraph.EdgeEndStar.apply(this,arguments)};jsts.operation.relate.EdgeEndBundleStar.prototype=new jsts.geomgraph.EdgeEndStar();jsts.operation.relate.EdgeEndBundleStar.prototype.insert=function(b){var a=this.edgeMap.get(b);if(a===null){a=new jsts.operation.relate.EdgeEndBundle(b);this.insertEdgeEnd(b,a)}else{a.insert(b)}};jsts.operation.relate.EdgeEndBundleStar.prototype.updateIM=function(a){for(var c=this.iterator();c.hasNext();){var b=c.next();b.updateIM(a)}};(function(){jsts.geom.Polygon=function(c,a,b){this.shell=c||b.createLinearRing(null);this.holes=a||[];this.factory=b};jsts.geom.Polygon.prototype=new jsts.geom.Geometry();jsts.geom.Polygon.constructor=jsts.geom.Polygon;jsts.geom.Polygon.prototype.getCoordinate=function(){return this.shell.getCoordinate()};jsts.geom.Polygon.prototype.getCoordinates=function(){if(this.isEmpty()){return[]}var f=[];var c=-1;var b=this.shell.getCoordinates();for(var a=0;a<b.length;a++){c++;f[c]=b[a]}for(var e=0;e<this.holes.length;e++){var g=this.holes[e].getCoordinates();for(var d=0;d<g.length;d++){c++;f[c]=g[d]}}return f};jsts.geom.Polygon.prototype.isEmpty=function(){return this.shell.isEmpty()};jsts.geom.Polygon.prototype.getExteriorRing=function(){return this.shell};jsts.geom.Polygon.prototype.getInteriorRingN=function(a){return this.holes[a]};jsts.geom.Polygon.prototype.getNumInteriorRing=function(){return this.holes.length};jsts.geom.Polygon.prototype.getArea=function(){var b=0;b+=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.shell.getCoordinateSequence()));for(var a=0;a<this.holes.length;a++){b-=Math.abs(jsts.algorithm.CGAlgorithms.signedArea(this.holes[a].getCoordinateSequence()))}return b};jsts.geom.Polygon.prototype.getLength=function(){var a=0;a+=this.shell.getLength();for(var b=0;b<this.holes.length;b++){a+=this.holes[b].getLength()}return a};jsts.geom.Polygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null)}var c=[];c[0]=this.shell.clone();for(var b=0,a=this.holes.length;b<a;b++){c[b+1]=this.holes[b].clone()}if(c.length<=1){return c[0]}return this.getFactory().createMultiLineString(c)};jsts.geom.Polygon.prototype.computeEnvelopeInternal=function(){return this.shell.getEnvelopeInternal()};jsts.geom.Polygon.prototype.getDimension=function(){return 2};jsts.geom.Polygon.prototype.getBoundaryDimension=function(){return 1};jsts.geom.Polygon.prototype.equalsExact=function(a,b){if(!this.isEquivalentClass(a)){return false}if(this.isEmpty()&&a.isEmpty()){return true}if(this.isEmpty()!==a.isEmpty()){return false}if(!this.shell.equalsExact(a.shell,b)){return false}if(this.holes.length!==a.holes.length){return false}if(this.holes.length!==a.holes.length){return false}for(var c=0;c<this.holes.length;c++){if(!(this.holes[c]).equalsExact(a.holes[c],b)){return false}}return true};jsts.geom.Polygon.prototype.compareToSameClass=function(a){return this.shell.compareToSameClass(a.shell)};jsts.geom.Polygon.prototype.apply=function(c){if(c instanceof jsts.geom.GeometryComponentFilter){c.filter(this);this.shell.apply(c);for(var b=0,a=this.holes.length;b<a;b++){this.holes[b].apply(c)}}else{if(c instanceof jsts.geom.GeometryFilter){c.filter(this)}else{if(c instanceof jsts.geom.CoordinateFilter){this.shell.apply(c);for(var b=0,a=this.holes.length;b<a;b++){this.holes[b].apply(c)}}else{if(c instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments)}}}}};jsts.geom.Polygon.prototype.apply2=function(b){this.shell.apply(b);if(!b.isDone()){for(var a=0;a<this.holes.length;a++){this.holes[a].apply(b);if(b.isDone()){break}}}if(b.isGeometryChanged()){}};jsts.geom.Polygon.prototype.clone=function(){var b=[];for(var c=0,a=this.holes.length;c<a;c++){b.push(this.holes[c].clone())}return this.factory.createPolygon(this.shell.clone(),b)};jsts.geom.Polygon.prototype.normalize=function(){this.normalize2(this.shell,true);for(var b=0,a=this.holes.length;b<a;b++){this.normalize2(this.holes[b],false)}this.holes.sort()};jsts.geom.Polygon.prototype.normalize2=function(c,b){if(c.isEmpty()){return}var a=c.points.slice(0,c.points.length-1);var d=jsts.geom.CoordinateArrays.minCoordinate(c.points);jsts.geom.CoordinateArrays.scroll(a,d);c.points=a.concat();c.points[a.length]=a[0];if(jsts.algorithm.CGAlgorithms.isCCW(c.points)===b){c.points.reverse()}};jsts.geom.Polygon.prototype.CLASS_NAME="jsts.geom.Polygon"})();jsts.algorithm.distance.DistanceToPoint=function(){};jsts.algorithm.distance.DistanceToPoint.computeDistance=function(b,e,f){if(b instanceof jsts.geom.LineString){jsts.algorithm.distance.DistanceToPoint.computeDistance2(b,e,f)}else{if(b instanceof jsts.geom.Polygon){jsts.algorithm.distance.DistanceToPoint.computeDistance4(b,e,f)}else{if(b instanceof jsts.geom.GeometryCollection){var d=b;for(var a=0;a<d.getNumGeometries();a++){var c=d.getGeometryN(a);jsts.algorithm.distance.DistanceToPoint.computeDistance(c,e,f)}}else{f.setMinimum(b.getCoordinate(),e)}}}};jsts.algorithm.distance.DistanceToPoint.computeDistance2=function(a,e,g){var c=new jsts.geom.LineSegment();var d=a.getCoordinates();for(var b=0;b<d.length-1;b++){c.setCoordinates(d[b],d[b+1]);var f=c.closestPoint(e);g.setMinimum(f,e)}};jsts.algorithm.distance.DistanceToPoint.computeDistance3=function(a,b,d){var c=a.closestPoint(b);d.setMinimum(c,b)};jsts.algorithm.distance.DistanceToPoint.computeDistance4=function(b,c,d){jsts.algorithm.distance.DistanceToPoint.computeDistance2(b.getExteriorRing(),c,d);for(var a=0;a<b.getNumInteriorRing();a++){jsts.algorithm.distance.DistanceToPoint.computeDistance2(b.getInteriorRingN(a),c,d)}};jsts.index.strtree.Boundable=function(){};jsts.index.strtree.Boundable.prototype.getBounds=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.ItemBoundable=function(b,a){this.bounds=b;this.item=a};jsts.index.strtree.ItemBoundable.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.ItemBoundable.constructor=jsts.index.strtree.ItemBoundable;jsts.index.strtree.ItemBoundable.prototype.bounds=null;jsts.index.strtree.ItemBoundable.prototype.item=null;jsts.index.strtree.ItemBoundable.prototype.getBounds=function(){return this.bounds};jsts.index.strtree.ItemBoundable.prototype.getItem=function(){return this.item};jsts.noding.SegmentPointComparator=function(){};jsts.noding.SegmentPointComparator.compare=function(b,e,d){if(e.equals2D(d)){return 0}var a=jsts.noding.SegmentPointComparator.relativeSign(e.x,d.x);var c=jsts.noding.SegmentPointComparator.relativeSign(e.y,d.y);switch(b){case 0:return jsts.noding.SegmentPointComparator.compareValue(a,c);case 1:return jsts.noding.SegmentPointComparator.compareValue(c,a);case 2:return jsts.noding.SegmentPointComparator.compareValue(c,-a);case 3:return jsts.noding.SegmentPointComparator.compareValue(-a,c);case 4:return jsts.noding.SegmentPointComparator.compareValue(-a,-c);case 5:return jsts.noding.SegmentPointComparator.compareValue(-c,-a);case 6:return jsts.noding.SegmentPointComparator.compareValue(-c,a);case 7:return jsts.noding.SegmentPointComparator.compareValue(a,-c)}return 0};jsts.noding.SegmentPointComparator.relativeSign=function(b,a){if(b<a){return -1}if(b>a){return 1}return 0};jsts.noding.SegmentPointComparator.compareValue=function(b,a){if(b<0){return -1}if(b>0){return 1}if(a<0){return -1}if(a>0){return 1}return 0};jsts.operation.IsSimpleOp=function(a){this.geom=a};jsts.operation.IsSimpleOp.prototype.geom=null;jsts.operation.IsSimpleOp.prototype.isClosedEndpointsInInterior=true;jsts.operation.IsSimpleOp.prototype.nonSimpleLocation=null;jsts.operation.IsSimpleOp.prototype.IsSimpleOp=function(a){this.geom=a};jsts.operation.IsSimpleOp.prototype.isSimple=function(){this.nonSimpleLocation=null;if(this.geom instanceof jsts.geom.LineString){return this.isSimpleLinearGeometry(this.geom)}if(this.geom instanceof jsts.geom.MultiLineString){return this.isSimpleLinearGeometry(this.geom)}if(this.geom instanceof jsts.geom.MultiPoint){return this.isSimpleMultiPoint(this.geom)}return true};jsts.operation.IsSimpleOp.prototype.isSimpleMultiPoint=function(e){if(e.isEmpty()){return true}var d=[];for(var c=0;c<e.getNumGeometries();c++){var g=e.getGeometryN(c);var f=g.getCoordinate();for(var b=0;b<d.length;b++){var a=d[b];if(f.equals2D(a)){this.nonSimpleLocation=f;return false}}d.push(f)}return true};jsts.operation.IsSimpleOp.prototype.isSimpleLinearGeometry=function(c){if(c.isEmpty()){return true}var d=new jsts.geomgraph.GeometryGraph(0,c);var a=new jsts.algorithm.RobustLineIntersector();var b=d.computeSelfNodes(a,true);if(!b.hasIntersection()){return true}if(b.hasProperIntersection()){this.nonSimpleLocation=b.getProperIntersectionPoint();return false}if(this.hasNonEndpointIntersection(d)){return false}if(this.isClosedEndpointsInInterior){if(this.hasClosedEndpointIntersection(d)){return false}}return true};jsts.operation.IsSimpleOp.prototype.hasNonEndpointIntersection=function(c){for(var b=c.getEdgeIterator();b.hasNext();){var f=b.next();var a=f.getMaximumSegmentIndex();for(var g=f.getEdgeIntersectionList().iterator();g.hasNext();){var d=g.next();if(!d.isEndPoint(a)){this.nonSimpleLocation=d.getCoordinate();return true}}}return false};jsts.operation.IsSimpleOp.prototype.hasClosedEndpointIntersection=function(h){var a=new javascript.util.TreeMap();for(var d=h.getEdgeIterator();d.hasNext();){var f=d.next();var k=f.getMaximumSegmentIndex();var b=f.isClosed();var j=f.getCoordinate(0);this.addEndpoint(a,j,b);var g=f.getCoordinate(f.getNumPoints()-1);this.addEndpoint(a,g,b)}for(var d=a.values().iterator();d.hasNext();){var c=d.next();if(c.isClosed&&c.degree!=2){this.nonSimpleLocation=c.getCoordinate();return true}}return false};jsts.operation.IsSimpleOp.EndpointInfo=function(a){this.pt=a;this.isClosed=false;this.degree=0};jsts.operation.IsSimpleOp.EndpointInfo.prototype.pt=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.isClosed=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.degree=null;jsts.operation.IsSimpleOp.EndpointInfo.prototype.getCoordinate=function(){return this.pt};jsts.operation.IsSimpleOp.EndpointInfo.prototype.addEndpoint=function(a){this.degree++;this.isClosed=this.isClosed||a};jsts.operation.IsSimpleOp.prototype.addEndpoint=function(d,b,c){var a=d.get(b);if(a===null){a=new jsts.operation.IsSimpleOp.EndpointInfo(b);d.put(b,a)}a.addEndpoint(c)};(function(){var a=function(){this.snapTolerance=0;this.seg=new jsts.geom.LineSegment();this.allowSnappingToSourceVertices=false;this.isClosed=false;this.srcPts=[];if(arguments[0] instanceof jsts.geom.LineString){this.initFromLine.apply(this,arguments)}else{this.initFromPoints.apply(this,arguments)}};a.prototype.initFromLine=function(c,b){this.initFromPoints(c.getCoordinates(),b)};a.prototype.initFromPoints=function(c,b){this.srcPts=c;this.isClosed=this.calcIsClosed(c);this.snapTolerance=b};a.prototype.setAllowSnappingToSourceVertices=function(b){this.allowSnappingToSourceVertices=b};a.prototype.calcIsClosed=function(b){if(b.length<=1){return false}return b[0].equals(b[b.length-1])};a.prototype.snapTo=function(c){var b=new jsts.geom.CoordinateList(this.srcPts);this.snapVertices(b,c);this.snapSegments(b,c);return b};a.prototype.snapVertices=function(g,e){var b=this.isClosed?g.length-1:g.length,c=0,d,f;for(c;c<b;c++){d=g[c];f=this.findSnapForVertex(d,e);if(f!==null){g[c]=new jsts.geom.Coordinate(f);if(c===0&&this.isClosed){g[g.length-1]=new jsts.geom.Coordinate(f)}}}};a.prototype.findSnapForVertex=function(e,d){var c=0,b=d.length;for(c=0;c<b;c++){if(e.equals(d[c])){return null}if(e.distance(d[c])<this.snapTolerance){return d[c]}}return null};a.prototype.snapSegments=function(g,e){if(e.length==0){return}var f=e.length,c,d,b;if(e.length>1&&e[0].equals(e[e.length-1])){f=e.length-1}c=0;for(c;c<f;c++){d=e[c];b=this.findSegmentIndexToSnap(d,g);if(b>=0){g.insertCoordinate(b+1,new jsts.geom.Coordinate(d),false)}}};a.prototype.findSegmentIndexToSnap=function(d,f){var b=Number.MAX_VALUE,g=-1,c=0,e;for(c;c<f.length-1;c++){this.seg.p0=f[c];this.seg.p1=f[c+1];if(this.seg.p0.equals(d)||this.seg.p1.equals(d)){if(this.allowSnappingToSourceVertices){continue}else{return -1}}e=this.seg.distance(d);if(e<this.snapTolerance&&e<b){b=e;g=c}}return g};jsts.operation.overlay.snap.LineStringSnapper=a})();jsts.operation.buffer.BufferOp=function(a,b){this.argGeom=a;this.bufParams=b?b:new jsts.operation.buffer.BufferParameters()};jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS=12;jsts.operation.buffer.BufferOp.precisionScaleFactor=function(c,a,l){var d=c.getEnvelopeInternal();var e=Math.max(d.getHeight(),d.getWidth());var j=a>0?a:0;var k=e+2*j;var f=(Math.log(k)/Math.log(10)+1);var b=f-l;var h=Math.pow(10,-b);return h};jsts.operation.buffer.BufferOp.bufferOp=function(b,d){if(arguments.length>2){return jsts.operation.buffer.BufferOp.bufferOp2.apply(this,arguments)}var c=new jsts.operation.buffer.BufferOp(b);var a=c.getResultGeometry(d);return a};jsts.operation.buffer.BufferOp.bufferOp2=function(c,e,d){if(arguments.length>3){return jsts.operation.buffer.BufferOp.bufferOp3.apply(this,arguments)}var b=new jsts.operation.buffer.BufferOp(c,d);var a=b.getResultGeometry(e);return a};jsts.operation.buffer.BufferOp.bufferOp3=function(d,e,a){if(arguments.length>4){return jsts.operation.buffer.BufferOp.bufferOp4.apply(this,arguments)}var c=new jsts.operation.buffer.BufferOp(d);c.setQuadrantSegments(a);var b=c.getResultGeometry(e);return b};jsts.operation.buffer.BufferOp.bufferOp4=function(e,f,a,c){var d=new jsts.operation.buffer.BufferOp(e);d.setQuadrantSegments(a);d.setEndCapStyle(c);var b=d.getResultGeometry(f);return b};jsts.operation.buffer.BufferOp.prototype.argGeom=null;jsts.operation.buffer.BufferOp.prototype.distance=null;jsts.operation.buffer.BufferOp.prototype.bufParams=null;jsts.operation.buffer.BufferOp.prototype.resultGeometry=null;jsts.operation.buffer.BufferOp.prototype.setEndCapStyle=function(a){this.bufParams.setEndCapStyle(a)};jsts.operation.buffer.BufferOp.prototype.setQuadrantSegments=function(a){this.bufParams.setQuadrantSegments(a)};jsts.operation.buffer.BufferOp.prototype.getResultGeometry=function(a){this.distance=a;this.computeGeometry();return this.resultGeometry};jsts.operation.buffer.BufferOp.prototype.computeGeometry=function(){this.bufferOriginalPrecision();if(this.resultGeometry!==null){return}var a=this.argGeom.getPrecisionModel();if(a.getType()===jsts.geom.PrecisionModel.FIXED){this.bufferFixedPrecision(a)}else{this.bufferReducedPrecision()}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision=function(){var c;var a=null;for(c=jsts.operation.buffer.BufferOp.MAX_PRECISION_DIGITS;c>=0;c--){try{this.bufferReducedPrecision2(c)}catch(b){a=b}if(this.resultGeometry!==null){return}}throw a};jsts.operation.buffer.BufferOp.prototype.bufferOriginalPrecision=function(){try{var a=new jsts.operation.buffer.BufferBuilder(this.bufParams);this.resultGeometry=a.buffer(this.argGeom,this.distance)}catch(b){}};jsts.operation.buffer.BufferOp.prototype.bufferReducedPrecision2=function(a){var b=jsts.operation.buffer.BufferOp.precisionScaleFactor(this.argGeom,this.distance,a);var c=new jsts.geom.PrecisionModel(b);this.bufferFixedPrecision(c)};jsts.operation.buffer.BufferOp.prototype.bufferFixedPrecision=function(c){var a=new jsts.noding.ScaledNoder(new jsts.noding.snapround.MCIndexSnapRounder(new jsts.geom.PrecisionModel(1)),c.getScale());var b=new jsts.operation.buffer.BufferBuilder(this.bufParams);b.setWorkingPrecisionModel(c);b.setNoder(a);this.resultGeometry=b.buffer(this.argGeom,this.distance)};jsts.geomgraph.index.EdgeSetIntersector=function(){};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections=function(a,b,c){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.index.EdgeSetIntersector.prototype.computeIntersections2=function(b,a,c){throw new jsts.error.AbstractMethodInvocationError()};jsts.geomgraph.index.SimpleMCSweepLineIntersector=function(){throw new jsts.error.NotImplementedError()};jsts.geomgraph.index.SimpleMCSweepLineIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.algorithm.locate.SimplePointInAreaLocator=function(a){this.geom=a};jsts.algorithm.locate.SimplePointInAreaLocator.locate=function(b,a){if(a.isEmpty()){return jsts.geom.Location.EXTERIOR}if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(b,a)){return jsts.geom.Location.INTERIOR}return jsts.geom.Location.EXTERIOR};jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint=function(d,c){if(c instanceof jsts.geom.Polygon){return jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon(d,c)}else{if(c instanceof jsts.geom.GeometryCollection||c instanceof jsts.geom.MultiPoint||c instanceof jsts.geom.MultiLineString||c instanceof jsts.geom.MultiPolygon){for(var b=0;b<c.geometries.length;b++){var a=c.geometries[b];if(a!==c){if(jsts.algorithm.locate.SimplePointInAreaLocator.containsPoint(d,a)){return true}}}}}return false};jsts.algorithm.locate.SimplePointInAreaLocator.containsPointInPolygon=function(e,d){if(d.isEmpty()){return false}var b=d.getExteriorRing();if(!jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,b)){return false}for(var a=0;a<d.getNumInteriorRing();a++){var c=d.getInteriorRingN(a);if(jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing(e,c)){return false}}return true};jsts.algorithm.locate.SimplePointInAreaLocator.isPointInRing=function(b,a){if(!a.getEnvelopeInternal().intersects(b)){return false}return jsts.algorithm.CGAlgorithms.isPointInRing(b,a.getCoordinates())};jsts.algorithm.locate.SimplePointInAreaLocator.prototype.geom=null;jsts.algorithm.locate.SimplePointInAreaLocator.prototype.locate=function(a){return jsts.algorithm.locate.SimplePointInAreaLocator.locate(a,geom)};(function(){var b=jsts.geom.Location;var a=jsts.geomgraph.Position;var c=jsts.geomgraph.EdgeEndStar;var d=jsts.util.Assert;jsts.geomgraph.DirectedEdgeStar=function(){jsts.geomgraph.EdgeEndStar.call(this)};jsts.geomgraph.DirectedEdgeStar.prototype=new c();jsts.geomgraph.DirectedEdgeStar.constructor=jsts.geomgraph.DirectedEdgeStar;jsts.geomgraph.DirectedEdgeStar.prototype.resultAreaEdgeList=null;jsts.geomgraph.DirectedEdgeStar.prototype.label=null;jsts.geomgraph.DirectedEdgeStar.prototype.insert=function(e){var f=e;this.insertEdgeEnd(f,f)};jsts.geomgraph.DirectedEdgeStar.prototype.getLabel=function(){return this.label};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(){var f=0;for(var e=this.iterator();e.hasNext();){var g=e.next();if(g.isInResult()){f++}}return f};jsts.geomgraph.DirectedEdgeStar.prototype.getOutgoingDegree=function(h){var f=0;for(var e=this.iterator();e.hasNext();){var g=e.next();if(g.getEdgeRing()===h){f++}}return f};jsts.geomgraph.DirectedEdgeStar.prototype.getRightmostEdge=function(){var g=this.getEdges();var h=g.size();if(h<1){return null}var k=g.get(0);if(h==1){return k}var j=g.get(h-1);var f=k.getQuadrant();var e=j.getQuadrant();if(jsts.geomgraph.Quadrant.isNorthern(f)&&jsts.geomgraph.Quadrant.isNorthern(e)){return k}else{if(!jsts.geomgraph.Quadrant.isNorthern(f)&&!jsts.geomgraph.Quadrant.isNorthern(e)){return j}else{var l=null;if(k.getDy()!=0){return k}else{if(j.getDy()!=0){return j}}}}d.shouldNeverReachHere("found two horizontal edges incident on node");return null};jsts.geomgraph.DirectedEdgeStar.prototype.computeLabelling=function(h){c.prototype.computeLabelling.call(this,h);this.label=new jsts.geomgraph.Label(b.NONE);for(var j=this.iterator();j.hasNext();){var f=j.next();var k=f.getEdge();var l=k.getLabel();for(var g=0;g<2;g++){var m=l.getLocation(g);if(m===b.INTERIOR||m===b.BOUNDARY){this.label.setLocation(g,b.INTERIOR)}}}};jsts.geomgraph.DirectedEdgeStar.prototype.mergeSymLabels=function(){for(var f=this.iterator();f.hasNext();){var g=f.next();var e=g.getLabel();e.merge(g.getSym().getLabel())}};jsts.geomgraph.DirectedEdgeStar.prototype.updateLabelling=function(h){for(var f=this.iterator();f.hasNext();){var g=f.next();var e=g.getLabel();e.setAllLocationsIfNull(0,h.getLocation(0));e.setAllLocationsIfNull(1,h.getLocation(1))}};jsts.geomgraph.DirectedEdgeStar.prototype.getResultAreaEdges=function(){if(this.resultAreaEdgeList!==null){return this.resultAreaEdgeList}this.resultAreaEdgeList=new javascript.util.ArrayList();for(var e=this.iterator();e.hasNext();){var f=e.next();if(f.isInResult()||f.getSym().isInResult()){this.resultAreaEdgeList.add(f)}}return this.resultAreaEdgeList};jsts.geomgraph.DirectedEdgeStar.prototype.SCANNING_FOR_INCOMING=1;jsts.geomgraph.DirectedEdgeStar.prototype.LINKING_TO_OUTGOING=2;jsts.geomgraph.DirectedEdgeStar.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();var f=null;var e=null;var j=this.SCANNING_FOR_INCOMING;for(var g=0;g<this.resultAreaEdgeList.size();g++){var k=this.resultAreaEdgeList.get(g);var h=k.getSym();if(!k.getLabel().isArea()){continue}if(f===null&&k.isInResult()){f=k}switch(j){case this.SCANNING_FOR_INCOMING:if(!h.isInResult()){continue}e=h;j=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!k.isInResult()){continue}e.setNext(k);j=this.SCANNING_FOR_INCOMING;break}}if(j===this.LINKING_TO_OUTGOING){if(f===null){throw new jsts.error.TopologyError("no outgoing dirEdge found",this.getCoordinate())}d.isTrue(f.isInResult(),"unable to link last incoming dirEdge");e.setNext(f)}};jsts.geomgraph.DirectedEdgeStar.prototype.linkMinimalDirectedEdges=function(l){var f=null;var e=null;var j=this.SCANNING_FOR_INCOMING;for(var g=this.resultAreaEdgeList.size()-1;g>=0;g--){var k=this.resultAreaEdgeList.get(g);var h=k.getSym();if(f===null&&k.getEdgeRing()===l){f=k}switch(j){case this.SCANNING_FOR_INCOMING:if(h.getEdgeRing()!=l){continue}e=h;j=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(k.getEdgeRing()!==l){continue}e.setNextMin(k);j=this.SCANNING_FOR_INCOMING;break}}if(j===this.LINKING_TO_OUTGOING){d.isTrue(f!==null,"found null for first outgoing dirEdge");d.isTrue(f.getEdgeRing()===l,"unable to link last incoming dirEdge");e.setNextMin(f)}};jsts.geomgraph.DirectedEdgeStar.prototype.linkAllDirectedEdges=function(){this.getEdges();var f=null;var h=null;for(var e=this.edgeList.size()-1;e>=0;e--){var j=this.edgeList.get(e);var g=j.getSym();if(h===null){h=g}if(f!==null){g.setNext(f)}f=j}h.setNext(f)};jsts.geomgraph.DirectedEdgeStar.prototype.findCoveredLineEdges=function(){var e=b.NONE;for(var f=this.iterator();f.hasNext();){var j=f.next();var h=j.getSym();if(!j.isLineEdge()){if(j.isInResult()){e=b.INTERIOR;break}if(h.isInResult()){e=b.EXTERIOR;break}}}if(e===b.NONE){return}var g=e;for(var f=this.iterator();f.hasNext();){var j=f.next();var h=j.getSym();if(j.isLineEdge()){j.getEdge().setCovered(g===b.INTERIOR)}else{if(j.isInResult()){g=b.EXTERIOR}if(h.isInResult()){g=b.INTERIOR}}}};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths=function(l){if(arguments.length===2){this.computeDepths2.apply(this,arguments);return}var j=this.findIndex(l);var e=l.getLabel();var f=l.getDepth(a.LEFT);var k=l.getDepth(a.RIGHT);var h=this.computeDepths2(j+1,this.edgeList.size(),f);var g=this.computeDepths2(0,j,h);if(g!=k){throw new jsts.error.TopologyError("depth mismatch at "+l.getCoordinate())}};jsts.geomgraph.DirectedEdgeStar.prototype.computeDepths2=function(l,k,h){var g=h;for(var f=l;f<k;f++){var j=this.edgeList.get(f);var e=j.getLabel();j.setEdgeDepths(a.RIGHT,g);g=j.getDepth(a.LEFT)}return g}})();jsts.algorithm.CentroidLine=function(){this.centSum=new jsts.geom.Coordinate()};jsts.algorithm.CentroidLine.prototype.centSum=null;jsts.algorithm.CentroidLine.prototype.totalLength=0;jsts.algorithm.CentroidLine.prototype.add=function(b){if(b instanceof Array){this.add2.apply(this,arguments);return}if(b instanceof jsts.geom.LineString){this.add(b.getCoordinates())}else{if(b instanceof jsts.geom.Polygon){var d=b;this.add(d.getExteriorRing().getCoordinates());for(var a=0;a<d.getNumInteriorRing();a++){this.add(d.getInteriorRingN(a).getCoordinates())}}else{if(b instanceof jsts.geom.GeometryCollection||b instanceof jsts.geom.MultiPoint||b instanceof jsts.geom.MultiLineString||b instanceof jsts.geom.MultiPolygon){var c=b;for(var a=0;a<c.getNumGeometries();a++){this.add(c.getGeometryN(a))}}}}};jsts.algorithm.CentroidLine.prototype.getCentroid=function(){var a=new jsts.geom.Coordinate();a.x=this.centSum.x/this.totalLength;a.y=this.centSum.y/this.totalLength;return a};jsts.algorithm.CentroidLine.prototype.add2=function(e){for(var c=0;c<e.length-1;c++){var d=e[c].distance(e[c+1]);this.totalLength+=d;var b=(e[c].x+e[c+1].x)/2;this.centSum.x+=d*b;var a=(e[c].y+e[c+1].y)/2;this.centSum.y+=d*a}};jsts.algorithm.PointLocator=function(a){this.boundaryRule=a?a:jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE};jsts.algorithm.PointLocator.prototype.boundaryRule=null;jsts.algorithm.PointLocator.prototype.isIn=null;jsts.algorithm.PointLocator.prototype.numBoundaries=null;jsts.algorithm.PointLocator.prototype.intersects=function(b,a){return this.locate(b,a)!==jsts.geom.Location.EXTERIOR};jsts.algorithm.PointLocator.prototype.locate=function(b,a){if(a.isEmpty()){return jsts.geom.Location.EXTERIOR}if(a instanceof jsts.geom.Point){return this.locate2(b,a)}else{if(a instanceof jsts.geom.LineString){return this.locate3(b,a)}else{if(a instanceof jsts.geom.Polygon){return this.locate4(b,a)}}}this.isIn=false;this.numBoundaries=0;this.computeLocation(b,a);if(this.boundaryRule.isInBoundary(this.numBoundaries)){return jsts.geom.Location.BOUNDARY}if(this.numBoundaries>0||this.isIn){return jsts.geom.Location.INTERIOR}return jsts.geom.Location.EXTERIOR};jsts.algorithm.PointLocator.prototype.computeLocation=function(g,e){if(e instanceof jsts.geom.Point||e instanceof jsts.geom.LineString||e instanceof jsts.geom.Polygon){this.updateLocationInfo(this.locate(g,e))}else{if(e instanceof jsts.geom.MultiLineString){var h=e;for(var d=0;d<h.getNumGeometries();d++){var b=h.getGeometryN(d);this.updateLocationInfo(this.locate(g,b))}}else{if(e instanceof jsts.geom.MultiPolygon){var a=e;for(var d=0;d<a.getNumGeometries();d++){var f=a.getGeometryN(d);this.updateLocationInfo(this.locate(g,f))}}else{if(e instanceof jsts.geom.MultiPoint||e instanceof jsts.geom.GeometryCollection){for(var d=0;d<e.getNumGeometries();d++){var c=e.getGeometryN(d);if(c!==e){this.computeLocation(g,c)}}}}}}};jsts.algorithm.PointLocator.prototype.updateLocationInfo=function(a){if(a===jsts.geom.Location.INTERIOR){this.isIn=true}if(a===jsts.geom.Location.BOUNDARY){this.numBoundaries++}};jsts.algorithm.PointLocator.prototype.locate2=function(b,a){var c=a.getCoordinate();if(c.equals2D(b)){return jsts.geom.Location.INTERIOR}return jsts.geom.Location.EXTERIOR};jsts.algorithm.PointLocator.prototype.locate3=function(c,a){if(!a.getEnvelopeInternal().intersects(c)){return jsts.geom.Location.EXTERIOR}var b=a.getCoordinates();if(!a.isClosed()){if(c.equals(b[0])||c.equals(b[b.length-1])){return jsts.geom.Location.BOUNDARY}}if(jsts.algorithm.CGAlgorithms.isOnLine(c,b)){return jsts.geom.Location.INTERIOR}return jsts.geom.Location.EXTERIOR};jsts.algorithm.PointLocator.prototype.locateInPolygonRing=function(b,a){if(!a.getEnvelopeInternal().intersects(b)){return jsts.geom.Location.EXTERIOR}return jsts.algorithm.CGAlgorithms.locatePointInRing(b,a.getCoordinates())};jsts.algorithm.PointLocator.prototype.locate4=function(g,f){if(f.isEmpty()){return jsts.geom.Location.EXTERIOR}var b=f.getExteriorRing();var e=this.locateInPolygonRing(g,b);if(e===jsts.geom.Location.EXTERIOR){return jsts.geom.Location.EXTERIOR}if(e===jsts.geom.Location.BOUNDARY){return jsts.geom.Location.BOUNDARY}for(var a=0;a<f.getNumInteriorRing();a++){var d=f.getInteriorRingN(a);var c=this.locateInPolygonRing(g,d);if(c===jsts.geom.Location.INTERIOR){return jsts.geom.Location.EXTERIOR}if(c===jsts.geom.Location.BOUNDARY){return jsts.geom.Location.BOUNDARY}}return jsts.geom.Location.INTERIOR};(function(){var a=javascript.util.ArrayList;var b=javascript.util.TreeMap;jsts.geomgraph.EdgeList=function(){this.edges=new a();this.ocaMap=new b()};jsts.geomgraph.EdgeList.prototype.edges=null;jsts.geomgraph.EdgeList.prototype.ocaMap=null;jsts.geomgraph.EdgeList.prototype.add=function(d){this.edges.add(d);var c=new jsts.noding.OrientedCoordinateArray(d.getCoordinates());this.ocaMap.put(c,d)};jsts.geomgraph.EdgeList.prototype.addAll=function(c){for(var d=c.iterator();d.hasNext();){this.add(d.next())}};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges};jsts.geomgraph.EdgeList.prototype.findEqualEdge=function(d){var c=new jsts.noding.OrientedCoordinateArray(d.getCoordinates());var f=this.ocaMap.get(c);return f};jsts.geomgraph.EdgeList.prototype.getEdges=function(){return this.edges};jsts.geomgraph.EdgeList.prototype.iterator=function(){return this.edges.iterator()};jsts.geomgraph.EdgeList.prototype.get=function(c){return this.edges.get(c)};jsts.geomgraph.EdgeList.prototype.findEdgeIndex=function(d){for(var c=0;c<this.edges.size();c++){if(this.edges.get(c).equals(d)){return c}}return -1}})();(function(){var b=jsts.geom.Location;var a=javascript.util.ArrayList;var c=javascript.util.TreeMap;jsts.geomgraph.NodeMap=function(d){this.nodeMap=new c();this.nodeFact=d};jsts.geomgraph.NodeMap.prototype.nodeMap=null;jsts.geomgraph.NodeMap.prototype.nodeFact=null;jsts.geomgraph.NodeMap.prototype.addNode=function(d){var e,g;if(d instanceof jsts.geom.Coordinate){g=d;e=this.nodeMap.get(g);if(e===null){e=this.nodeFact.createNode(g);this.nodeMap.put(g,e)}return e}else{if(d instanceof jsts.geomgraph.Node){var f=d;g=f.getCoordinate();e=this.nodeMap.get(g);if(e===null){this.nodeMap.put(g,f);return f}e.mergeLabel(f);return e}}};jsts.geomgraph.NodeMap.prototype.add=function(f){var d=f.getCoordinate();var g=this.addNode(d);g.add(f)};jsts.geomgraph.NodeMap.prototype.find=function(d){return this.nodeMap.get(d)};jsts.geomgraph.NodeMap.prototype.values=function(){return this.nodeMap.values()};jsts.geomgraph.NodeMap.prototype.iterator=function(){return this.values().iterator()};jsts.geomgraph.NodeMap.prototype.getBoundaryNodes=function(g){var d=new a();for(var e=this.iterator();e.hasNext();){var f=e.next();if(f.getLabel().getLocation(g)===b.BOUNDARY){d.add(f)}}return d}})();(function(){var a=javascript.util.ArrayList;jsts.geomgraph.PlanarGraph=function(b){this.edges=new a();this.edgeEndList=new a();this.nodes=new jsts.geomgraph.NodeMap(b||new jsts.geomgraph.NodeFactory())};jsts.geomgraph.PlanarGraph.prototype.edges=null;jsts.geomgraph.PlanarGraph.prototype.nodes=null;jsts.geomgraph.PlanarGraph.prototype.edgeEndList=null;jsts.geomgraph.PlanarGraph.linkResultDirectedEdges=function(c){for(var b=c.iterator();b.hasNext();){var d=b.next();d.getEdges().linkResultDirectedEdges()}};jsts.geomgraph.PlanarGraph.prototype.getEdgeIterator=function(){return this.edges.iterator()};jsts.geomgraph.PlanarGraph.prototype.getEdgeEnds=function(){return this.edgeEndList};jsts.geomgraph.PlanarGraph.prototype.isBoundaryNode=function(d,e){var c=this.nodes.find(e);if(c===null){return false}var b=c.getLabel();if(b!==null&&b.getLocation(d)===jsts.geom.Location.BOUNDARY){return true}return false};jsts.geomgraph.PlanarGraph.prototype.insertEdge=function(b){this.edges.add(b)};jsts.geomgraph.PlanarGraph.prototype.add=function(b){this.nodes.add(b);this.edgeEndList.add(b)};jsts.geomgraph.PlanarGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()};jsts.geomgraph.PlanarGraph.prototype.getNodes=function(){return this.nodes.values()};jsts.geomgraph.PlanarGraph.prototype.addNode=function(b){return this.nodes.addNode(b)};jsts.geomgraph.PlanarGraph.prototype.addEdges=function(c){for(var f=c.iterator();f.hasNext();){var g=f.next();this.edges.add(g);var d=new jsts.geomgraph.DirectedEdge(g,true);var b=new jsts.geomgraph.DirectedEdge(g,false);d.setSym(b);b.setSym(d);this.add(d);this.add(b)}};jsts.geomgraph.PlanarGraph.prototype.linkResultDirectedEdges=function(){for(var b=this.nodes.iterator();b.hasNext();){var c=b.next();c.getEdges().linkResultDirectedEdges()}};jsts.geomgraph.PlanarGraph.prototype.findEdgeInSameDirection=function(h,g){var c=0,b=this.edges.size(),f,d;for(c;c<b;c++){f=this.edges.get(c);d=f.getCoordinates();if(this.matchInSameDirection(h,g,d[0],d[1])){return f}if(this.matchInSameDirection(h,g,d[d.length-1],d[d.length-2])){return f}}return null};jsts.geomgraph.PlanarGraph.prototype.matchInSameDirection=function(e,d,c,b){if(!e.equals(c)){return false}if(jsts.algorithm.CGAlgorithms.computeOrientation(e,d,b)===jsts.algorithm.CGAlgorithms.COLLINEAR&&jsts.geomgraph.Quadrant.quadrant(e,d)===jsts.geomgraph.Quadrant.quadrant(c,b)){return true}return false};jsts.geomgraph.PlanarGraph.prototype.findEdgeEnd=function(d){for(var c=this.getEdgeEnds().iterator();c.hasNext();){var b=c.next();if(b.getEdge()===d){return b}}return null}})();jsts.algorithm.LineIntersector=function(){this.inputLines=[[],[]];this.intPt=[null,null];this.pa=this.intPt[0];this.pb=this.intPt[1];this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION};jsts.algorithm.LineIntersector.NO_INTERSECTION=0;jsts.algorithm.LineIntersector.POINT_INTERSECTION=1;jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION=2;jsts.algorithm.LineIntersector.prototype.setPrecisionModel=function(a){this.precisionModel=a};jsts.algorithm.LineIntersector.prototype.getEndpoint=function(b,a){return this.inputLines[b][a]};jsts.algorithm.LineIntersector.computeEdgeDistance=function(e,h,g){var b=Math.abs(g.x-h.x);var a=Math.abs(g.y-h.y);var f=-1;if(e.equals(h)){f=0}else{if(e.equals(g)){if(b>a){f=b}else{f=a}}else{var d=Math.abs(e.x-h.x);var c=Math.abs(e.y-h.y);if(b>a){f=d}else{f=c}if(f===0&&!e.equals(h)){f=Math.max(d,c)}}}if(f===0&&!e.equals(h)){throw new jsts.error.IllegalArgumentError("Bad distance calculation")}return f};jsts.algorithm.LineIntersector.nonRobustComputeEdgeDistance=function(d,f,c){var b=d.x-f.x;var a=d.y-f.y;var e=Math.sqrt(b*b+a*a);if(!(e===0&&!d.equals(f))){throw new jsts.error.IllegalArgumentError("Invalid distance calculation")}return e};jsts.algorithm.LineIntersector.prototype.result=null;jsts.algorithm.LineIntersector.prototype.inputLines=null;jsts.algorithm.LineIntersector.prototype.intPt=null;jsts.algorithm.LineIntersector.prototype.intLineIndex=null;jsts.algorithm.LineIntersector.prototype._isProper=null;jsts.algorithm.LineIntersector.prototype.pa=null;jsts.algorithm.LineIntersector.prototype.pb=null;jsts.algorithm.LineIntersector.prototype.precisionModel=null;jsts.algorithm.LineIntersector.prototype.computeIntersection=function(b,c,a){throw new jsts.error.AbstractMethodInvocationError()};jsts.algorithm.LineIntersector.prototype.isCollinear=function(){return this.result===jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION};jsts.algorithm.LineIntersector.prototype.computeIntersection=function(d,c,b,a){this.inputLines[0][0]=d;this.inputLines[0][1]=c;this.inputLines[1][0]=b;this.inputLines[1][1]=a;this.result=this.computeIntersect(d,c,b,a)};jsts.algorithm.LineIntersector.prototype.computeIntersect=function(c,b,a,d){throw new jsts.error.AbstractMethodInvocationError()};jsts.algorithm.LineIntersector.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};jsts.algorithm.LineIntersector.prototype.hasIntersection=function(){return this.result!==jsts.algorithm.LineIntersector.NO_INTERSECTION};jsts.algorithm.LineIntersector.prototype.getIntersectionNum=function(){return this.result};jsts.algorithm.LineIntersector.prototype.getIntersection=function(a){return this.intPt[a]};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(){if(this.intLineIndex===null){this.intLineIndex=[[],[]];this.computeIntLineIndex(0);this.computeIntLineIndex(1)}};jsts.algorithm.LineIntersector.prototype.isIntersection=function(b){var a;for(a=0;a<this.result;a++){if(this.intPt[a].equals2D(b)){return true}}return false};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection=function(){if(arguments.length===1){return this.isInteriorIntersection2.apply(this,arguments)}if(this.isInteriorIntersection(0)){return true}if(this.isInteriorIntersection(1)){return true}return false};jsts.algorithm.LineIntersector.prototype.isInteriorIntersection2=function(b){var a;for(a=0;a<this.result;a++){if(!(this.intPt[a].equals2D(this.inputLines[b][0])||this.intPt[a].equals2D(this.inputLines[b][1]))){return true}}return false};jsts.algorithm.LineIntersector.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};jsts.algorithm.LineIntersector.prototype.getIntersectionAlongSegment=function(b,a){this.computeIntLineIndex();return this.intPt[intLineIndex[b][a]]};jsts.algorithm.LineIntersector.prototype.getIndexAlongSegment=function(b,a){this.computeIntLineIndex();return this.intLineIndex[b][a]};jsts.algorithm.LineIntersector.prototype.computeIntLineIndex=function(c){var b=this.getEdgeDistance(c,0);var a=this.getEdgeDistance(c,1);if(b>a){this.intLineIndex[c][0]=0;this.intLineIndex[c][1]=1}else{this.intLineIndex[c][0]=1;this.intLineIndex[c][1]=0}};jsts.algorithm.LineIntersector.prototype.getEdgeDistance=function(c,a){var b=jsts.algorithm.LineIntersector.computeEdgeDistance(this.intPt[a],this.inputLines[c][0],this.inputLines[c][1]);return b};jsts.algorithm.RobustLineIntersector=function(){jsts.algorithm.RobustLineIntersector.prototype.constructor.call(this)};jsts.algorithm.RobustLineIntersector.prototype=new jsts.algorithm.LineIntersector();jsts.algorithm.RobustLineIntersector.prototype.computeIntersection=function(b,c,a){if(arguments.length===4){jsts.algorithm.LineIntersector.prototype.computeIntersection.apply(this,arguments);return}this._isProper=false;if(jsts.geom.Envelope.intersects(c,a,b)){if((jsts.algorithm.CGAlgorithms.orientationIndex(c,a,b)===0)&&(jsts.algorithm.CGAlgorithms.orientationIndex(a,c,b)===0)){this._isProper=true;if(b.equals(c)||b.equals(a)){this._isProper=false}this.result=jsts.algorithm.LineIntersector.POINT_INTERSECTION;return}}this.result=jsts.algorithm.LineIntersector.NO_INTERSECTION};jsts.algorithm.RobustLineIntersector.prototype.computeIntersect=function(f,e,d,b){this._isProper=false;if(!jsts.geom.Envelope.intersects(f,e,d,b)){return jsts.algorithm.LineIntersector.NO_INTERSECTION}var j=jsts.algorithm.CGAlgorithms.orientationIndex(f,e,d);var g=jsts.algorithm.CGAlgorithms.orientationIndex(f,e,b);if((j>0&&g>0)||(j<0&&g<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION}var c=jsts.algorithm.CGAlgorithms.orientationIndex(d,b,f);var a=jsts.algorithm.CGAlgorithms.orientationIndex(d,b,e);if((c>0&&a>0)||(c<0&&a<0)){return jsts.algorithm.LineIntersector.NO_INTERSECTION}var h=j===0&&g===0&&c===0&&a===0;if(h){return this.computeCollinearIntersection(f,e,d,b)}if(j===0||g===0||c===0||a===0){this._isProper=false;if(f.equals2D(d)||f.equals2D(b)){this.intPt[0]=f}else{if(e.equals2D(d)||e.equals2D(b)){this.intPt[0]=e}else{if(j===0){this.intPt[0]=new jsts.geom.Coordinate(d)}else{if(g===0){this.intPt[0]=new jsts.geom.Coordinate(b)}else{if(c===0){this.intPt[0]=new jsts.geom.Coordinate(f)}else{if(a===0){this.intPt[0]=new jsts.geom.Coordinate(e)}}}}}}}else{this._isProper=true;this.intPt[0]=this.intersection(f,e,d,b)}return jsts.algorithm.LineIntersector.POINT_INTERSECTION};jsts.algorithm.RobustLineIntersector.prototype.computeCollinearIntersection=function(g,d,a,h){var f=jsts.geom.Envelope.intersects(g,d,a);var c=jsts.geom.Envelope.intersects(g,d,h);var b=jsts.geom.Envelope.intersects(a,h,g);var e=jsts.geom.Envelope.intersects(a,h,d);if(f&&c){this.intPt[0]=a;this.intPt[1]=h;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}if(b&&e){this.intPt[0]=g;this.intPt[1]=d;return jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}if(f&&b){this.intPt[0]=a;this.intPt[1]=g;return a.equals(g)&&!c&&!e?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}if(f&&e){this.intPt[0]=a;this.intPt[1]=d;return a.equals(d)&&!c&&!b?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}if(c&&b){this.intPt[0]=h;this.intPt[1]=g;return h.equals(g)&&!f&&!e?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}if(c&&e){this.intPt[0]=h;this.intPt[1]=d;return h.equals(d)&&!f&&!b?jsts.algorithm.LineIntersector.POINT_INTERSECTION:jsts.algorithm.LineIntersector.COLLINEAR_INTERSECTION}return jsts.algorithm.LineIntersector.NO_INTERSECTION};jsts.algorithm.RobustLineIntersector.prototype.intersection=function(d,c,b,e){var a=this.intersectionWithNormalization(d,c,b,e);if(!this.isInSegmentEnvelopes(a)){a=jsts.algorithm.CentralEndpointIntersector.getIntersection(d,c,b,e)}if(this.precisionModel!==null){this.precisionModel.makePrecise(a)}return a};jsts.algorithm.RobustLineIntersector.prototype.intersectionWithNormalization=function(k,j,g,d){var h=new jsts.geom.Coordinate(k);var f=new jsts.geom.Coordinate(j);var e=new jsts.geom.Coordinate(g);var b=new jsts.geom.Coordinate(d);var a=new jsts.geom.Coordinate();this.normalizeToEnvCentre(h,f,e,b,a);var c=this.safeHCoordinateIntersection(h,f,e,b);c.x+=a.x;c.y+=a.y;return c};jsts.algorithm.RobustLineIntersector.prototype.safeHCoordinateIntersection=function(f,d,b,g){var a=null;try{a=jsts.algorithm.HCoordinate.intersection(f,d,b,g)}catch(c){if(c instanceof jsts.error.NotRepresentableError){a=jsts.algorithm.CentralEndpointIntersector.getIntersection(f,d,b,g)}else{throw c}}return a};jsts.algorithm.RobustLineIntersector.prototype.normalizeToMinimum=function(d,c,b,a,e){e.x=this.smallestInAbsValue(d.x,c.x,b.x,a.x);e.y=this.smallestInAbsValue(d.y,c.y,b.y,a.y);d.x-=e.x;d.y-=e.y;c.x-=e.x;c.y-=e.y;b.x-=e.x;b.y-=e.y;a.x-=e.x;a.y-=e.y};jsts.algorithm.RobustLineIntersector.prototype.normalizeToEnvCentre=function(e,d,k,h,c){var n=e.x<d.x?e.x:d.x;var a=e.y<d.y?e.y:d.y;var b=e.x>d.x?e.x:d.x;var g=e.y>d.y?e.y:d.y;var m=k.x<h.x?k.x:h.x;var t=k.y<h.y?k.y:h.y;var u=k.x>h.x?k.x:h.x;var f=k.y>h.y?k.y:h.y;var s=n>m?n:m;var q=b<u?b:u;var r=a>t?a:t;var o=g<f?g:f;var l=(s+q)/2;var j=(r+o)/2;c.x=l;c.y=j;e.x-=c.x;e.y-=c.y;d.x-=c.x;d.y-=c.y;k.x-=c.x;k.y-=c.y;h.x-=c.x;h.y-=c.y};jsts.algorithm.RobustLineIntersector.prototype.smallestInAbsValue=function(f,d,c,b){var a=f;var e=Math.abs(a);if(Math.abs(d)<e){a=d;e=Math.abs(d)}if(Math.abs(c)<e){a=c;e=Math.abs(c)}if(Math.abs(b)<e){a=b}return a};jsts.algorithm.RobustLineIntersector.prototype.isInSegmentEnvelopes=function(a){var c=new jsts.geom.Envelope(this.inputLines[0][0],this.inputLines[0][1]);var b=new jsts.geom.Envelope(this.inputLines[1][0],this.inputLines[1][1]);return c.contains(a)&&b.contains(a)};jsts.noding.SegmentIntersector=function(){};jsts.noding.SegmentIntersector.prototype.processIntersections=jsts.abstractFunc;jsts.noding.SegmentIntersector.prototype.isDone=jsts.abstractFunc;(function(){var b=jsts.noding.SegmentIntersector;var a=javascript.util.ArrayList;jsts.noding.InteriorIntersectionFinder=function(c){this.li=c;this.intersections=new a();this.interiorIntersection=null};jsts.noding.InteriorIntersectionFinder.prototype=new b();jsts.noding.InteriorIntersectionFinder.constructor=jsts.noding.InteriorIntersectionFinder;jsts.noding.InteriorIntersectionFinder.prototype.findAllIntersections=false;jsts.noding.InteriorIntersectionFinder.prototype.isCheckEndSegmentsOnly=false;jsts.noding.InteriorIntersectionFinder.prototype.li=null;jsts.noding.InteriorIntersectionFinder.prototype.interiorIntersection=null;jsts.noding.InteriorIntersectionFinder.prototype.intSegments=null;jsts.noding.InteriorIntersectionFinder.prototype.intersections=null;jsts.noding.InteriorIntersectionFinder.prototype.setFindAllIntersections=function(c){this.findAllIntersections=c};jsts.noding.InteriorIntersectionFinder.prototype.getIntersections=function(){return intersections};jsts.noding.InteriorIntersectionFinder.prototype.setCheckEndSegmentsOnly=function(c){this.isCheckEndSegmentsOnly=c};jsts.noding.InteriorIntersectionFinder.prototype.hasIntersection=function(){return this.interiorIntersection!=null};jsts.noding.InteriorIntersectionFinder.prototype.getInteriorIntersection=function(){return this.interiorIntersection};jsts.noding.InteriorIntersectionFinder.prototype.getIntersectionSegments=function(){return this.intSegments};jsts.noding.InteriorIntersectionFinder.prototype.processIntersections=function(l,f,k,e){if(this.hasIntersection()){return}if(l==k&&f==e){return}if(this.isCheckEndSegmentsOnly){var j=this.isEndSegment(l,f)||isEndSegment(k,e);if(!j){return}}var h=l.getCoordinates()[f];var g=l.getCoordinates()[f+1];var d=k.getCoordinates()[e];var c=k.getCoordinates()[e+1];this.li.computeIntersection(h,g,d,c);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){this.intSegments=[];this.intSegments[0]=h;this.intSegments[1]=g;this.intSegments[2]=d;this.intSegments[3]=c;this.interiorIntersection=this.li.getIntersection(0);this.intersections.add(this.interiorIntersection)}}};jsts.noding.InteriorIntersectionFinder.prototype.isEndSegment=function(c,d){if(d==0){return true}if(d>=c.size()-2){return true}return false};jsts.noding.InteriorIntersectionFinder.prototype.isDone=function(){if(this.findAllIntersections){return false}return this.interiorIntersection!=null}})();(function(){jsts.noding.Noder=function(){};jsts.noding.Noder.prototype.computeNodes=jsts.abstractFunc;jsts.noding.Noder.prototype.getNodedSubstrings=jsts.abstractFunc})();(function(){var a=jsts.noding.Noder;jsts.noding.SinglePassNoder=function(){};jsts.noding.SinglePassNoder.prototype=new a();jsts.noding.SinglePassNoder.constructor=jsts.noding.SinglePassNoder;jsts.noding.SinglePassNoder.prototype.segInt=null;jsts.noding.SinglePassNoder.prototype.setSegmentIntersector=function(b){this.segInt=b}})();jsts.index.SpatialIndex=function(){};jsts.index.SpatialIndex.prototype.insert=function(a,b){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.SpatialIndex.prototype.query=function(b,a){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.SpatialIndex.prototype.remove=function(a,b){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.AbstractSTRtree=function(a){if(a===undefined){return}this.itemBoundables=[];jsts.util.Assert.isTrue(a>1,"Node capacity must be greater than 1");this.nodeCapacity=a};jsts.index.strtree.AbstractSTRtree.IntersectsOp=function(){};jsts.index.strtree.AbstractSTRtree.IntersectsOp.prototype.intersects=function(a,b){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.AbstractSTRtree.prototype.root=null;jsts.index.strtree.AbstractSTRtree.prototype.built=false;jsts.index.strtree.AbstractSTRtree.prototype.itemBoundables=null;jsts.index.strtree.AbstractSTRtree.prototype.nodeCapacity=null;jsts.index.strtree.AbstractSTRtree.prototype.build=function(){jsts.util.Assert.isTrue(!this.built);this.root=this.itemBoundables.length===0?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1);this.built=true};jsts.index.strtree.AbstractSTRtree.prototype.createNode=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables=function(b,a){jsts.util.Assert.isTrue(!(b.length===0));var d=[];d.push(this.createNode(a));var e=[];for(var c=0;c<b.length;c++){e.push(b[c])}e.sort(this.getComparator());for(var c=0;c<e.length;c++){var f=e[c];if(this.lastNode(d).getChildBoundables().length===this.getNodeCapacity()){d.push(this.createNode(a))}this.lastNode(d).addChildBoundable(f)}return d};jsts.index.strtree.AbstractSTRtree.prototype.lastNode=function(a){return a[a.length-1]};jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles=function(d,c){return d>c?1:d<c?-1:0};jsts.index.strtree.AbstractSTRtree.prototype.createHigherLevels=function(a,c){jsts.util.Assert.isTrue(!(a.length===0));var b=this.createParentBoundables(a,c+1);if(b.length===1){return b[0]}return this.createHigherLevels(b,c+1)};jsts.index.strtree.AbstractSTRtree.prototype.getRoot=function(){if(!this.built){this.build()}return this.root};jsts.index.strtree.AbstractSTRtree.prototype.getNodeCapacity=function(){return this.nodeCapacity};jsts.index.strtree.AbstractSTRtree.prototype.size=function(){if(arguments.length===1){return this.size2(arguments[0])}if(!this.built){this.build()}if(this.itemBoundables.length===0){return 0}return this.size2(root)};jsts.index.strtree.AbstractSTRtree.prototype.size2=function(d){var c=0;var a=d.getChildBoundables();for(var b=0;b<a.length;b++){var e=a[b];if(e instanceof jsts.index.strtree.AbstractNode){c+=this.size(e)}else{if(e instanceof jsts.index.strtree.ItemBoundable){c+=1}}}return c};jsts.index.strtree.AbstractSTRtree.prototype.depth=function(){if(arguments.length===1){return this.depth2(arguments[0])}if(!this.built){this.build()}if(this.itemBoundables.length===0){return 0}return this.depth2(root)};jsts.index.strtree.AbstractSTRtree.prototype.depth2=function(){var d=0;var a=node.getChildBoundables();for(var b=0;b<a.length;b++){var e=a[b];if(e instanceof jsts.index.strtree.AbstractNode){var c=this.depth(e);if(c>d){d=c}}}return d+1};jsts.index.strtree.AbstractSTRtree.prototype.insert=function(b,a){jsts.util.Assert.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built.");this.itemBoundables.push(new jsts.index.strtree.ItemBoundable(b,a))};jsts.index.strtree.AbstractSTRtree.prototype.query=function(a){if(arguments.length>1){this.query2.apply(this,arguments)}if(!this.built){this.build()}var b=[];if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null);return b}if(this.getIntersectsOp().intersects(this.root.getBounds(),a)){this.query3(a,this.root,b)}return b};jsts.index.strtree.AbstractSTRtree.prototype.query2=function(a,b){if(arguments.length>2){this.query3.apply(this,arguments)}if(!this.built){this.build()}if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()===null)}if(this.getIntersectsOp().intersects(this.root.getBounds(),a)){this.query4(a,this.root,b)}};jsts.index.strtree.AbstractSTRtree.prototype.query3=function(c,d,e){if(!(arguments[2] instanceof Array)){this.query4.apply(this,arguments)}var a=d.getChildBoundables();for(var b=0;b<a.length;b++){var f=a[b];if(!this.getIntersectsOp().intersects(f.getBounds(),c)){continue}if(f instanceof jsts.index.strtree.AbstractNode){this.query3(c,f,e)}else{if(f instanceof jsts.index.strtree.ItemBoundable){e.push(f.getItem())}else{jsts.util.Assert.shouldNeverReachHere()}}}};jsts.index.strtree.AbstractSTRtree.prototype.query4=function(c,d,e){var a=d.getChildBoundables();for(var b=0;b<a.length;b++){var f=a[b];if(!this.getIntersectsOp().intersects(f.getBounds(),c)){continue}if(f instanceof jsts.index.strtree.AbstractNode){this.query4(c,f,e)}else{if(f instanceof jsts.index.strtree.ItemBoundable){e.visitItem(f.getItem())}else{jsts.util.Assert.shouldNeverReachHere()}}}};jsts.index.strtree.AbstractSTRtree.prototype.getIntersectsOp=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree=function(){if(arguments.length===1){return this.itemsTree2.apply(this,arguments)}if(!this.built){this.build()}var a=this.itemsTree2(this.root);if(a===null){return[]}return a};jsts.index.strtree.AbstractSTRtree.prototype.itemsTree2=function(d){var c=[];var a=d.getChildBoundables();for(var b=0;b<a.length;b++){var f=a[b];if(f instanceof jsts.index.strtree.AbstractNode){var e=this.itemsTree(f);if(e!=null){c.push(e)}}else{if(f instanceof jsts.index.strtree.ItemBoundable){c.push(f.getItem())}else{jsts.util.Assert.shouldNeverReachHere()}}}if(c.length<=0){return null}return c};jsts.index.strtree.AbstractSTRtree.prototype.remove=function(a,b){if(!this.built){this.build()}if(this.itemBoundables.length===0){jsts.util.Assert.isTrue(this.root.getBounds()==null)}if(this.getIntersectsOp().intersects(this.root.getBounds(),a)){return this.remove2(a,this.root,b)}return false};jsts.index.strtree.AbstractSTRtree.prototype.remove2=function(c,f,e){var g=this.removeItem(f,e);if(g){return true}var d=null;var a=f.getChildBoundables();for(var b=0;b<a.length;b++){var h=a[b];if(!this.getIntersectsOp().intersects(h.getBounds(),c)){continue}if(h instanceof jsts.index.strtree.AbstractNode){g=this.remove(c,h,e);if(g){d=h;break}}}if(d!=null){if(d.getChildBoundables().length===0){a.splice(a.indexOf(d),1)}}return g};jsts.index.strtree.AbstractSTRtree.prototype.removeItem=function(e,d){var c=null;var a=e.getChildBoundables();for(var b=0;b<a.length;b++){var f=a[b];if(f instanceof jsts.index.strtree.ItemBoundable){if(f.getItem()===d){c=f}}}if(c!==null){a.splice(a.indexOf(c),1);return true}return false};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel=function(b){if(arguments.length>1){this.boundablesAtLevel2.apply(this,arguments);return}var a=[];this.boundablesAtLevel2(b,this.root,a);return a};jsts.index.strtree.AbstractSTRtree.prototype.boundablesAtLevel2=function(f,e,d){jsts.util.Assert.isTrue(f>-2);if(e.getLevel()===f){d.add(e);return}var a=node.getChildBoundables();for(var c=0;c<a.length;c++){var b=a[c];if(b instanceof jsts.index.strtree.AbstractNode){this.boundablesAtLevel(f,b,d)}else{jsts.util.Assert.isTrue(b instanceof jsts.index.strtree.ItemBoundable);if(f===-1){d.add(b)}}}return};jsts.index.strtree.AbstractSTRtree.prototype.getComparator=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.STRtree=function(a){a=a||jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY;jsts.index.strtree.AbstractSTRtree.call(this,a)};jsts.index.strtree.STRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.STRtree.constructor=jsts.index.strtree.STRtree;jsts.index.strtree.STRtree.prototype.xComparator=function(b,a){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreX(b.getBounds()),jsts.index.strtree.STRtree.prototype.centreX(a.getBounds()))};jsts.index.strtree.STRtree.prototype.yComparator=function(b,a){return jsts.index.strtree.AbstractSTRtree.prototype.compareDoubles(jsts.index.strtree.STRtree.prototype.centreY(b.getBounds()),jsts.index.strtree.STRtree.prototype.centreY(a.getBounds()))};jsts.index.strtree.STRtree.prototype.centreX=function(a){return jsts.index.strtree.STRtree.prototype.avg(a.getMinX(),a.getMaxX())};jsts.index.strtree.STRtree.prototype.centreY=function(a){return jsts.index.strtree.STRtree.prototype.avg(a.getMinY(),a.getMaxY())};jsts.index.strtree.STRtree.prototype.avg=function(d,c){return(d+c)/2};jsts.index.strtree.STRtree.prototype.intersectsOp={intersects:function(a,b){return a.intersects(b)}};jsts.index.strtree.STRtree.prototype.createParentBoundables=function(b,a){jsts.util.Assert.isTrue(!(b.length===0));var e=Math.ceil(b.length/this.getNodeCapacity());var f=[];for(var d=0;d<b.length;d++){f.push(b[d])}f.sort(this.xComparator);var c=this.verticalSlices(f,Math.ceil(Math.sqrt(e)));return this.createParentBoundablesFromVerticalSlices(c,a)};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlices=function(b,a){jsts.util.Assert.isTrue(b.length>0);var d=[];for(var c=0;c<b.length;c++){d=d.concat(this.createParentBoundablesFromVerticalSlice(b[c],a))}return d};jsts.index.strtree.STRtree.prototype.createParentBoundablesFromVerticalSlice=function(b,a){return jsts.index.strtree.AbstractSTRtree.prototype.createParentBoundables.call(this,b,a)};jsts.index.strtree.STRtree.prototype.verticalSlices=function(b,f){var h=Math.ceil(b.length/f);var e=[];var d=0,a,g;for(var c=0;c<f;c++){e[c]=[];a=0;while(d<b.length&&a<h){g=b[d++];e[c].push(g);a++}}return e};jsts.index.strtree.STRtree.DEFAULT_NODE_CAPACITY=10;jsts.index.strtree.STRtree.prototype.createNode=function(b){var a=new jsts.index.strtree.AbstractNode(b);a.computeBounds=function(){var e=null;var c=this.getChildBoundables();for(var d=0;d<c.length;d++){var f=c[d];if(e===null){e=new jsts.geom.Envelope(f.getBounds())}else{e.expandToInclude(f.getBounds())}}return e};return a};jsts.index.strtree.STRtree.prototype.getIntersectsOp=function(){return this.intersectsOp};jsts.index.strtree.STRtree.prototype.insert=function(a,b){if(a.isNull()){return}jsts.index.strtree.AbstractSTRtree.prototype.insert.call(this,a,b)};jsts.index.strtree.STRtree.prototype.query=function(b,a){return jsts.index.strtree.AbstractSTRtree.prototype.query.apply(this,arguments)};jsts.index.strtree.STRtree.prototype.remove=function(a,b){return jsts.index.strtree.AbstractSTRtree.prototype.remove.call(this,a,b)};jsts.index.strtree.STRtree.prototype.size=function(){return jsts.index.strtree.AbstractSTRtree.prototype.size.call(this)};jsts.index.strtree.STRtree.prototype.depth=function(){return jsts.index.strtree.AbstractSTRtree.prototype.depth.call(this)};jsts.index.strtree.STRtree.prototype.getComparator=function(){return this.yComparator};jsts.index.strtree.STRtree.prototype.nearestNeighbour=function(a){var b=new jsts.index.strtree.BoundablePair(this.getRoot(),this.getRoot(),a);return this.nearestNeighbour4(b)};jsts.index.strtree.STRtree.prototype.nearestNeighbour2=function(c,e,b){var a=new jsts.index.strtree.ItemBoundable(c,e);var d=new jsts.index.strtree.BoundablePair(this.getRoot(),a,b);return this.nearestNeighbour4(d)[0]};jsts.index.strtree.STRtree.prototype.nearestNeighbour3=function(a,b){var c=new jsts.index.strtree.BoundablePair(this.getRoot(),a.getRoot(),b);return this.nearestNeighbour4(c)};jsts.index.strtree.STRtree.prototype.nearestNeighbour4=function(a){return this.nearestNeighbour5(a,Double.POSITIVE_INFINITY)};jsts.index.strtree.STRtree.prototype.nearestNeighbour5=function(e,f){var g=f;var a=null;var d=[];d.push(e);while(!d.isEmpty()&&g>0){var c=d.pop();var b=c.getDistance();if(b>=g){break}if(c.isLeaves()){g=b;a=c}else{c.expandToQueue(d,g)}}return[a.getBoundable(0).getItem(),a.getBoundable(1).getItem()]};jsts.noding.SegmentString=function(){};jsts.noding.SegmentString.prototype.getData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.setData=jsts.abstractFunc;jsts.noding.SegmentString.prototype.size=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinate=jsts.abstractFunc;jsts.noding.SegmentString.prototype.getCoordinates=jsts.abstractFunc;jsts.noding.SegmentString.prototype.isClosed=jsts.abstractFunc;jsts.noding.NodableSegmentString=function(){};jsts.noding.NodableSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.NodableSegmentString.prototype.addIntersection=jsts.abstractFunc;jsts.noding.NodedSegmentString=function(b,a){this.nodeList=new jsts.noding.SegmentNodeList(this);this.pts=b;this.data=a};jsts.noding.NodedSegmentString.prototype=new jsts.noding.NodableSegmentString();jsts.noding.NodedSegmentString.constructor=jsts.noding.NodedSegmentString;jsts.noding.NodedSegmentString.getNodedSubstrings=function(b){if(arguments.length===2){jsts.noding.NodedSegmentString.getNodedSubstrings2.apply(this,arguments);return}var a=new javascript.util.ArrayList();jsts.noding.NodedSegmentString.getNodedSubstrings2(b,a);return a};jsts.noding.NodedSegmentString.getNodedSubstrings2=function(d,a){for(var c=d.iterator();c.hasNext();){var b=c.next();b.getNodeList().addSplitEdges(a)}};jsts.noding.NodedSegmentString.prototype.nodeList=null;jsts.noding.NodedSegmentString.prototype.pts=null;jsts.noding.NodedSegmentString.prototype.data=null;jsts.noding.NodedSegmentString.prototype.getData=function(){return this.data};jsts.noding.NodedSegmentString.prototype.setData=function(a){this.data=a};jsts.noding.NodedSegmentString.prototype.getNodeList=function(){return this.nodeList};jsts.noding.NodedSegmentString.prototype.size=function(){return this.pts.length};jsts.noding.NodedSegmentString.prototype.getCoordinate=function(a){return this.pts[a]};jsts.noding.NodedSegmentString.prototype.getCoordinates=function(){return this.pts};jsts.noding.NodedSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])};jsts.noding.NodedSegmentString.prototype.getSegmentOctant=function(a){if(a===this.pts.length-1){return -1}return this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))};jsts.noding.NodedSegmentString.prototype.safeOctant=function(b,a){if(b.equals2D(a)){return 0}return jsts.noding.Octant.octant(b,a)};jsts.noding.NodedSegmentString.prototype.addIntersections=function(a,d,c){for(var b=0;b<a.getIntersectionNum();b++){this.addIntersection(a,d,c,b)}};jsts.noding.NodedSegmentString.prototype.addIntersection=function(b,e,d,c){if(b instanceof jsts.geom.Coordinate){this.addIntersection2.apply(this,arguments);return}var a=new jsts.geom.Coordinate(b.getIntersection(c));this.addIntersection2(a,e)};jsts.noding.NodedSegmentString.prototype.addIntersection2=function(a,b){this.addIntersectionNode(a,b)};jsts.noding.NodedSegmentString.prototype.addIntersectionNode=function(a,f){var d=f;var b=d+1;if(b<this.pts.length){var c=this.pts[b];if(a.equals2D(c)){d=b}}var e=this.nodeList.add(a,d);return e};jsts.noding.NodedSegmentString.prototype.toString=function(){var a=new jsts.geom.GeometryFactory();return new jsts.io.WKTWriter().write(a.createLineString(this.pts))};jsts.index.chain.MonotoneChainBuilder=function(){};jsts.index.chain.MonotoneChainBuilder.toIntArray=function(b){var c=[];for(var a=0;a<b.length;a++){c[a]=b[a]}return c};jsts.index.chain.MonotoneChainBuilder.getChains=function(a){if(arguments.length===2){return jsts.index.chain.MonotoneChainBuilder.getChains2.apply(this,arguments)}return jsts.index.chain.MonotoneChainBuilder.getChains2(a,null)};jsts.index.chain.MonotoneChainBuilder.getChains2=function(f,b){var c=[];var e=jsts.index.chain.MonotoneChainBuilder.getChainStartIndices(f);for(var a=0;a<e.length-1;a++){var d=new jsts.index.chain.MonotoneChain(f,e[a],e[a+1],b);c.push(d)}return c};jsts.index.chain.MonotoneChainBuilder.getChainStartIndices=function(d){var e=0;var b=[];b.push(e);do{var a=jsts.index.chain.MonotoneChainBuilder.findChainEnd(d,e);b.push(a);e=a}while(e<d.length-1);var c=jsts.index.chain.MonotoneChainBuilder.toIntArray(b);return c};jsts.index.chain.MonotoneChainBuilder.findChainEnd=function(e,f){var b=f;while(b<e.length-1&&e[b].equals2D(e[b+1])){b++}if(b>=e.length-1){return e.length-1}var d=jsts.geomgraph.Quadrant.quadrant(e[b],e[b+1]);var c=f+1;while(c<e.length){if(!e[c-1].equals2D(e[c])){var a=jsts.geomgraph.Quadrant.quadrant(e[c-1],e[c]);if(a!==d){break}}c++}return c-1};jsts.geom.LineSegment=function(b,a){if(b===undefined){this.p0=new jsts.geom.Coordinate();this.p1=new jsts.geom.Coordinate();return}this.p0=b;this.p1=a};jsts.geom.LineSegment.prototype.p0=null;jsts.geom.LineSegment.prototype.p1=null;jsts.geom.LineSegment.prototype.getLength=function(){return this.p0.distance(p1)};jsts.geom.LineSegment.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};jsts.geom.LineSegment.prototype.isVertical=function(){return this.p0.x===this.p1.x};jsts.geom.LineSegment.prototype.reverse=function(){var a=this.p0;this.p0=this.p1;this.p1=a};jsts.geom.LineSegment.prototype.projectionFactor=function(e){if(e.equals(this.p0)){return 0}if(e.equals(this.p1)){return 1}var c=this.p1.x-this.p0.x;var a=this.p1.y-this.p0.y;var b=c*c+a*a;var d=((e.x-this.p0.x)*c+(e.y-this.p0.y)*a)/b;return d};jsts.geom.LineSegment.prototype.closestPoint=function(d){var a=this.projectionFactor(d);if(a>0&&a<1){return this.project(d)}var c=this.p0.distance(d);var b=this.p1.distance(d);if(c<b){return this.p0}return this.p1};jsts.geom.LineSegment.prototype.closestPoints=function(j){var e=this.intersection(j);if(e!==null){return[e,e]}var d=[];var g=Number.MAX_VALUE;var f;var c=this.closestPoint(j.p0);g=c.distance(j.p0);d[0]=c;d[1]=j.p0;var b=this.closestPoint(j.p1);f=b.distance(j.p1);if(f<g){g=f;d[0]=b;d[1]=j.p1}var a=j.closestPoint(this.p0);f=a.distance(this.p0);if(f<g){g=f;d[0]=this.p0;d[1]=a}var h=j.closestPoint(this.p1);f=h.distance(this.p1);if(f<g){g=f;d[0]=this.p1;d[1]=h}return d};jsts.geom.LineSegment.prototype.intersection=function(b){var a=new jsts.algorithm.RobustLineIntersector();a.computeIntersection(this.p0,this.p1,b.p0,b.p1);if(a.hasIntersection()){return a.getIntersection(0)}return null};jsts.geom.LineSegment.prototype.project=function(b){if(b.equals(this.p0)||b.equals(this.p1)){return new jsts.geom.Coordinate(b)}var a=this.projectionFactor(b);var c=new jsts.geom.Coordinate();c.x=this.p0.x+a*(this.p1.x-this.p0.x);c.y=this.p0.y+a*(this.p1.y-this.p0.y);return c};jsts.geom.LineSegment.prototype.setCoordinates=function(a){if(a instanceof jsts.geom.Coordinate){this.setCoordinates2.apply(this,arguments);return}this.setCoordinates2(a.p0,a.p1)};jsts.geom.LineSegment.prototype.setCoordinates2=function(b,a){this.p0.x=b.x;this.p0.y=b.y;this.p1.x=a.x;this.p1.y=a.y};jsts.geom.LineSegment.prototype.distance=function(a){return jsts.algorithm.CGAlgorithms.distancePointLine(a,this.p0,this.p1)};jsts.index.chain.MonotoneChainOverlapAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.tempEnv2=new jsts.geom.Envelope();this.overlapSeg1=new jsts.geom.LineSegment();this.overlapSeg2=new jsts.geom.LineSegment()};jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.tempEnv2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg1=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlapSeg2=null;jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap=function(d,b,c,a){this.mc1.getLineSegment(b,this.overlapSeg1);this.mc2.getLineSegment(a,this.overlapSeg2);this.overlap2(this.overlapSeg1,this.overlapSeg2)};jsts.index.chain.MonotoneChainOverlapAction.prototype.overlap2=function(b,a){};(function(){var e=jsts.index.chain.MonotoneChainOverlapAction;var b=jsts.noding.SinglePassNoder;var d=jsts.index.strtree.STRtree;var a=jsts.noding.NodedSegmentString;var c=jsts.index.chain.MonotoneChainBuilder;var f=function(g){this.si=g};f.prototype=new e();f.constructor=f;f.prototype.si=null;f.prototype.overlap=function(m,k,l,j){var h=m.getContext();var g=l.getContext();this.si.processIntersections(h,k,g,j)};jsts.noding.MCIndexNoder=function(){this.monoChains=[];this.index=new d()};jsts.noding.MCIndexNoder.prototype=new b();jsts.noding.MCIndexNoder.constructor=jsts.noding.MCIndexNoder;jsts.noding.MCIndexNoder.prototype.monoChains=null;jsts.noding.MCIndexNoder.prototype.index=null;jsts.noding.MCIndexNoder.prototype.idCounter=0;jsts.noding.MCIndexNoder.prototype.nodedSegStrings=null;jsts.noding.MCIndexNoder.prototype.nOverlaps=0;jsts.noding.MCIndexNoder.prototype.getMonotoneChains=function(){return this.monoChains};jsts.noding.MCIndexNoder.prototype.getIndex=function(){return this.index};jsts.noding.MCIndexNoder.prototype.getNodedSubstrings=function(){return a.getNodedSubstrings(this.nodedSegStrings)};jsts.noding.MCIndexNoder.prototype.computeNodes=function(h){this.nodedSegStrings=h;for(var g=h.iterator();g.hasNext();){this.add(g.next())}this.intersectChains()};jsts.noding.MCIndexNoder.prototype.intersectChains=function(){var l=new f(this.segInt);for(var k=0;k<this.monoChains.length;k++){var g=this.monoChains[k];var n=this.index.query(g.getEnvelope());for(var h=0;h<n.length;h++){var m=n[h];if(m.getId()>g.getId()){g.computeOverlaps(m,l);this.nOverlaps++}if(this.segInt.isDone()){return}}}};jsts.noding.MCIndexNoder.prototype.add=function(g){var j=c.getChains(g.getCoordinates(),g);for(var h=0;h<j.length;h++){var k=j[h];k.setId(this.idCounter++);this.index.insert(k.getEnvelope(),k);this.monoChains.push(k)}}})();(function(){var a=jsts.algorithm.RobustLineIntersector;var b=jsts.noding.InteriorIntersectionFinder;var c=jsts.noding.MCIndexNoder;jsts.noding.FastNodingValidator=function(d){this.li=new a();this.segStrings=d};jsts.noding.FastNodingValidator.prototype.li=null;jsts.noding.FastNodingValidator.prototype.segStrings=null;jsts.noding.FastNodingValidator.prototype.findAllIntersections=false;jsts.noding.FastNodingValidator.prototype.segInt=null;jsts.noding.FastNodingValidator.prototype._isValid=true;jsts.noding.FastNodingValidator.prototype.setFindAllIntersections=function(d){this.findAllIntersections=d};jsts.noding.FastNodingValidator.prototype.getIntersections=function(){return segInt.getIntersections()};jsts.noding.FastNodingValidator.prototype.isValid=function(){this.execute();return this._isValid};jsts.noding.FastNodingValidator.prototype.getErrorMessage=function(){if(this._isValid){return"no intersections found"}var d=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jsts.io.WKTWriter.toLineString(d[0],d[1])+" and "+jsts.io.WKTWriter.toLineString(d[2],d[3])};jsts.noding.FastNodingValidator.prototype.checkValid=function(){this.execute();if(!this._isValid){throw new jsts.error.TopologyError(this.getErrorMessage(),this.segInt.getInteriorIntersection())}};jsts.noding.FastNodingValidator.prototype.execute=function(){if(this.segInt!=null){return}this.checkInteriorIntersections()};jsts.noding.FastNodingValidator.prototype.checkInteriorIntersections=function(){this._isValid=true;this.segInt=new b(this.li);this.segInt.setFindAllIntersections(this.findAllIntersections);var d=new c();d.setSegmentIntersector(this.segInt);d.computeNodes(this.segStrings);if(this.segInt.hasIntersection()){this._isValid=false;return}}})();(function(){jsts.noding.BasicSegmentString=function(b,a){this.pts=b;this.data=a};jsts.noding.BasicSegmentString.prototype=new jsts.noding.SegmentString();jsts.noding.BasicSegmentString.prototype.pts=null;jsts.noding.BasicSegmentString.prototype.data=null;jsts.noding.BasicSegmentString.prototype.getData=function(){return this.data};jsts.noding.BasicSegmentString.prototype.setData=function(a){this.data=a};jsts.noding.BasicSegmentString.prototype.size=function(){return this.pts.length};jsts.noding.BasicSegmentString.prototype.getCoordinate=function(a){return this.pts[a]};jsts.noding.BasicSegmentString.prototype.getCoordinates=function(){return this.pts};jsts.noding.BasicSegmentString.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])};jsts.noding.BasicSegmentString.prototype.getSegmentOctant=function(a){if(a==this.pts.length-1){return -1}return jsts.noding.Octant.octant(this.getCoordinate(a),this.getCoordinate(a+1))}})();(function(){var b=jsts.noding.FastNodingValidator;var c=jsts.noding.BasicSegmentString;var a=javascript.util.ArrayList;jsts.geomgraph.EdgeNodingValidator=function(d){this.nv=new b(jsts.geomgraph.EdgeNodingValidator.toSegmentStrings(d))};jsts.geomgraph.EdgeNodingValidator.checkValid=function(d){var e=new jsts.geomgraph.EdgeNodingValidator(d);e.checkValid()};jsts.geomgraph.EdgeNodingValidator.toSegmentStrings=function(d){var g=new a();for(var f=d.iterator();f.hasNext();){var h=f.next();g.add(new c(h.getCoordinates(),h))}return g};jsts.geomgraph.EdgeNodingValidator.prototype.nv=null;jsts.geomgraph.EdgeNodingValidator.prototype.checkValid=function(){this.nv.checkValid()}})();jsts.operation.GeometryGraphOperation=function(c,b,a){this.li=new jsts.algorithm.RobustLineIntersector();this.arg=[];if(c===undefined){return}if(b===undefined){this.setComputationPrecision(c.getPrecisionModel());this.arg[0]=new jsts.geomgraph.GeometryGraph(0,c);return}a=a||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(c.getPrecisionModel().compareTo(b.getPrecisionModel())>=0){this.setComputationPrecision(c.getPrecisionModel())}else{this.setComputationPrecision(b.getPrecisionModel())}this.arg[0]=new jsts.geomgraph.GeometryGraph(0,c,a);this.arg[1]=new jsts.geomgraph.GeometryGraph(1,b,a)};jsts.operation.GeometryGraphOperation.prototype.li=null;jsts.operation.GeometryGraphOperation.prototype.resultPrecisionModel=null;jsts.operation.GeometryGraphOperation.prototype.arg=null;jsts.operation.GeometryGraphOperation.prototype.getArgGeometry=function(a){return arg[a].getGeometry()};jsts.operation.GeometryGraphOperation.prototype.setComputationPrecision=function(a){this.resultPrecisionModel=a;this.li.setPrecisionModel(this.resultPrecisionModel)};jsts.operation.overlay.PolygonBuilder=function(a){this.shellList=[];this.geometryFactory=a};jsts.operation.overlay.PolygonBuilder.prototype.geometryFactory=null;jsts.operation.overlay.PolygonBuilder.prototype.shellList=null;jsts.operation.overlay.PolygonBuilder.prototype.add=function(a){if(arguments.length===2){this.add2.apply(this,arguments);return}this.add2(a.getEdgeEnds(),a.getNodes())};jsts.operation.overlay.PolygonBuilder.prototype.add2=function(d,c){jsts.geomgraph.PlanarGraph.linkResultDirectedEdges(c);var b=this.buildMaximalEdgeRings(d);var e=[];var a=this.buildMinimalEdgeRings(b,this.shellList,e);this.sortShellsAndHoles(a,this.shellList,e);this.placeFreeHoles(this.shellList,e)};jsts.operation.overlay.PolygonBuilder.prototype.getPolygons=function(){var a=this.computePolygons(this.shellList);return a};jsts.operation.overlay.PolygonBuilder.prototype.buildMaximalEdgeRings=function(b){var a=[];for(var c=b.iterator();c.hasNext();){var e=c.next();if(e.isInResult()&&e.getLabel().isArea()){if(e.getEdgeRing()==null){var d=new jsts.operation.overlay.MaximalEdgeRing(e,this.geometryFactory);a.push(d);d.setInResult()}}}return a};jsts.operation.overlay.PolygonBuilder.prototype.buildMinimalEdgeRings=function(b,g,f){var a=[];for(var d=0;d<b.length;d++){var h=b[d];if(h.getMaxNodeDegree()>2){h.linkDirectedEdgesForMinimalEdgeRings();var e=h.buildMinimalRings();var c=this.findShell(e);if(c!==null){this.placePolygonHoles(c,e);g.push(c)}else{f=f.concat(e)}}else{a.push(h)}}return a};jsts.operation.overlay.PolygonBuilder.prototype.findShell=function(c){var e=0;var b=null;for(var a=0;a<c.length;a++){var d=c[a];if(!d.isHole()){b=d;e++}}jsts.util.Assert.isTrue(e<=1,"found two shells in MinimalEdgeRing list");return b};jsts.operation.overlay.PolygonBuilder.prototype.placePolygonHoles=function(b,c){for(var a=0;a<c.length;a++){var d=c[a];if(d.isHole()){d.setShell(b)}}};jsts.operation.overlay.PolygonBuilder.prototype.sortShellsAndHoles=function(a,d,c){for(var b=0;b<a.length;b++){var e=a[b];if(e.isHole()){c.push(e)}else{d.push(e)}}};jsts.operation.overlay.PolygonBuilder.prototype.placeFreeHoles=function(e,d){for(var b=0;b<d.length;b++){var c=d[b];if(c.getShell()==null){var a=this.findEdgeRingContaining(c,e);if(a===null){throw new jsts.error.TopologyError("unable to assign hole to a shell",c.getCoordinate(0))}c.setShell(a)}}};jsts.operation.overlay.PolygonBuilder.prototype.findEdgeRingContaining=function(a,h){var m=a.getLinearRing();var e=m.getEnvelopeInternal();var c=m.getCoordinateN(0);var j=null;var d=null;for(var g=0;g<h.length;g++){var f=h[g];var b=f.getLinearRing();var k=b.getEnvelopeInternal();if(j!==null){d=j.getLinearRing().getEnvelopeInternal()}var l=false;if(k.contains(e)&&jsts.algorithm.CGAlgorithms.isPointInRing(c,b.getCoordinates())){l=true}if(l){if(j==null||d.contains(k)){j=f}}}return j};jsts.operation.overlay.PolygonBuilder.prototype.computePolygons=function(d){var c=new javascript.util.ArrayList();for(var a=0;a<d.length;a++){var e=d[a];var b=e.toPolygon(this.geometryFactory);c.add(b)}return c};jsts.operation.overlay.PolygonBuilder.prototype.containsPoint=function(b){for(var a=0;a<this.shellList.length;a++){var c=this.shellList[a];if(c.containsPoint(b)){return true}}return false};(function(){var c=jsts.util.Assert;var a=javascript.util.ArrayList;var b=function(f,d,e){this.lineEdgesList=new a();this.resultLineList=new a();this.op=f;this.geometryFactory=d;this.ptLocator=e};b.prototype.op=null;b.prototype.geometryFactory=null;b.prototype.ptLocator=null;b.prototype.lineEdgesList=null;b.prototype.resultLineList=null;b.prototype.build=function(d){this.findCoveredLineEdges();this.collectLines(d);this.buildLines(d);return this.resultLineList};b.prototype.findCoveredLineEdges=function(){for(var d=this.op.getGraph().getNodes().iterator();d.hasNext();){var h=d.next();h.getEdges().findCoveredLineEdges()}for(var g=this.op.getGraph().getEdgeEnds().iterator();g.hasNext();){var k=g.next();var j=k.getEdge();if(k.isLineEdge()&&!j.isCoveredSet()){var f=this.op.isCoveredByA(k.getCoordinate());j.setCovered(f)}}};b.prototype.collectLines=function(e){for(var d=this.op.getGraph().getEdgeEnds().iterator();d.hasNext();){var f=d.next();this.collectLineEdge(f,e,this.lineEdgesList);this.collectBoundaryTouchEdge(f,e,this.lineEdgesList)}};b.prototype.collectLineEdge=function(j,g,d){var f=j.getLabel();var h=j.getEdge();if(j.isLineEdge()){if(!j.isVisited()&&jsts.operation.overlay.OverlayOp.isResultOfOp(f,g)&&!h.isCovered()){d.add(h);j.setVisitedEdge(true)}}};b.prototype.collectBoundaryTouchEdge=function(g,f,d){var e=g.getLabel();if(g.isLineEdge()){return}if(g.isVisited()){return}if(g.isInteriorAreaEdge()){return}if(g.getEdge().isInResult()){return}c.isTrue(!(g.isInResult()||g.getSym().isInResult())||!g.getEdge().isInResult());if(jsts.operation.overlay.OverlayOp.isResultOfOp(e,f)&&f===jsts.operation.overlay.OverlayOp.INTERSECTION){d.add(g.getEdge());g.setVisitedEdge(true)}};b.prototype.buildLines=function(h){for(var g=this.lineEdgesList.iterator();g.hasNext();){var j=g.next();var f=j.getLabel();var d=this.geometryFactory.createLineString(j.getCoordinates());this.resultLineList.add(d);j.setInResult(true)}};b.prototype.labelIsolatedLines=function(h){for(var f=h.iterator();f.hasNext();){var g=f.next();var d=g.getLabel();if(g.isIsolated()){if(d.isNull(0)){this.labelIsolatedLine(g,0)}else{this.labelIsolatedLine(g,1)}}}};b.prototype.labelIsolatedLine=function(f,d){var g=ptLocator.locate(f.getCoordinate(),op.getArgGeometry(d));f.getLabel().setLocation(d,g)};jsts.operation.overlay.LineBuilder=b})();(function(){var a=javascript.util.ArrayList;var b=function(e,c,d){this.resultPointList=new a();this.op=e;this.geometryFactory=c};b.prototype.op=null;b.prototype.geometryFactory=null;b.prototype.resultPointList=null;b.prototype.build=function(c){this.extractNonCoveredResultNodes(c);return this.resultPointList};b.prototype.extractNonCoveredResultNodes=function(e){for(var c=this.op.getGraph().getNodes().iterator();c.hasNext();){var f=c.next();if(f.isInResult()){continue}if(f.isIncidentEdgeInResult()){continue}if(f.getEdges().getDegree()===0||e===jsts.operation.overlay.OverlayOp.INTERSECTION){var d=f.getLabel();if(jsts.operation.overlay.OverlayOp.isResultOfOp(d,e)){this.filterCoveredNodeToPoint(f)}}}};b.prototype.filterCoveredNodeToPoint=function(e){var d=e.getCoordinate();if(!this.op.isCoveredByLA(d)){var c=this.geometryFactory.createPoint(d);this.resultPointList.add(c)}};jsts.operation.overlay.PointBuilder=b})();(function(){var j=jsts.algorithm.PointLocator;var h=jsts.geom.Location;var g=jsts.geomgraph.EdgeList;var f=jsts.geomgraph.Label;var n=jsts.geomgraph.PlanarGraph;var d=jsts.geomgraph.Position;var o=jsts.geomgraph.EdgeNodingValidator;var c=jsts.operation.GeometryGraphOperation;var b=jsts.operation.overlay.OverlayNodeFactory;var e=jsts.operation.overlay.PolygonBuilder;var m=jsts.operation.overlay.LineBuilder;var k=jsts.operation.overlay.PointBuilder;var a=jsts.util.Assert;var l=javascript.util.ArrayList;jsts.operation.overlay.OverlayOp=function(r,q){this.ptLocator=new j();this.edgeList=new g();this.resultPolyList=new l();this.resultLineList=new l();this.resultPointList=new l();c.call(this,r,q);this.graph=new n(new b());this.geomFact=r.getFactory()};jsts.operation.overlay.OverlayOp.prototype=new c();jsts.operation.overlay.OverlayOp.constructor=jsts.operation.overlay.OverlayOp;jsts.operation.overlay.OverlayOp.INTERSECTION=1;jsts.operation.overlay.OverlayOp.UNION=2;jsts.operation.overlay.OverlayOp.DIFFERENCE=3;jsts.operation.overlay.OverlayOp.SYMDIFFERENCE=4;jsts.operation.overlay.OverlayOp.overlayOp=function(t,s,q){var u=new jsts.operation.overlay.OverlayOp(t,s);var r=u.getResultGeometry(q);return r};jsts.operation.overlay.OverlayOp.isResultOfOp=function(q,r){if(arguments.length===3){return jsts.operation.overlay.OverlayOp.isResultOfOp2.apply(this,arguments)}var t=q.getLocation(0);var s=q.getLocation(1);return jsts.operation.overlay.OverlayOp.isResultOfOp2(t,s,r)};jsts.operation.overlay.OverlayOp.isResultOfOp2=function(s,r,q){if(s==h.BOUNDARY){s=h.INTERIOR}if(r==h.BOUNDARY){r=h.INTERIOR}switch(q){case jsts.operation.overlay.OverlayOp.INTERSECTION:return s==h.INTERIOR&&r==h.INTERIOR;case jsts.operation.overlay.OverlayOp.UNION:return s==h.INTERIOR||r==h.INTERIOR;case jsts.operation.overlay.OverlayOp.DIFFERENCE:return s==h.INTERIOR&&r!=h.INTERIOR;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:return(s==h.INTERIOR&&r!=h.INTERIOR)||(s!=h.INTERIOR&&r==h.INTERIOR)}return false};jsts.operation.overlay.OverlayOp.prototype.ptLocator=null;jsts.operation.overlay.OverlayOp.prototype.geomFact=null;jsts.operation.overlay.OverlayOp.prototype.resultGeom=null;jsts.operation.overlay.OverlayOp.prototype.graph=null;jsts.operation.overlay.OverlayOp.prototype.edgeList=null;jsts.operation.overlay.OverlayOp.prototype.resultPolyList=null;jsts.operation.overlay.OverlayOp.prototype.resultLineList=null;jsts.operation.overlay.OverlayOp.prototype.resultPointList=null;jsts.operation.overlay.OverlayOp.prototype.getResultGeometry=function(q){this.computeOverlay(q);return this.resultGeom};jsts.operation.overlay.OverlayOp.prototype.getGraph=function(){return this.graph};jsts.operation.overlay.OverlayOp.prototype.computeOverlay=function(u){this.copyPoints(0);this.copyPoints(1);this.arg[0].computeSelfNodes(this.li,false);this.arg[1].computeSelfNodes(this.li,false);this.arg[0].computeEdgeIntersections(this.arg[1],this.li,true);var v=new l();this.arg[0].computeSplitEdges(v);this.arg[1].computeSplitEdges(v);var s=v;this.insertUniqueEdges(v);this.computeLabelsFromDepths();this.replaceCollapsedEdges();o.checkValid(this.edgeList.getEdges());this.graph.addEdges(this.edgeList.getEdges());this.computeLabelling();this.labelIncompleteNodes();this.findResultAreaEdges(u);this.cancelDuplicateResultEdges();var r=new e(this.geomFact);r.add(this.graph);this.resultPolyList=r.getPolygons();var q=new m(this,this.geomFact,this.ptLocator);this.resultLineList=q.build(u);var t=new k(this,this.geomFact,this.ptLocator);this.resultPointList=t.build(u);this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,u)};jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdges=function(q){for(var r=q.iterator();r.hasNext();){var s=r.next();this.insertUniqueEdge(s)}};jsts.operation.overlay.OverlayOp.prototype.insertUniqueEdge=function(t){var s=this.edgeList.findEqualEdge(t);if(s!==null){var q=s.getLabel();var r=t.getLabel();if(!s.isPointwiseEqual(t)){r=new f(t.getLabel());r.flip()}var u=s.getDepth();if(u.isNull()){u.add(q)}u.add(r);q.merge(r)}else{this.edgeList.add(t)}};jsts.operation.overlay.OverlayOp.prototype.computeLabelsFromDepths=function(){for(var r=this.edgeList.iterator();r.hasNext();){var t=r.next();var s=t.getLabel();var u=t.getDepth();if(!u.isNull()){u.normalize();for(var q=0;q<2;q++){if(!s.isNull(q)&&s.isArea()&&!u.isNull(q)){if(u.getDelta(q)==0){s.toLine(q)}else{a.isTrue(!u.isNull(q,d.LEFT),"depth of LEFT side has not been initialized");s.setLocation(q,d.LEFT,u.getLocation(q,d.LEFT));a.isTrue(!u.isNull(q,d.RIGHT),"depth of RIGHT side has not been initialized");s.setLocation(q,d.RIGHT,u.getLocation(q,d.RIGHT))}}}}}};jsts.operation.overlay.OverlayOp.prototype.replaceCollapsedEdges=function(){var q=new l();for(var r=this.edgeList.iterator();r.hasNext();){var s=r.next();if(s.isCollapsed()){r.remove();q.add(s.getCollapsedEdge())}}this.edgeList.addAll(q)};jsts.operation.overlay.OverlayOp.prototype.copyPoints=function(t){for(var r=this.arg[t].getNodeIterator();r.hasNext();){var s=r.next();var q=this.graph.addNode(s.getCoordinate());q.setLabel(t,s.getLabel().getLocation(t))}};jsts.operation.overlay.OverlayOp.prototype.computeLabelling=function(){for(var q=this.graph.getNodes().iterator();q.hasNext();){var r=q.next();r.getEdges().computeLabelling(this.arg)}this.mergeSymLabels();this.updateNodeLabelling()};jsts.operation.overlay.OverlayOp.prototype.mergeSymLabels=function(){for(var q=this.graph.getNodes().iterator();q.hasNext();){var r=q.next();r.getEdges().mergeSymLabels()}};jsts.operation.overlay.OverlayOp.prototype.updateNodeLabelling=function(){for(var q=this.graph.getNodes().iterator();q.hasNext();){var r=q.next();var s=r.getEdges().getLabel();r.getLabel().merge(s)}};jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNodes=function(){var q=0;for(var s=this.graph.getNodes().iterator();s.hasNext();){var t=s.next();var r=t.getLabel();if(t.isIsolated()){q++;if(r.isNull(0)){this.labelIncompleteNode(t,0)}else{this.labelIncompleteNode(t,1)}}t.getEdges().updateLabelling(r)}};jsts.operation.overlay.OverlayOp.prototype.labelIncompleteNode=function(s,q){var r=this.ptLocator.locate(s.getCoordinate(),this.arg[q].getGeometry());s.getLabel().setLocation(q,r)};jsts.operation.overlay.OverlayOp.prototype.findResultAreaEdges=function(s){for(var r=this.graph.getEdgeEnds().iterator();r.hasNext();){var t=r.next();var q=t.getLabel();if(q.isArea()&&!t.isInteriorAreaEdge()&&jsts.operation.overlay.OverlayOp.isResultOfOp(q.getLocation(0,d.RIGHT),q.getLocation(1,d.RIGHT),s)){t.setInResult(true)}}};jsts.operation.overlay.OverlayOp.prototype.cancelDuplicateResultEdges=function(){for(var r=this.graph.getEdgeEnds().iterator();r.hasNext();){var s=r.next();var q=s.getSym();if(s.isInResult()&&q.isInResult()){s.setInResult(false);q.setInResult(false)}}};jsts.operation.overlay.OverlayOp.prototype.isCoveredByLA=function(q){if(this.isCovered(q,this.resultLineList)){return true}if(this.isCovered(q,this.resultPolyList)){return true}return false};jsts.operation.overlay.OverlayOp.prototype.isCoveredByA=function(q){if(this.isCovered(q,this.resultPolyList)){return true}return false};jsts.operation.overlay.OverlayOp.prototype.isCovered=function(u,q){for(var s=q.iterator();s.hasNext();){var r=s.next();var t=this.ptLocator.locate(u,r);if(t!=h.EXTERIOR){return true}}return false};jsts.operation.overlay.OverlayOp.prototype.computeGeometry=function(u,q,t,s){var r=new l();r.addAll(u);r.addAll(q);r.addAll(t);return this.geomFact.buildGeometry(r)};jsts.operation.overlay.OverlayOp.prototype.createEmptyResult=function(r){var q=null;switch(resultDimension(r,this.arg[0].getGeometry(),this.arg[1].getGeometry())){case -1:q=geomFact.createGeometryCollection();break;case 0:q=geomFact.createPoint(null);break;case 1:q=geomFact.createLineString(null);break;case 2:q=geomFact.createPolygon(null,null);break}return q};jsts.operation.overlay.OverlayOp.prototype.resultDimension=function(s,r,q){var v=r.getDimension();var u=q.getDimension();var t=-1;switch(s){case jsts.operation.overlay.OverlayOp.INTERSECTION:t=Math.min(v,u);break;case jsts.operation.overlay.OverlayOp.UNION:t=Math.max(v,u);break;case jsts.operation.overlay.OverlayOp.DIFFERENCE:t=v;break;case jsts.operation.overlay.OverlayOp.SYMDIFFERENCE:t=Math.max(v,u);break}return t}})();(function(){var a=function(){this.items=new javascript.util.ArrayList();this.subnode=[null,null]};a.getSubnodeIndex=function(b,c){var d=-1;if(b.min>=c){d=1}if(b.max<=c){d=0}return d};a.prototype.getItems=function(){return this.items};a.prototype.add=function(b){this.items.add(b)};a.prototype.addAllItems=function(c){c.addAll(this.items);var d=0,b=2;for(d;d<b;d++){if(this.subnode[d]!==null){this.subnode[d].addAllItems(c)}}return c};a.prototype.addAllItemsFromOverlapping=function(b,c){if(b!==null&&!this.isSearchMatch(b)){return}c.addAll(this.items);if(this.subnode[0]!==null){this.subnode[0].addAllItemsFromOverlapping(b,c)}if(this.subnode[1]!==null){this.subnode[1].addAllItemsFromOverlapping(b,c)}};a.prototype.remove=function(d,e){if(!this.isSearchMatch(d)){return false}var f=false,c=0,b=2;for(c;c<b;c++){if(this.subnode[c]!==null){f=this.subnode[c].remove(d,e);if(f){if(this.subnode[c].isPrunable()){this.subnode[c]=null}break}}}if(f){return f}f=this.items.remove(e);return f};a.prototype.isPrunable=function(){return !(this.hasChildren()||this.hasItems())};a.prototype.hasChildren=function(){var c=0,b=2;for(c;c<b;c++){if(this.subnode[c]!==null){return true}}return false};a.prototype.hasItems=function(){return !this.items.isEmpty()};a.prototype.depth=function(){var d=0,c=0,b=2,e;for(c;c<b;c++){if(this.subnode[c]!==null){e=this.subnode[c].depth();if(e>d){d=e}}}return d+1};a.prototype.size=function(){var d=0,c=0,b=2;for(c;c<b;c++){if(this.subnode[c]!==null){d+=this.subnode[c].size()}}return d+this.items.size()};a.prototype.nodeSize=function(){var d=0,c=0,b=2;for(c;c<b;c++){if(this.subnode[c]!==null){d+=this.subnode[c].nodeSize()}}return d+1};jsts.index.bintree.NodeBase=a})();(function(){var a=function(){this.min=0;this.max=0;if(arguments.length===1){var b=arguments[0];this.init(b.min,b.max)}else{if(arguments.length===2){this.init(arguments[0],arguments[1])}}};a.prototype.init=function(c,b){this.min=c;this.max=b;if(c>b){this.min=b;this.max=c}};a.prototype.getMin=function(){return this.min};a.prototype.getMax=function(){return this.max};a.prototype.getWidth=function(){return(this.max-this.min)};a.prototype.expandToInclude=function(b){if(b.max>this.max){this.max=b.max}if(b.min<this.min){this.min=b.min}};a.prototype.overlaps=function(){if(arguments.length===1){return this.overlapsInterval.apply(this,arguments)}else{return this.overlapsMinMax.apply(this,arguments)}};a.prototype.overlapsInterval=function(b){return this.overlaps(b.min,b.max)};a.prototype.overlapsMinMax=function(c,b){if(this.min>b||this.max<c){return false}return true};a.prototype.contains=function(){var b;if(arguments[0] instanceof jsts.index.bintree.Interval){b=arguments[0];return this.containsMinMax(b.min,b.max)}else{if(arguments.length===1){return this.containsPoint(arguments[0])}else{return this.containsMinMax(arguments[0],arguments[1])}}};a.prototype.containsMinMax=function(c,b){return(c>=this.min&&b<=this.max)};a.prototype.containsPoint=function(b){return(b>=this.min&&b<=this.max)};jsts.index.bintree.Interval=a})();jsts.index.DoubleBits=function(){};jsts.index.DoubleBits.powerOf2=function(a){return Math.pow(2,a)};jsts.index.DoubleBits.exponent=function(a){return jsts.index.DoubleBits.CVTFWD(64,a)-1023};jsts.index.DoubleBits.CVTFWD=function(d,k){var f,c,h,a,j="";var b={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}};var e={32:8,64:11}[d],g=d-e-1;if(!a){f=k<0||1/k<0;if(!isFinite(k)){a=b[d];if(f){a.d+=1<<(d/4-1)}c=Math.pow(2,e)-1;h=0}}if(!a){c={32:127,64:1023}[d];h=Math.abs(k);while(h>=2){c++;h/=2}while(h<1&&c>0){c--;h*=2}if(c<=0){h/=2;j="Zero or Denormal"}if(d===32&&c>254){j="Too big for Single";a={d:f?255:127,c:128,b:0,a:0};c=Math.pow(2,e)-1;h=0}}return c};(function(){var b=jsts.index.DoubleBits;var c=jsts.index.bintree.Interval;var a=function(d){this.pt=0;this.level=0;this.computeKey(d)};a.computeLevel=function(e){var d=e.getWidth(),f;f=b.exponent(d)+1;return f};a.prototype.getPoint=function(){return this.pt};a.prototype.getLevel=function(){return this.level};a.prototype.getInterval=function(){return this.interval};a.prototype.computeKey=function(d){this.level=a.computeLevel(d);this.interval=new c();this.computeInterval(this.level,d);while(!this.interval.contains(d)){this.level+=1;this.computeInterval(this.level,d)}};a.prototype.computeInterval=function(f,e){var d=b.powerOf2(f);this.pt=Math.floor(e.getMin()/d)*d;this.interval.init(this.pt,this.pt+d)};jsts.index.bintree.Key=a})();(function(){var d=jsts.index.bintree.NodeBase;var a=jsts.index.bintree.Key;var c=jsts.index.bintree.Interval;var b=function(e,f){this.items=new javascript.util.ArrayList();this.subnode=[null,null];this.interval=e;this.level=f;this.centre=(e.getMin()+e.getMax())/2};b.prototype=new d();b.constructor=b;b.createNode=function(f){var e,g;e=new a(f);g=new b(e.getInterval(),e.getLevel());return g};b.createExpanded=function(f,g){var e,h;e=new c(g);if(f!==null){e.expandToInclude(f.interval)}h=b.createNode(e);if(f!==null){h.insert(f)}return h};b.prototype.getInterval=function(){return this.interval};b.prototype.isSearchMatch=function(e){return e.overlaps(this.interval)};b.prototype.getNode=function(g){var f=d.getSubnodeIndex(g,this.centre),e;if(f!=-1){e=this.getSubnode(f);return e.getNode(g)}else{return this}};b.prototype.find=function(g){var f=d.getSubnodeIndex(g,this.centre),e;if(f===-1){return this}if(this.subnode[f]!==null){e=this.subnode[f];return e.find(g)}return this};b.prototype.insert=function(g){var e=d.getSubnodeIndex(g.interval,this.centre),f;if(g.level===this.level-1){this.subnode[e]=g}else{f=this.createSubnode(e);f.insert(g);this.subnode[e]=f}};b.prototype.getSubnode=function(e){if(this.subnode[e]===null){this.subnode[e]=this.createSubnode(e)}return this.subnode[e]};b.prototype.createSubnode=function(f){var g,e,j,h;g=0;e=0;switch(f){case 0:g=this.interval.getMin();e=this.centre;break;case 1:g=this.centre;e=this.interval.getMax();break}j=new c(g,e);h=new b(j,this.level-1);return h};jsts.index.bintree.Node=b})();(function(){var a=jsts.index.bintree.Node;var b=jsts.index.bintree.NodeBase;var c=function(){this.subnode=[null,null];this.items=new javascript.util.ArrayList()};c.prototype=new jsts.index.bintree.NodeBase();c.constructor=c;c.origin=0;c.prototype.insert=function(e,g){var d=b.getSubnodeIndex(e,c.origin),f,h;if(d===-1){this.add(g);return}f=this.subnode[d];if(f===null||!f.getInterval().contains(e)){h=a.createExpanded(f,e);this.subnode[d]=h}this.insertContained(this.subnode[d],e,g)};c.prototype.insertContained=function(d,f,h){var e,g;e=jsts.index.IntervalSize.isZeroWidth(f.getMin(),f.getMax());g=e?d.find(f):d.getNode(f);g.add(h)};c.prototype.isSearchMatch=function(d){return true};jsts.index.bintree.Root=c})();(function(){var a=jsts.index.bintree.Interval;var c=jsts.index.bintree.Root;var b=function(){this.root=new c();this.minExtent=1};b.ensureExtent=function(g,e){var f,d;f=g.getMin();d=g.getMax();if(f!==d){return g}if(f===d){f=f-(e/2);d=f+(e/2)}return new a(f,d)};b.prototype.depth=function(){if(this.root!==null){return this.root.depth()}return 0};b.prototype.size=function(){if(this.root!==null){return this.root.size()}return 0};b.prototype.nodeSize=function(){if(this.root!==null){return this.root.nodeSize()}return 0};b.prototype.insert=function(d,e){this.collectStats(d);var f=b.ensureExtent(d,this.minExtent);this.root.insert(f,e)};b.prototype.remove=function(d,e){var f=b.ensureExtent(d,this.minExtent);return this.root.remove(f,e)};b.prototype.iterator=function(){var d=new javascript.util.ArrayList();this.root.addAllItems(d);return d.iterator()};b.prototype.query=function(){if(arguments.length===2){this.queryAndAdd(arguments[0],arguments[1])}else{var d=arguments[0];if(!d instanceof a){d=new a(d,d)}return this.queryInterval(d)}};b.prototype.queryInterval=function(d){var e=new javascript.util.ArrayList();this.query(d,e);return e};b.prototype.queryAndAdd=function(d,e){this.root.addAllItemsFromOverlapping(d,e)};b.prototype.collectStats=function(e){var d=e.getWidth();if(d<this.minExtent&&d>0){this.minExtent=d}};jsts.index.bintree.Bintree=b})();jsts.index.IntervalSize=function(){};jsts.index.IntervalSize.MIN_BINARY_EXPONENT=-50;jsts.index.IntervalSize.isZeroWidth=function(d,a){var e=a-d;if(e===0){return true}var c,b,f;c=Math.max(Math.abs(d),Math.abs(a));b=e/c;f=jsts.index.DoubleBits.exponent(b);return f<=jsts.index.IntervalSize.MIN_BINARY_EXPONENT};jsts.geomgraph.index.SimpleEdgeSetIntersector=function(){};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype=new jsts.geomgraph.index.EdgeSetIntersector();jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.nOverlaps=0;jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections=function(b,d,g){if(d instanceof javascript.util.List){this.computeIntersections2.apply(this,arguments);return}this.nOverlaps=0;for(var f=b.iterator();f.hasNext();){var c=f.next();for(var e=b.iterator();e.hasNext();){var a=e.next();if(g||c!=a){this.computeIntersects(c,a,d)}}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersections2=function(c,a,e){this.nOverlaps=0;for(var g=c.iterator();g.hasNext();){var d=g.next();for(var f=a.iterator();f.hasNext();){var b=f.next();this.computeIntersects(d,b,e)}}};jsts.geomgraph.index.SimpleEdgeSetIntersector.prototype.computeIntersects=function(g,f,a){var e=g.getCoordinates();var d=f.getCoordinates();var c,b;for(c=0;c<e.length-1;c++){for(b=0;b<d.length-1;b++){a.addIntersections(g,c,f,b)}}};jsts.index.ArrayListVisitor=function(){this.items=[]};jsts.index.ArrayListVisitor.prototype.visitItem=function(a){this.items.push(a)};jsts.index.ArrayListVisitor.prototype.getItems=function(){return this.items};(function(){var a=javascript.util.ArrayList;var b=function(){};b.prototype.inputGeom=null;b.prototype.factory=null;b.prototype.pruneEmptyGeometry=true;b.prototype.preserveGeometryCollectionType=true;b.prototype.preserveCollections=false;b.prototype.reserveType=false;b.prototype.getInputGeometry=function(){return this.inputGeom};b.prototype.transform=function(c){this.inputGeom=c;this.factory=c.getFactory();if(c instanceof jsts.geom.Point){return this.transformPoint(c,null)}if(c instanceof jsts.geom.MultiPoint){return this.transformMultiPoint(c,null)}if(c instanceof jsts.geom.LinearRing){return this.transformLinearRing(c,null)}if(c instanceof jsts.geom.LineString){return this.transformLineString(c,null)}if(c instanceof jsts.geom.MultiLineString){return this.transformMultiLineString(c,null)}if(c instanceof jsts.geom.Polygon){return this.transformPolygon(c,null)}if(c instanceof jsts.geom.MultiPolygon){return this.transformMultiPolygon(c,null)}if(c instanceof jsts.geom.GeometryCollection){return this.transformGeometryCollection(c,null)}throw new jsts.error.IllegalArgumentException("Unknown Geometry subtype: "+c.getClass().getName())};b.prototype.createCoordinateSequence=function(c){return this.factory.getCoordinateSequenceFactory().create(c)};b.prototype.copy=function(c){return c.clone()};b.prototype.transformCoordinates=function(d,c){return this.copy(d)};b.prototype.transformPoint=function(c,d){return this.factory.createPoint(this.transformCoordinates(c.getCoordinateSequence(),c))};b.prototype.transformMultiPoint=function(e,g){var d=new a();for(var c=0;c<e.getNumGeometries();c++){var f=this.transformPoint(e.getGeometryN(c),e);if(f==null){continue}if(f.isEmpty()){continue}d.add(f)}return this.factory.buildGeometry(d)};b.prototype.transformLinearRing=function(e,f){var d=this.transformCoordinates(e.getCoordinateSequence(),e);var c=d.length;if(c>0&&c<4&&!this.preserveType){return this.factory.createLineString(d)}return this.factory.createLinearRing(d)};b.prototype.transformLineString=function(c,d){return this.factory.createLineString(this.transformCoordinates(c.getCoordinateSequence(),c))};b.prototype.transformMultiLineString=function(e,g){var d=new a();for(var c=0;c<e.getNumGeometries();c++){var f=this.transformLineString(e.getGeometryN(c),e);if(f==null){continue}if(f.isEmpty()){continue}d.add(f)}return this.factory.buildGeometry(d)};b.prototype.transformPolygon=function(f,g){var k=true;var e=this.transformLinearRing(f.getExteriorRing(),f);if(e==null||!(e instanceof jsts.geom.LinearRing)||e.isEmpty()){k=false}var c=new a();for(var d=0;d<f.getNumInteriorRing();d++){var j=this.transformLinearRing(f.getInteriorRingN(d),f);if(j==null||j.isEmpty()){continue}if(!(j instanceof jsts.geom.LinearRing)){k=false}c.add(j)}if(k){return this.factory.createPolygon(e,c.toArray())}else{var h=new a();if(e!=null){h.add(e)}h.addAll(c);return this.factory.buildGeometry(h)}};b.prototype.transformMultiPolygon=function(e,g){var d=new a();for(var c=0;c<e.getNumGeometries();c++){var f=this.transformPolygon(e.getGeometryN(c),e);if(f==null){continue}if(f.isEmpty()){continue}d.add(f)}return this.factory.buildGeometry(d)};b.prototype.transformGeometryCollection=function(e,g){var d=new a();for(var c=0;c<e.getNumGeometries();c++){var f=this.transform(e.getGeometryN(c));if(f==null){continue}if(this.pruneEmptyGeometry&&f.isEmpty()){continue}d.add(f)}if(this.preserveGeometryCollectionType){return this.factory.createGeometryCollection(GeometryFactory.toGeometryArray(d))}return this.factory.buildGeometry(d)};jsts.geom.util.GeometryTransformer=b})();(function(){var e=jsts.operation.overlay.snap.LineStringSnapper;var d=jsts.geom.PrecisionModel;var b=javascript.util.TreeSet;var c=function(f,h,g){this.snapTolerance=f;this.snapPts=h;this.isSelfSnap=g||false};c.prototype=new jsts.geom.util.GeometryTransformer();c.prototype.snapTolerance=null;c.prototype.snapPts=null;c.prototype.isSelfSnap=false;c.prototype.transformCoordinates=function(j,h){var g=j;var f=this.snapLine(g,this.snapPts);return f};c.prototype.snapLine=function(g,h){var f=new e(g,this.snapTolerance);f.setAllowSnappingToSourceVertices(this.isSelfSnap);return f.snapTo(h)};var a=function(f){this.srcGeom=f};a.SNAP_PRECISION_FACTOR=1e-9;a.computeOverlaySnapTolerance=function(j){if(arguments.length===2){return a.computeOverlaySnapTolerance2.apply(this,arguments)}var f=this.computeSizeBasedSnapTolerance(j);var h=j.getPrecisionModel();if(h.getType()==d.FIXED){var k=(1/h.getScale())*2/1.415;if(k>f){f=k}}return f};a.computeSizeBasedSnapTolerance=function(j){var f=j.getEnvelopeInternal();var h=Math.min(f.getHeight(),f.getWidth());var k=h*a.SNAP_PRECISION_FACTOR;return k};a.computeOverlaySnapTolerance2=function(g,f){return Math.min(this.computeOverlaySnapTolerance(g),this.computeOverlaySnapTolerance(f))};a.snap=function(h,f,g){var l=[];var k=new a(h);l[0]=k.snapTo(f,g);var j=new a(f);l[1]=j.snapTo(l[0],g);return l};a.snapToSelf=function(g,f,h){var j=new a(g);return j.snapToSelf(f,h)};a.prototype.srcGeom=null;a.prototype.snapTo=function(j,g){var h=this.extractTargetCoordinates(j);var f=new c(g,h);return f.transform(this.srcGeom)};a.prototype.snapToSelf=function(h,k){var l=this.extractTargetCoordinates(srcGeom);var g=new c(h,l,true);var j=g.transform(srcGeom);var f=j;if(k&&f instanceof Polygonal){f=j.buffer(0)}return f};a.prototype.extractTargetCoordinates=function(j){var f=new b();var k=j.getCoordinates();for(var h=0;h<k.length;h++){f.add(k[h])}return f.toArray()};a.prototype.computeSnapTolerance=function(g){var f=this.computeMinimumSegmentLength(g);var h=f/10;return h};a.prototype.computeMinimumSegmentLength=function(j){var f=Number.MAX_VALUE;for(var h=0;h<j.length-1;h++){var g=j[h].distance(j[h+1]);if(g<f){f=g}}return f};jsts.operation.overlay.snap.GeometrySnapper=a})();(function(){var c=jsts.operation.overlay.OverlayOp;var b=jsts.operation.overlay.snap.GeometrySnapper;var a=function(e,d){this.geom=[];this.geom[0]=e;this.geom[1]=d;this.computeSnapTolerance()};a.overlayOp=function(e,d,f){var g=new a(e,d);return g.getResultGeometry(f)};a.intersection=function(e,d){return this.overlayOp(e,d,c.INTERSECTION)};a.union=function(e,d){return this.overlayOp(e,d,c.UNION)};a.difference=function(e,d){return overlayOp(e,d,c.DIFFERENCE)};a.symDifference=function(e,d){return overlayOp(e,d,c.SYMDIFFERENCE)};a.prototype.geom=null;a.prototype.snapTolerance=null;a.prototype.computeSnapTolerance=function(){this.snapTolerance=b.computeOverlaySnapTolerance(this.geom[0],this.geom[1])};a.prototype.getResultGeometry=function(e){var f=this.snap(this.geom);var d=c.overlayOp(f[0],f[1],e);return this.prepareResult(d)};a.prototype.selfSnap=function(d){var e=new b(d);var f=e.snapTo(d,this.snapTolerance);return f};a.prototype.snap=function(d){remGeom=d;var e=b.snap(remGeom[0],remGeom[1],this.snapTolerance);return e};a.prototype.prepareResult=function(d){return d};a.prototype.cbr=null;a.prototype.removeCommonBits=function(d){this.cbr=new jsts.precision.CommonBitsRemover();this.cbr.add(this.geom[0]);this.cbr.add(this.geom[1]);var e=[];e[0]=cbr.removeCommonBits(this.geom[0].clone());e[1]=cbr.removeCommonBits(this.geom[1].clone());return e};jsts.operation.overlay.snap.SnapOverlayOp=a})();jsts.noding.Octant=function(){throw jsts.error.AbstractMethodInvocationError()};jsts.noding.Octant.octant=function(b,a){if(b instanceof jsts.geom.Coordinate){return jsts.noding.Octant.octant2.apply(this,arguments)}if(b===0&&a===0){throw new jsts.error.IllegalArgumentError("Cannot compute the octant for point ( "+b+", "+a+" )")}var d=Math.abs(b);var c=Math.abs(a);if(b>=0){if(a>=0){if(d>=c){return 0}else{return 1}}else{if(d>=c){return 7}else{return 6}}}else{if(a>=0){if(d>=c){return 3}else{return 2}}else{if(d>=c){return 4}else{return 5}}}};jsts.noding.Octant.octant2=function(d,c){var b=c.x-d.x;var a=c.y-d.y;if(b===0&&a===0){throw new jsts.error.IllegalArgumentError("Cannot compute the octant for two identical points "+d)}return jsts.noding.Octant.octant(b,a)};jsts.operation.union.UnionInteracting=function(b,a){this.g0=b;this.g1=a;this.geomFactory=b.getFactory();this.interacts0=[];this.interacts1=[]};jsts.operation.union.UnionInteracting.union=function(b,a){var c=new jsts.operation.union.UnionInteracting(b,a);return c.union()};jsts.operation.union.UnionInteracting.prototype.geomFactory=null;jsts.operation.union.UnionInteracting.prototype.g0=null;jsts.operation.union.UnionInteracting.prototype.g1=null;jsts.operation.union.UnionInteracting.prototype.interacts0=null;jsts.operation.union.UnionInteracting.prototype.interacts1=null;jsts.operation.union.UnionInteracting.prototype.union=function(){this.computeInteracting();var a=this.extractElements(this.g0,this.interacts0,true);var f=this.extractElements(this.g1,this.interacts1,true);if(a.isEmpty()||f.isEmpty()){}var c=in0.union(f);var e=this.extractElements(this.g0,this.interacts0,false);var d=this.extractElements(this.g1,this.interacts1,false);var b=jsts.geom.util.GeometryCombiner.combine(c,e,d);return b};jsts.operation.union.UnionInteracting.prototype.bufferUnion=function(d,b){var a=d.getFactory();var c=a.createGeometryCollection([d,b]);var e=c.buffer(0);return e};jsts.operation.union.UnionInteracting.prototype.computeInteracting=function(d){if(!d){for(var e=0,b=this.g0.getNumGeometries();e<b;e++){var f=this.g0.getGeometryN(e);this.interacts0[e]=this.computeInteracting(f)}}else{var a=false;for(var e=0,b=g1.getNumGeometries();e<b;e++){var c=this.g1.getGeometryN(e);var g=c.getEnvelopeInternal().intersects(d.getEnvelopeInternal());if(g){this.interacts1[e]=true;a=true}}return a}};jsts.operation.union.UnionInteracting.prototype.extractElements=function(e,g,c){var b=[];for(var d=0,a=e.getNumGeometries();d<a;d++){var f=e.getGeometryN(d);if(g[d]===c){b.push(f)}}return this.geomFactory.buildGeometry(b)};jsts.operation.union.PointGeometryUnion=function(b,a){this.pointGeom=b;this.otherGeom=a;this.geomFact=a.getFactory()};jsts.operation.union.PointGeometryUnion.union=function(c,b){var a=new jsts.operation.union.PointGeometryUnion(c,b);return a.union()};jsts.operation.union.PointGeometryUnion.prototype.pointGeom=null;jsts.operation.union.PointGeometryUnion.prototype.otherGeom=null;jsts.operation.union.PointGeometryUnion.prototype.geomFact=null;jsts.operation.union.PointGeometryUnion.prototype.union=function(){var g=new jsts.algorithm.PointLocator();var c=[];for(var f=0,d=this.pointGeom.getNumGeometries();f<d;f++){var n=this.pointGeom.getGeometryN(f);var h=n.getCoordinate();var k=g.locate(h,this.otherGeom);if(k===jsts.geom.Location.EXTERIOR){var a=true;for(var e=c.length;f--;){if(c[e].equals(h)){a=false;break}}if(a){c.push(h)}}}c.sort(function(j,l){return j.compareTo(l)});if(c.length===0){return this.otherGeom}var b=null;var m=jsts.geom.CoordinateArrays.toCoordinateArray(c);if(m.length===1){b=this.geomFact.createPoint(m[0])}else{b=this.geomFact.createMultiPoint(m)}return jsts.geom.util.GeometryCombiner.combine(b,this.otherGeom)};jsts.noding.IntersectionFinderAdder=function(a){this.li=a;this.interiorIntersections=new javascript.util.ArrayList()};jsts.noding.IntersectionFinderAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionFinderAdder.constructor=jsts.noding.IntersectionFinderAdder;jsts.noding.IntersectionFinderAdder.prototype.li=null;jsts.noding.IntersectionFinderAdder.prototype.interiorIntersections=null;jsts.noding.IntersectionFinderAdder.prototype.getInteriorIntersections=function(){return this.interiorIntersections};jsts.noding.IntersectionFinderAdder.prototype.processIntersections=function(h,d,g,c){if(h===g&&d===c){return}var f=h.getCoordinates()[d];var e=h.getCoordinates()[d+1];var b=g.getCoordinates()[c];var a=g.getCoordinates()[c+1];this.li.computeIntersection(f,e,b,a);if(this.li.hasIntersection()){if(this.li.isInteriorIntersection()){for(var j=0;j<this.li.getIntersectionNum();j++){this.interiorIntersections.add(this.li.getIntersection(j))}h.addIntersections(this.li,d,0);g.addIntersections(this.li,c,1)}}};jsts.noding.IntersectionFinderAdder.prototype.isDone=function(){return false};jsts.noding.snapround.MCIndexSnapRounder=function(a){this.pm=a;this.li=new jsts.algorithm.RobustLineIntersector();this.li.setPrecisionModel(a);this.scaleFactor=a.getScale()};jsts.noding.snapround.MCIndexSnapRounder.prototype=new jsts.noding.Noder();jsts.noding.snapround.MCIndexSnapRounder.constructor=jsts.noding.snapround.MCIndexSnapRounder;jsts.noding.snapround.MCIndexSnapRounder.prototype.pm=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.li=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.scaleFactor=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.noder=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.pointSnapper=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.nodedSegStrings=null;jsts.noding.snapround.MCIndexSnapRounder.prototype.getNodedSubstrings=function(){return jsts.noding.NodedSegmentString.getNodedSubstrings(this.nodedSegStrings)};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeNodes=function(a){this.nodedSegStrings=a;this.noder=new jsts.noding.MCIndexNoder();this.pointSnapper=new jsts.noding.snapround.MCIndexPointSnapper(this.noder.getIndex());this.snapRound(a,this.li)};jsts.noding.snapround.MCIndexSnapRounder.prototype.snapRound=function(b,a){var c=this.findInteriorIntersections(b,a);this.computeIntersectionSnaps(c);this.computeVertexSnaps(b)};jsts.noding.snapround.MCIndexSnapRounder.prototype.findInteriorIntersections=function(c,a){var b=new jsts.noding.IntersectionFinderAdder(a);this.noder.setSegmentIntersector(b);this.noder.computeNodes(c);return b.getInteriorIntersections()};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeIntersectionSnaps=function(d){for(var c=d.iterator();c.hasNext();){var b=c.next();var a=new jsts.noding.snapround.HotPixel(b,this.scaleFactor,this.li);this.pointSnapper.snap(a)}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps=function(a){if(a instanceof jsts.noding.NodedSegmentString){this.computeVertexSnaps2.apply(this,arguments);return}for(var c=a.iterator();c.hasNext();){var b=c.next();this.computeVertexSnaps(b)}};jsts.noding.snapround.MCIndexSnapRounder.prototype.computeVertexSnaps2=function(f){var d=f.getCoordinates();for(var c=0;c<d.length-1;c++){var b=new jsts.noding.snapround.HotPixel(d[c],this.scaleFactor,this.li);var a=this.pointSnapper.snap(b,f,c);if(a){f.addIntersection(d[c],c)}}};jsts.operation.valid.ConnectedInteriorTester=function(a){this.geomGraph=a;this.geometryFactory=new jsts.geom.GeometryFactory();this.disconnectedRingcoord=null};jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint=function(d,c){var b=0,a=d.length;for(b;b<a;b++){if(!d[b].equals(c)){return d[b]}}return null};jsts.operation.valid.ConnectedInteriorTester.prototype.getCoordinate=function(){return this.disconnectedRingcoord};jsts.operation.valid.ConnectedInteriorTester.prototype.isInteriorsConnected=function(){var b=new javascript.util.ArrayList();this.geomGraph.computeSplitEdges(b);var c=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());c.addEdges(b);this.setInteriorEdgesInResult(c);c.linkResultDirectedEdges();var a=this.buildEdgeRings(c.getEdgeEnds());this.visitShellInteriors(this.geomGraph.getGeometry(),c);return !this.hasUnvisitedShellEdge(a)};jsts.operation.valid.ConnectedInteriorTester.prototype.setInteriorEdgesInResult=function(b){var a=b.getEdgeEnds().iterator(),c;while(a.hasNext()){c=a.next();if(c.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){c.setInResult(true)}}};jsts.operation.valid.ConnectedInteriorTester.prototype.buildEdgeRings=function(c){var a=new javascript.util.ArrayList();for(var e=c.iterator();e.hasNext();){var h=e.next();if(h.isInResult()&&h.getEdgeRing()==null){var g=new jsts.operation.overlay.MaximalEdgeRing(h,this.geometryFactory);g.linkDirectedEdgesForMinimalEdgeRings();var f=g.buildMinimalRings();var d=0,b=f.length;for(d;d<b;d++){a.add(f[d])}}}return a};jsts.operation.valid.ConnectedInteriorTester.prototype.visitShellInteriors=function(c,d){if(c instanceof jsts.geom.Polygon){var e=c;this.visitInteriorRing(e.getExteriorRing(),d)}if(c instanceof jsts.geom.MultiPolygon){var b=c;for(var a=0;a<b.getNumGeometries();a++){var e=b.getGeometryN(a);this.visitInteriorRing(e.getExteriorRing(),d)}}};jsts.operation.valid.ConnectedInteriorTester.prototype.visitInteriorRing=function(b,c){var g=b.getCoordinates();var j=g[0];var f=jsts.operation.valid.ConnectedInteriorTester.findDifferentPoint(g,j);var d=c.findEdgeInSameDirection(j,f);var h=c.findEdgeEnd(d);var a=null;if(h.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){a=h}else{if(h.getSym().getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)==jsts.geom.Location.INTERIOR){a=h.getSym()}}this.visitLinkedDirectedEdges(a)};jsts.operation.valid.ConnectedInteriorTester.prototype.visitLinkedDirectedEdges=function(c){var a=c;var b=c;do{b.setVisited(true);b=b.getNext()}while(b!=a)};jsts.operation.valid.ConnectedInteriorTester.prototype.hasUnvisitedShellEdge=function(a){for(var d=0;d<a.size();d++){var f=a.get(d);if(f.isHole()){continue}var b=f.getEdges();var e=b[0];if(e.getLabel().getLocation(0,jsts.geomgraph.Position.RIGHT)!=jsts.geom.Location.INTERIOR){continue}for(var c=0;c<b.length;c++){e=b[c];if(!e.isVisited()){disconnectedRingcoord=e.getCoordinate();return true}}}return false};jsts.index.chain.MonotoneChainSelectAction=function(){this.tempEnv1=new jsts.geom.Envelope();this.selectedSegment=new jsts.geom.LineSegment()};jsts.index.chain.MonotoneChainSelectAction.prototype.tempEnv1=null;jsts.index.chain.MonotoneChainSelectAction.prototype.selectedSegment=null;jsts.index.chain.MonotoneChainSelectAction.prototype.select=function(a,b){a.getLineSegment(b,this.selectedSegment);this.select2(this.selectedSegment)};jsts.index.chain.MonotoneChainSelectAction.prototype.select2=function(a){};jsts.algorithm.MCPointInRing=function(a){this.ring=a;this.tree=null;this.crossings=0;this.interval=new jsts.index.bintree.Interval();this.buildIndex()};jsts.algorithm.MCPointInRing.MCSelecter=function(b,a){this.parent=a;this.p=b};jsts.algorithm.MCPointInRing.MCSelecter.prototype=new jsts.index.chain.MonotoneChainSelectAction;jsts.algorithm.MCPointInRing.MCSelecter.prototype.constructor=jsts.algorithm.MCPointInRing.MCSelecter;jsts.algorithm.MCPointInRing.MCSelecter.prototype.select2=function(a){this.parent.testLineSegment.apply(this.parent,[this.p,a])};jsts.algorithm.MCPointInRing.prototype.buildIndex=function(){this.tree=new jsts.index.bintree.Bintree();var e=jsts.geom.CoordinateArrays.removeRepeatedPoints(this.ring.getCoordinates());var c=jsts.index.chain.MonotoneChainBuilder.getChains(e);for(var a=0;a<c.length;a++){var d=c[a];var b=d.getEnvelope();this.interval.min=b.getMinY();this.interval.max=b.getMaxY();this.tree.insert(this.interval,d)}};jsts.algorithm.MCPointInRing.prototype.isInside=function(e){this.crossings=0;var f=new jsts.geom.Envelope(-Number.MAX_VALUE,Number.MAX_VALUE,e.y,e.y);this.interval.min=e.y;this.interval.max=e.y;var a=this.tree.query(this.interval);var b=new jsts.algorithm.MCPointInRing.MCSelecter(e,this);for(var c=a.iterator();c.hasNext();){var d=c.next();this.testMonotoneChain(f,b,d)}if((this.crossings%2)==1){return true}return false};jsts.algorithm.MCPointInRing.prototype.testMonotoneChain=function(c,a,b){b.select(c,a)};jsts.algorithm.MCPointInRing.prototype.testLineSegment=function(b,e){var d,c,g,a,f,j,h;j=e.p0;h=e.p1;c=j.x-b.x;g=j.y-b.y;a=h.x-b.x;f=h.y-b.y;if(((g>0)&&(f<=0))||((f>0)&&(g<=0))){d=jsts.algorithm.RobustDeterminant.signOfDet2x2(c,g,a,f)/(f-g);if(0<d){this.crossings++}}};jsts.operation.valid.TopologyValidationError=function(a,b){this.errorType=a;this.pt=null;if(b!=null){this.pt=b.clone()}};jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL=2;jsts.operation.valid.TopologyValidationError.NESTED_HOLES=3;jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR=4;jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION=5;jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION=6;jsts.operation.valid.TopologyValidationError.NESTED_SHELLS=7;jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS=8;jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS=9;jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE=10;jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED=11;jsts.operation.valid.TopologyValidationError.prototype.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];jsts.operation.valid.TopologyValidationError.prototype.getCoordinate=function(){return this.pt};jsts.operation.valid.TopologyValidationError.prototype.getErrorType=function(){return this.errorType};jsts.operation.valid.TopologyValidationError.prototype.getMessage=function(){return this.errMsg[this.errorType]};jsts.operation.valid.TopologyValidationError.prototype.toString=function(){var a="";if(this.pt!=null){a=" at or near point "+this.pt;return this.getMessage()+a}return a};(function(){var c=jsts.geom.Geometry;var b=javascript.util.TreeSet;var a=javascript.util.Arrays;jsts.geom.GeometryCollection=function(e,d){this.geometries=e||[];this.factory=d};jsts.geom.GeometryCollection.prototype=new c();jsts.geom.GeometryCollection.constructor=jsts.geom.GeometryCollection;jsts.geom.GeometryCollection.prototype.isEmpty=function(){for(var e=0,d=this.geometries.length;e<d;e++){var f=this.getGeometryN(e);if(!f.isEmpty()){return false}}return true};jsts.geom.Geometry.prototype.getArea=function(){var f=0;for(var e=0,d=this.geometries.length;e<d;e++){f+=this.getGeometryN(e).getArea()}return f};jsts.geom.Geometry.prototype.getLength=function(){var f=0;for(var e=0,d=this.geometries.length;e<d;e++){f+=this.getGeometryN(e).getLength()}return f};jsts.geom.GeometryCollection.prototype.getCoordinate=function(){if(this.isEmpty()){return null}return this.getGeometryN(0).getCoordinate()};jsts.geom.GeometryCollection.prototype.getCoordinates=function(){var l=[];var e=-1;for(var g=0,d=this.geometries.length;g<d;g++){var h=this.getGeometryN(g);var m=h.getCoordinates();for(var f=0;f<m.length;f++){e++;l[e]=m[f]}}return l};jsts.geom.GeometryCollection.prototype.getNumGeometries=function(){return this.geometries.length};jsts.geom.GeometryCollection.prototype.getGeometryN=function(e){var d=this.geometries[e];if(d instanceof jsts.geom.Coordinate){d=new jsts.geom.Point(d)}return d};jsts.geom.GeometryCollection.prototype.equalsExact=function(e,f){if(!this.isEquivalentClass(e)){return false}if(this.geometries.length!==e.geometries.length){return false}for(var g=0,d=this.geometries.length;g<d;g++){var h=this.getGeometryN(g);if(!h.equalsExact(e.getGeometryN(g),f)){return false}}return true};jsts.geom.GeometryCollection.prototype.clone=function(){var f=[];for(var e=0,d=this.geometries.length;e<d;e++){f.push(this.geometries[e].clone())}return this.factory.createGeometryCollection(f)};jsts.geom.GeometryCollection.prototype.normalize=function(){for(var e=0,d=this.geometries.length;e<d;e++){this.getGeometryN(e).normalize()}this.geometries.sort()};jsts.geom.GeometryCollection.prototype.compareToSameClass=function(f){var e=new b(a.asList(this.geometries));var d=new b(a.asList(f.geometries));return this.compare(e,d)};jsts.geom.GeometryCollection.prototype.apply=function(f){if(f instanceof jsts.geom.GeometryFilter||f instanceof jsts.geom.GeometryComponentFilter){f.filter(this);for(var e=0,d=this.geometries.length;e<d;e++){this.getGeometryN(e).apply(f)}}else{if(f instanceof jsts.geom.CoordinateFilter){for(var e=0,d=this.geometries.length;e<d;e++){this.getGeometryN(e).apply(f)}}else{if(f instanceof jsts.geom.CoordinateSequenceFilter){this.apply2.apply(this,arguments)}}}};jsts.geom.GeometryCollection.prototype.apply2=function(e){if(this.geometries.length==0){return}for(var d=0;d<this.geometries.length;d++){this.geometries[d].apply(e);if(e.isDone()){break}}if(e.isGeometryChanged()){}};jsts.geom.GeometryCollection.prototype.getDimension=function(){var f=jsts.geom.Dimension.FALSE;for(var e=0,d=this.geometries.length;e<d;e++){var g=this.getGeometryN(e);f=Math.max(f,g.getDimension())}return f};jsts.geom.GeometryCollection.prototype.computeEnvelopeInternal=function(){var f=new jsts.geom.Envelope();for(var e=0,d=this.geometries.length;e<d;e++){var g=this.getGeometryN(e);f.expandToInclude(g.getEnvelopeInternal())}return f};jsts.geom.GeometryCollection.prototype.CLASS_NAME="jsts.geom.GeometryCollection"})();(function(){jsts.geom.MultiPolygon=function(b,a){this.geometries=b||[];this.factory=a};jsts.geom.MultiPolygon.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPolygon.constructor=jsts.geom.MultiPolygon;jsts.geom.MultiPolygon.prototype.getBoundary=function(){if(this.isEmpty()){return this.getFactory().createMultiLineString(null)}var a=[];for(var d=0;d<this.geometries.length;d++){var c=this.geometries[d];var e=c.getBoundary();for(var b=0;b<e.getNumGeometries();b++){a.push(e.getGeometryN(b))}}return this.getFactory().createMultiLineString(a)};jsts.geom.MultiPolygon.prototype.equalsExact=function(a,b){if(!this.isEquivalentClass(a)){return false}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,a,b)};jsts.geom.MultiPolygon.prototype.CLASS_NAME="jsts.geom.MultiPolygon"})();jsts.geom.CoordinateSequenceFilter=function(){};jsts.geom.CoordinateSequenceFilter.prototype.filter=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isDone=jsts.abstractFunc;jsts.geom.CoordinateSequenceFilter.prototype.isGeometryChanged=jsts.abstractFunc;jsts.noding.snapround.HotPixel=function(c,b,a){this.corner=[];this.originalPt=c;this.pt=c;this.scaleFactor=b;this.li=a;if(this.scaleFactor!==1){this.pt=new jsts.geom.Coordinate(this.scale(c.x),this.scale(c.y));this.p0Scaled=new jsts.geom.Coordinate();this.p1Scaled=new jsts.geom.Coordinate()}this.initCorners(this.pt)};jsts.noding.snapround.HotPixel.prototype.li=null;jsts.noding.snapround.HotPixel.prototype.pt=null;jsts.noding.snapround.HotPixel.prototype.originalPt=null;jsts.noding.snapround.HotPixel.prototype.ptScaled=null;jsts.noding.snapround.HotPixel.prototype.p0Scaled=null;jsts.noding.snapround.HotPixel.prototype.p1Scaled=null;jsts.noding.snapround.HotPixel.prototype.scaleFactor=undefined;jsts.noding.snapround.HotPixel.prototype.minx=undefined;jsts.noding.snapround.HotPixel.prototype.maxx=undefined;jsts.noding.snapround.HotPixel.prototype.miny=undefined;jsts.noding.snapround.HotPixel.prototype.maxy=undefined;jsts.noding.snapround.HotPixel.prototype.corner=null;jsts.noding.snapround.HotPixel.prototype.safeEnv=null;jsts.noding.snapround.HotPixel.prototype.getCoordinate=function(){return this.originalPt};jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR=0.75;jsts.noding.snapround.HotPixel.prototype.getSafeEnvelope=function(){if(this.safeEnv===null){var a=jsts.noding.snapround.HotPixel.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new jsts.geom.Envelope(this.originalPt.x-a,this.originalPt.x+a,this.originalPt.y-a,this.originalPt.y+a)}return this.safeEnv};jsts.noding.snapround.HotPixel.prototype.initCorners=function(b){var a=0.5;this.minx=b.x-a;this.maxx=b.x+a;this.miny=b.y-a;this.maxy=b.y+a;this.corner[0]=new jsts.geom.Coordinate(this.maxx,this.maxy);this.corner[1]=new jsts.geom.Coordinate(this.minx,this.maxy);this.corner[2]=new jsts.geom.Coordinate(this.minx,this.miny);this.corner[3]=new jsts.geom.Coordinate(this.maxx,this.miny)};jsts.noding.snapround.HotPixel.prototype.scale=function(a){return Math.round(a*this.scaleFactor)};jsts.noding.snapround.HotPixel.prototype.intersects=function(b,a){if(this.scaleFactor===1){return this.intersectsScaled(b,a)}this.copyScaled(b,this.p0Scaled);this.copyScaled(a,this.p1Scaled);return this.intersectsScaled(this.p0Scaled,this.p1Scaled)};jsts.noding.snapround.HotPixel.prototype.copyScaled=function(a,b){b.x=this.scale(a.x);b.y=this.scale(a.y)};jsts.noding.snapround.HotPixel.prototype.intersectsScaled=function(h,g){var e=Math.min(h.x,g.x);var b=Math.max(h.x,g.x);var d=Math.min(h.y,g.y);var a=Math.max(h.y,g.y);var c=this.maxx<e||this.minx>b||this.maxy<d||this.miny>a;if(c){return false}var f=this.intersectsToleranceSquare(h,g);jsts.util.Assert.isTrue(!(c&&f),"Found bad envelope test");return f};jsts.noding.snapround.HotPixel.prototype.intersectsToleranceSquare=function(d,c){var b=false;var a=false;this.li.computeIntersection(d,c,this.corner[0],this.corner[1]);if(this.li.isProper()){return true}this.li.computeIntersection(d,c,this.corner[1],this.corner[2]);if(this.li.isProper()){return true}if(this.li.hasIntersection()){b=true}this.li.computeIntersection(d,c,this.corner[2],this.corner[3]);if(this.li.isProper()){return true}if(this.li.hasIntersection()){a=true}this.li.computeIntersection(d,c,this.corner[3],this.corner[0]);if(this.li.isProper()){return true}if(b&&a){return true}if(d.equals(this.pt)){return true}if(c.equals(this.pt)){return true}return false};jsts.noding.snapround.HotPixel.prototype.intersectsPixelClosure=function(b,a){this.li.computeIntersection(b,a,this.corner[0],this.corner[1]);if(this.li.hasIntersection()){return true}this.li.computeIntersection(b,a,this.corner[1],this.corner[2]);if(this.li.hasIntersection()){return true}this.li.computeIntersection(b,a,this.corner[2],this.corner[3]);if(this.li.hasIntersection()){return true}this.li.computeIntersection(b,a,this.corner[3],this.corner[0]);if(this.li.hasIntersection()){return true}return false};jsts.noding.snapround.HotPixel.prototype.addSnappedNode=function(a,b){var d=a.getCoordinate(b);var c=a.getCoordinate(b+1);if(this.intersects(d,c)){a.addIntersection(this.getCoordinate(),b);return true}return false};jsts.operation.buffer.BufferInputLineSimplifier=function(a){this.inputLine=a};jsts.operation.buffer.BufferInputLineSimplifier.simplify=function(b,c){var a=new jsts.operation.buffer.BufferInputLineSimplifier(b);return a.simplify(c)};jsts.operation.buffer.BufferInputLineSimplifier.INIT=0;jsts.operation.buffer.BufferInputLineSimplifier.DELETE=1;jsts.operation.buffer.BufferInputLineSimplifier.KEEP=1;jsts.operation.buffer.BufferInputLineSimplifier.prototype.inputLine=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.distanceTol=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeleted=null;jsts.operation.buffer.BufferInputLineSimplifier.prototype.angleOrientation=jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE;jsts.operation.buffer.BufferInputLineSimplifier.prototype.simplify=function(b){this.distanceTol=Math.abs(b);if(b<0){this.angleOrientation=jsts.algorithm.CGAlgorithms.CLOCKWISE}this.isDeleted=[];this.isDeleted.length=this.inputLine.length;var a=false;do{a=this.deleteShallowConcavities()}while(a);return this.collapseLine()};jsts.operation.buffer.BufferInputLineSimplifier.prototype.deleteShallowConcavities=function(){var c=1;var d=this.inputLine.length-1;var b=this.findNextNonDeletedIndex(c);var f=this.findNextNonDeletedIndex(b);var a=false;while(f<this.inputLine.length){var e=false;if(this.isDeletable(c,b,f,this.distanceTol)){this.isDeleted[b]=jsts.operation.buffer.BufferInputLineSimplifier.DELETE;e=true;a=true}if(e){c=f}else{c=b}b=this.findNextNonDeletedIndex(c);f=this.findNextNonDeletedIndex(b)}return a};jsts.operation.buffer.BufferInputLineSimplifier.prototype.findNextNonDeletedIndex=function(a){var b=a+1;while(b<this.inputLine.length&&this.isDeleted[b]===jsts.operation.buffer.BufferInputLineSimplifier.DELETE){b++}return b};jsts.operation.buffer.BufferInputLineSimplifier.prototype.collapseLine=function(){var b=[];for(var a=0;a<this.inputLine.length;a++){if(this.isDeleted[a]!==jsts.operation.buffer.BufferInputLineSimplifier.DELETE){b.push(this.inputLine[a])}}return b};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isDeletable=function(d,c,b,a){var g=this.inputLine[d];var f=this.inputLine[c];var e=this.inputLine[b];if(!this.isConcave(g,f,e)){return false}if(!this.isShallow(g,f,e,a)){return false}return this.isShallowSampled(g,f,d,b,a)};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowConcavity=function(g,f,d,b){var a=jsts.algorithm.CGAlgorithms.computeOrientation(g,f,d);var c=(a===this.angleOrientation);if(!c){return false}var e=jsts.algorithm.CGAlgorithms.distancePointLine(f,g,d);return e<b};jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK=10;jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallowSampled=function(g,f,d,c,a){var e=parseInt((c-d)/jsts.operation.buffer.BufferInputLineSimplifier.NUM_PTS_TO_CHECK);if(e<=0){e=1}for(var b=d;b<c;b+=e){if(!this.isShallow(g,f,this.inputLine[b],a)){return false}}return true};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isShallow=function(e,d,b,a){var c=jsts.algorithm.CGAlgorithms.distancePointLine(d,e,b);return c<a};jsts.operation.buffer.BufferInputLineSimplifier.prototype.isConcave=function(e,d,b){var a=jsts.algorithm.CGAlgorithms.computeOrientation(e,d,b);var c=(a===this.angleOrientation);return c};jsts.geom.CoordinateList=function(b,a){a=(a===undefined)?true:a;if(b!==undefined){this.add(b,a)}};jsts.geom.CoordinateList.prototype=new Array();jsts.geom.CoordinateList.prototype.add=function(d,a,c){if(d instanceof jsts.geom.Coordinate){return this.addCoordinate.apply(this,arguments)}c=c||true;if(c){for(var b=0;b<d.length;b++){this.addCoordinate(d[b],a)}}else{for(var b=d.length-1;b>=0;b--){this.addCoordinate(d[b],a)}}return true};jsts.geom.CoordinateList.prototype.addCoordinate=function(c,a){if(!a){if(this.length>=1){var b=this[this.length-1];if(b.equals2D(c)){return}}}this.push(c)};jsts.geom.CoordinateList.prototype.insertCoordinate=function(b,e,a){if(!a){var c=b>0?b-1:-1;if(c!==-1&&this[c].equals2D(e)){return}var d=b<this.length-1?b+1:-1;if(d!==-1&&this[d].equals2D(e)){return}}this.splice(b,0,e)};jsts.geom.CoordinateList.prototype.closeRing=function(){if(this.length>0){this.addCoordinate(new jsts.geom.Coordinate(this[0]),false)}};jsts.geom.CoordinateList.prototype.toArray=function(){var c,b,a;c=0,b=this.length,a=new Array(b);for(c;c<b;c++){a[c]=this[c]}return a};jsts.geom.CoordinateList.prototype.toCoordinateArray=function(){return this.toArray()};jsts.operation.overlay.MaximalEdgeRing=function(b,a){jsts.geomgraph.EdgeRing.call(this,b,a)};jsts.operation.overlay.MaximalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MaximalEdgeRing.constructor=jsts.operation.overlay.MaximalEdgeRing;jsts.operation.overlay.MaximalEdgeRing.prototype.getNext=function(a){return a.getNext()};jsts.operation.overlay.MaximalEdgeRing.prototype.setEdgeRing=function(b,a){b.setEdgeRing(a)};jsts.operation.overlay.MaximalEdgeRing.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this.startDe;do{var a=b.getNode();a.getEdges().linkMinimalDirectedEdges(this);b=b.getNext()}while(b!=this.startDe)};jsts.operation.overlay.MaximalEdgeRing.prototype.buildMinimalRings=function(){var a=[];var c=this.startDe;do{if(c.getMinEdgeRing()===null){var b=new jsts.operation.overlay.MinimalEdgeRing(c,this.geometryFactory);a.push(b)}c=c.getNext()}while(c!=this.startDe);return a};jsts.algorithm.CentroidPoint=function(){this.centSum=new jsts.geom.Coordinate()};jsts.algorithm.CentroidPoint.prototype.ptCount=0;jsts.algorithm.CentroidPoint.prototype.centSum=null;jsts.algorithm.CentroidPoint.prototype.add=function(b){if(b instanceof jsts.geom.Point){this.add2(b.getCoordinate())}else{if(b instanceof jsts.geom.GeometryCollection||b instanceof jsts.geom.MultiPoint||b instanceof jsts.geom.MultiLineString||b instanceof jsts.geom.MultiPolygon){var c=b;for(var a=0;a<c.getNumGeometries();a++){this.add(c.getGeometryN(a))}}}};jsts.algorithm.CentroidPoint.prototype.add2=function(a){this.ptCount+=1;this.centSum.x+=a.x;this.centSum.y+=a.y};jsts.algorithm.CentroidPoint.prototype.getCentroid=function(){var a=new jsts.geom.Coordinate();a.x=this.centSum.x/this.ptCount;a.y=this.centSum.y/this.ptCount;return a};jsts.operation.distance.ConnectedElementLocationFilter=function(a){this.locations=a};jsts.operation.distance.ConnectedElementLocationFilter.prototype=new jsts.geom.GeometryFilter();jsts.operation.distance.ConnectedElementLocationFilter.prototype.locations=null;jsts.operation.distance.ConnectedElementLocationFilter.getLocations=function(b){var a=[];b.apply(new jsts.operation.distance.ConnectedElementLocationFilter(a));return a};jsts.operation.distance.ConnectedElementLocationFilter.prototype.filter=function(a){if(a instanceof jsts.geom.Point||a instanceof jsts.geom.LineString||a instanceof jsts.geom.Polygon){this.locations.push(new jsts.operation.distance.GeometryLocation(a,0,a.getCoordinate()))}};(function(){var a=javascript.util.ArrayList;jsts.operation.relate.EdgeEndBuilder=function(){};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds=function(c){if(arguments.length==2){this.computeEdgeEnds2.apply(this,arguments);return}var b=new a();for(var d=c;d.hasNext();){var f=d.next();this.computeEdgeEnds2(f,b)}return b};jsts.operation.relate.EdgeEndBuilder.prototype.computeEdgeEnds2=function(f,b){var g=f.getEdgeIntersectionList();g.addEndpoints();var d=g.iterator();var e=null;var h=null;if(!d.hasNext()){return}var c=d.next();do{e=h;h=c;c=null;if(d.hasNext()){c=d.next()}if(h!==null){this.createEdgeEndForPrev(f,b,h,e);this.createEdgeEndForNext(f,b,h,c)}}while(h!==null)};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForPrev=function(h,b,k,g){var f=k.segmentIndex;if(k.dist===0){if(f===0){return}f--}var d=h.getCoordinate(f);if(g!==null&&g.segmentIndex>=f){d=g.coord}var c=new jsts.geomgraph.Label(h.getLabel());c.flip();var j=new jsts.geomgraph.EdgeEnd(h,k.coord,d,c);b.add(j)};jsts.operation.relate.EdgeEndBuilder.prototype.createEdgeEndForNext=function(g,b,j,f){var d=j.segmentIndex+1;if(d>=g.getNumPoints()&&f===null){return}var c=g.getCoordinate(d);if(f!==null&&f.segmentIndex===j.segmentIndex){c=f.coord}var h=new jsts.geomgraph.EdgeEnd(g,j.coord,c,new jsts.geomgraph.Label(g.getLabel()));b.add(h)}})();(function(){jsts.io.GeoJSONParser=function(a){this.geometryFactory=a||new jsts.geom.GeometryFactory();this.geometryTypes=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"]};jsts.io.GeoJSONParser.prototype.read=function(a){var c;if(typeof a==="string"){c=JSON.parse(a)}else{c=a}var b=c.type;if(!this.parse[b]){throw new Error("Unknown GeoJSON type: "+c.type)}if(this.geometryTypes.indexOf(b)!=-1){return this.parse[b].apply(this,[c.coordinates])}else{if(b==="GeometryCollection"){return this.parse[b].apply(this,[c.geometries])}}return this.parse[b].apply(this,[c])};jsts.io.GeoJSONParser.prototype.parse={Feature:function(d){var b={};for(var a in d){b[a]=d[a]}if(d.geometry){var c=d.geometry.type;if(!this.parse[c]){throw new Error("Unknown GeoJSON type: "+d.type)}b.geometry=this.read(d.geometry)}if(d.bbox){b.bbox=this.parse.bbox.apply(this,[d.bbox])}return b},FeatureCollection:function(b){var c={};if(b.features){c.features=[];for(var a=0;a<b.features.length;++a){c.features.push(this.read(b.features[a]))}}if(b.bbox){c.bbox=this.parse.bbox.apply(this,[b.bbox])}return c},coordinates:function(d){var c=[];for(var a=0;a<d.length;++a){var b=d[a];c.push(new jsts.geom.Coordinate(b[0],b[1]))}return c},bbox:function(a){return this.geometryFactory.createLinearRing([new jsts.geom.Coordinate(a[0],a[1]),new jsts.geom.Coordinate(a[2],a[1]),new jsts.geom.Coordinate(a[2],a[3]),new jsts.geom.Coordinate(a[0],a[3]),new jsts.geom.Coordinate(a[0],a[1])])},Point:function(b){var a=new jsts.geom.Coordinate(b[0],b[1]);return this.geometryFactory.createPoint(a)},MultiPoint:function(c){var b=[];for(var a=0;a<c.length;++a){b.push(this.parse.Point.apply(this,[c[a]]))}return this.geometryFactory.createMultiPoint(b)},LineString:function(b){var a=this.parse.coordinates.apply(this,[b]);return this.geometryFactory.createLineString(a)},MultiLineString:function(c){var b=[];for(var a=0;a<c.length;++a){b.push(this.parse.LineString.apply(this,[c[a]]))}return this.geometryFactory.createMultiLineString(b)},Polygon:function(h){var b=this.parse.coordinates.apply(this,[h[0]]);var e=this.geometryFactory.createLinearRing(b);var a=[];for(var d=1;d<h.length;++d){var f=h[d];var g=this.parse.coordinates.apply(this,[f]);var c=this.geometryFactory.createLinearRing(g);a.push(c)}return this.geometryFactory.createPolygon(e,a)},MultiPolygon:function(d){var a=[];for(var c=0;c<d.length;++c){var b=d[c];a.push(this.parse.Polygon.apply(this,[b]))}return this.geometryFactory.createMultiPolygon(a)},GeometryCollection:function(d){var b=[];for(var a=0;a<d.length;++a){var c=d[a];b.push(this.read(c))}return this.geometryFactory.createGeometryCollection(b)}};jsts.io.GeoJSONParser.prototype.write=function(b){var a=b.CLASS_NAME.slice(10);if(!this.extract[a]){throw new Error("Geometry is not supported")}return this.extract[a].apply(this,[b])};jsts.io.GeoJSONParser.prototype.extract={coordinate:function(a){return[a.x,a.y]},Point:function(a){var b=this.extract.coordinate.apply(this,[a.coordinate]);return{type:"Point",coordinates:b}},MultiPoint:function(d){var e=[];for(var c=0;c<d.geometries.length;++c){var b=d.geometries[c];var a=this.extract.Point.apply(this,[b]);e.push(a.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(a){var d=[];for(var b=0;b<a.points.length;++b){var c=a.points[b];d.push(this.extract.coordinate.apply(this,[c]))}return{type:"LineString",coordinates:d}},MultiLineString:function(d){var e=[];for(var c=0;c<d.geometries.length;++c){var b=d.geometries[c];var a=this.extract.LineString.apply(this,[b]);e.push(a.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(c){var f=[];var d=this.extract.LineString.apply(this,[c.shell]);f.push(d.coordinates);for(var b=0;b<c.holes.length;++b){var e=c.holes[b];var a=this.extract.LineString.apply(this,[e]);f.push(a.coordinates)}return{type:"Polygon",coordinates:f}},MultiPolygon:function(e){var d=[];for(var c=0;c<e.geometries.length;++c){var b=e.geometries[c];var a=this.extract.Polygon.apply(this,[b]);d.push(a.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(d){var e=[];for(var a=0;a<d.geometries.length;++a){var c=d.geometries[a];var b=c.CLASS_NAME.slice(10);e.push(this.extract[b].apply(this,[c]))}return{type:"GeometryCollection",geometries:e}}}})();jsts.geomgraph.Edge=function(b,a){this.pts=b;this.label=a;this.eiList=new jsts.geomgraph.EdgeIntersectionList(this);this.depth=new jsts.geomgraph.Depth()};jsts.geomgraph.Edge.prototype=new jsts.geomgraph.GraphComponent();jsts.geomgraph.Edge.constructor=jsts.geomgraph.Edge;jsts.geomgraph.Edge.updateIM=function(b,a){a.setAtLeastIfValid(b.getLocation(0,jsts.geomgraph.Position.ON),b.getLocation(1,jsts.geomgraph.Position.ON),1);if(b.isArea()){a.setAtLeastIfValid(b.getLocation(0,jsts.geomgraph.Position.LEFT),b.getLocation(1,jsts.geomgraph.Position.LEFT),2);a.setAtLeastIfValid(b.getLocation(0,jsts.geomgraph.Position.RIGHT),b.getLocation(1,jsts.geomgraph.Position.RIGHT),2)}};jsts.geomgraph.Edge.prototype.pts=null;jsts.geomgraph.Edge.prototype.env=null;jsts.geomgraph.Edge.prototype.name=null;jsts.geomgraph.Edge.prototype.mce=null;jsts.geomgraph.Edge.prototype._isIsolated=true;jsts.geomgraph.Edge.prototype.depth=null;jsts.geomgraph.Edge.prototype.depthDelta=0;jsts.geomgraph.Edge.prototype.eiList=null;jsts.geomgraph.Edge.prototype.getNumPoints=function(){return this.pts.length};jsts.geomgraph.Edge.prototype.getEnvelope=function(){if(this.env===null){this.env=new jsts.geom.Envelope();for(var a=0;a<this.pts.length;a++){this.env.expandToInclude(pts[a])}}return env};jsts.geomgraph.Edge.prototype.getDepth=function(){return this.depth};jsts.geomgraph.Edge.prototype.getDepthDelta=function(){return this.depthDelta};jsts.geomgraph.Edge.prototype.setDepthDelta=function(a){this.depthDelta=a};jsts.geomgraph.Edge.prototype.getCoordinates=function(){return this.pts};jsts.geomgraph.Edge.prototype.getCoordinate=function(a){if(a===undefined){if(this.pts.length>0){return this.pts[0]}else{return null}}return this.pts[a]};jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])};jsts.geomgraph.Edge.prototype.setIsolated=function(a){this._isIsolated=a};jsts.geomgraph.Edge.prototype.isIsolated=function(){return this._isIsolated};jsts.geomgraph.Edge.prototype.addIntersections=function(a,d,c){for(var b=0;b<a.getIntersectionNum();b++){this.addIntersection(a,d,c,b)}};jsts.geomgraph.Edge.prototype.addIntersection=function(j,c,d,h){var e=new jsts.geom.Coordinate(j.getIntersection(h));var f=c;var g=j.getEdgeDistance(d,h);var a=f+1;if(a<this.pts.length){var k=this.pts[a];if(e.equals2D(k)){f=a;g=0}}var b=this.eiList.add(e,f,g)};jsts.geomgraph.Edge.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1};jsts.geomgraph.Edge.prototype.getEdgeIntersectionList=function(){return this.eiList};jsts.geomgraph.Edge.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])};jsts.geomgraph.Edge.prototype.isCollapsed=function(){if(!this.label.isArea()){return false}if(this.pts.length!=3){return false}if(this.pts[0].equals(this.pts[2])){return true}return false};jsts.geomgraph.Edge.prototype.getCollapsedEdge=function(){var a=[];a[0]=this.pts[0];a[1]=this.pts[1];var b=new jsts.geomgraph.Edge(a,jsts.geomgraph.Label.toLineLabel(this.label));return b};jsts.geomgraph.Edge.prototype.computeIM=function(a){jsts.geomgraph.Edge.updateIM(this.label,a)};jsts.geomgraph.Edge.prototype.isPointwiseEqual=function(b){if(this.pts.length!=b.pts.length){return false}for(var a=0;a<this.pts.length;a++){if(!this.pts[a].equals2D(b.pts[a])){return false}}return true};jsts.operation.valid.IsValidOp=function(a){this.parentGeometry=a;this.isSelfTouchingRingFormingHoleValid=false;this.validErr=null};jsts.operation.valid.IsValidOp.isValid=function(a){if(arguments[0] instanceof jsts.geom.Coordinate){if(isNaN(a.x)){return false}if(!isFinite(a.x)&&!isNaN(a.x)){return false}if(isNaN(a.y)){return false}if(!isFinite(a.y)&&!isNaN(a.y)){return false}return true}else{var b=new jsts.operation.valid.IsValidOp(a);return b.isValid()}};jsts.operation.valid.IsValidOp.findPtNotNode=function(f,a,e){var c=e.findEdge(a);var d=c.getEdgeIntersectionList();for(var b=0;b<f.length;b++){var g=f[b];if(!d.isIntersection(g)){return g}}return null};jsts.operation.valid.IsValidOp.prototype.setSelfTouchingRingFormingHoleValid=function(a){this.isSelfTouchingRingFormingHoleValid=a};jsts.operation.valid.IsValidOp.prototype.isValid=function(){this.checkValid(this.parentGeometry);return this.validErr==null};jsts.operation.valid.IsValidOp.prototype.getValidationError=function(){this.checkValid(this.parentGeometry);return this.validErr};jsts.operation.valid.IsValidOp.prototype.checkValid=function(a){this.validErr=null;if(a.isEmpty()){return}if(a instanceof jsts.geom.Point){this.checkValidPoint(a)}else{if(a instanceof jsts.geom.MultiPoint){this.checkValidMultiPoint(a)}else{if(a instanceof jsts.geom.LinearRing){this.checkValidLinearRing(a)}else{if(a instanceof jsts.geom.LineString){this.checkValidLineString(a)}else{if(a instanceof jsts.geom.Polygon){this.checkValidPolygon(a)}else{if(a instanceof jsts.geom.MultiPolygon){this.checkValidMultiPolygon(a)}else{if(a instanceof jsts.geom.GeometryCollection){this.checkValidGeometryCollection(a)}else{throw a.constructor}}}}}}}};jsts.operation.valid.IsValidOp.prototype.checkValidPoint=function(a){this.checkInvalidCoordinates(a.getCoordinates())};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPoint=function(a){this.checkInvalidCoordinates(a.getCoordinates())};jsts.operation.valid.IsValidOp.prototype.checkValidLineString=function(a){this.checkInvalidCoordinates(a.getCoordinates());if(this.validErr!=null){return}var b=new jsts.geomgraph.GeometryGraph(0,a);this.checkTooFewPoints(b)};jsts.operation.valid.IsValidOp.prototype.checkValidLinearRing=function(b){this.checkInvalidCoordinates(b.getCoordinates());if(this.validErr!=null){return}this.checkClosedRing(b);if(this.validErr!=null){return}var c=new jsts.geomgraph.GeometryGraph(0,b);this.checkTooFewPoints(c);if(this.validErr!=null){return}var a=new jsts.algorithm.RobustLineIntersector();c.computeSelfNodes(a,true);this.checkNoSelfIntersectingRings(c)};jsts.operation.valid.IsValidOp.prototype.checkValidPolygon=function(a){this.checkInvalidCoordinates(a);if(this.validErr!=null){return}this.checkClosedRings(a);if(this.validErr!=null){return}var b=new jsts.geomgraph.GeometryGraph(0,a);this.checkTooFewPoints(b);if(this.validErr!=null){return}this.checkConsistentArea(b);if(this.validErr!=null){return}if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(b);if(this.validErr!=null){return}}this.checkHolesInShell(a,b);if(this.validErr!=null){return}this.checkHolesNotNested(a,b);if(this.validErr!=null){return}this.checkConnectedInteriors(b)};jsts.operation.valid.IsValidOp.prototype.checkValidMultiPolygon=function(c){var a=c.getNumGeometries();for(var b=0;b<a;b++){var e=c.getGeometryN(b);this.checkInvalidCoordinates(e);if(this.validErr!=null){return}this.checkClosedRings(e);if(this.validErr!=null){return}}var d=new jsts.geomgraph.GeometryGraph(0,c);this.checkTooFewPoints(d);if(this.validErr!=null){return}this.checkConsistentArea(d);if(this.validErr!=null){return}if(!this.isSelfTouchingRingFormingHoleValid){this.checkNoSelfIntersectingRings(d);if(this.validErr!=null){return}}for(var b=0;b<c.getNumGeometries();b++){var e=c.getGeometryN(b);this.checkHolesInShell(e,d);if(this.validErr!=null){return}}for(var b=0;b<c.getNumGeometries();b++){var e=c.getGeometryN(b);this.checkHolesNotNested(e,d);if(this.validErr!=null){return}}this.checkShellsNotNested(c,d);if(this.validErr!=null){return}this.checkConnectedInteriors(d)};jsts.operation.valid.IsValidOp.prototype.checkValidGeometryCollection=function(c){for(var a=0;a<c.getNumGeometries();a++){var b=c.getGeometryN(a);this.checkValid(b);if(this.validErr!=null){return}}};jsts.operation.valid.IsValidOp.prototype.checkInvalidCoordinates=function(a){if(a instanceof jsts.geom.Polygon){var d=a;this.checkInvalidCoordinates(d.getExteriorRing().getCoordinates());if(this.validErr!=null){return}for(var b=0;b<d.getNumInteriorRing();b++){this.checkInvalidCoordinates(d.getInteriorRingN(b).getCoordinates());if(this.validErr!=null){return}}}else{var c=a;for(var b=0;b<c.length;b++){if(!jsts.operation.valid.IsValidOp.isValid(c[b])){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.INVALID_COORDINATE,c[b]);return}}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRings=function(b){this.checkClosedRing(b.getExteriorRing());if(this.validErr!=null){return}for(var a=0;a<b.getNumInteriorRing();a++){this.checkClosedRing(b.getInteriorRingN(a));if(this.validErr!=null){return}}};jsts.operation.valid.IsValidOp.prototype.checkClosedRing=function(a){if(!a.isClosed()){var b=null;if(a.getNumPoints()>=1){b=a.getCoordinateN(0)}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_NOT_CLOSED,b)}};jsts.operation.valid.IsValidOp.prototype.checkTooFewPoints=function(a){if(a.hasTooFewPoints){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.TOO_FEW_POINTS,a.getInvalidPoint());return}};jsts.operation.valid.IsValidOp.prototype.checkConsistentArea=function(b){var a=new jsts.operation.valid.ConsistentAreaTester(b);var c=a.isNodeConsistentArea();if(!c){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.SELF_INTERSECTION,a.getInvalidPoint());return}if(a.hasDuplicateRings()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DUPLICATE_RINGS,a.getInvalidPoint())}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRings=function(b){for(var a=b.getEdgeIterator();a.hasNext();){var c=a.next();this.checkNoSelfIntersectingRing(c.getEdgeIntersectionList());if(this.validErr!=null){return}}};jsts.operation.valid.IsValidOp.prototype.checkNoSelfIntersectingRing=function(c){var e=[];var a=true;for(var b=c.iterator();b.hasNext();){var d=b.next();if(a){a=false;continue}if(e.indexOf(d.coord)>=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.RING_SELF_INTERSECTION,d.coord);return}else{e.push(d.coord)}}};jsts.operation.valid.IsValidOp.prototype.checkHolesInShell=function(g,e){var c=g.getExteriorRing();var h=new jsts.algorithm.MCPointInRing(c);for(var b=0;b<g.getNumInteriorRing();b++){var d=g.getInteriorRingN(b);var a=jsts.operation.valid.IsValidOp.findPtNotNode(d.getCoordinates(),c,e);if(a==null){return}var f=!h.isInside(a);if(f){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.HOLE_OUTSIDE_SHELL,a);return}}};jsts.operation.valid.IsValidOp.prototype.checkHolesNotNested=function(f,e){var a=new jsts.operation.valid.IndexedNestedRingTester(e);for(var b=0;b<f.getNumInteriorRing();b++){var c=f.getInteriorRingN(b);a.add(c)}var d=a.isNonNested();if(!d){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_HOLES,a.getNestedPoint())}};jsts.operation.valid.IsValidOp.prototype.checkShellsNotNested=function(d,e){for(var c=0;c<d.getNumGeometries();c++){var g=d.getGeometryN(c);var b=g.getExteriorRing();for(var a=0;a<d.getNumGeometries();a++){if(c==a){continue}var f=d.getGeometryN(a);this.checkShellNotNested(b,f,e);if(this.validErr!=null){return}}}};jsts.operation.valid.IsValidOp.prototype.checkShellNotNested=function(e,b,k){var c=e.getCoordinates();var f=b.getExteriorRing();var j=f.getCoordinates();var h=jsts.operation.valid.IsValidOp.findPtNotNode(c,f,k);if(h==null){return}var g=jsts.algorithm.CGAlgorithms.isPointInRing(h,j);if(!g){return}if(b.getNumInteriorRing()<=0){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,h);return}var l=null;for(var d=0;d<b.getNumInteriorRing();d++){var a=b.getInteriorRingN(d);l=this.checkShellInsideHole(e,a,k);if(l==null){return}}this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.NESTED_SHELLS,l)};jsts.operation.valid.IsValidOp.prototype.checkShellInsideHole=function(f,a,j){var b=f.getCoordinates();var g=a.getCoordinates();var h=jsts.operation.valid.IsValidOp.findPtNotNode(b,a,j);if(h!=null){var d=jsts.algorithm.CGAlgorithms.isPointInRing(h,g);if(!d){return h}}var c=jsts.operation.valid.IsValidOp.findPtNotNode(g,f,j);if(c!=null){var e=jsts.algorithm.CGAlgorithms.isPointInRing(c,b);if(e){return c}return null}jsts.util.Assert.shouldNeverReachHere("points in shell and hole appear to be equal");return null};jsts.operation.valid.IsValidOp.prototype.checkConnectedInteriors=function(b){var a=new jsts.operation.valid.ConnectedInteriorTester(b);if(!a.isInteriorsConnected()){this.validErr=new jsts.operation.valid.TopologyValidationError(jsts.operation.valid.TopologyValidationError.DISCONNECTED_INTERIOR,a.getCoordinate())}};jsts.algorithm.RobustDeterminant=function(){};jsts.algorithm.RobustDeterminant.signOfDet2x2=function(d,f,c,e){var a,h,b,g;g=0;a=1;if((d===0)||(e===0)){if((f===0)||(c===0)){return 0}else{if(f>0){if(c>0){return -a}else{return a}}else{if(c>0){return a}else{return -a}}}}if((f===0)||(c===0)){if(e>0){if(d>0){return a}else{return -a}}else{if(d>0){return -a}else{return a}}}if(0<f){if(0<e){if(f>e){a=-a;h=d;d=c;c=h;h=f;f=e;e=h}}else{if(f<=-e){a=-a;c=-c;e=-e}else{h=d;d=-c;c=h;h=f;f=-e;e=h}}}else{if(0<e){if(-f<=e){a=-a;d=-d;f=-f}else{h=-d;d=c;c=h;h=-f;f=e;e=h}}else{if(f>=e){d=-d;f=-f;c=-c;e=-e}else{a=-a;h=-d;d=-c;c=h;h=-f;f=-e;e=h}}}if(0<d){if(0<c){if(d>c){return a}}else{return a}}else{if(0<c){return -a}else{if(d>=c){a=-a;d=-d;c=-c}else{return -a}}}while(true){g=g+1;b=Math.floor(c/d);c=c-b*d;e=e-b*f;if(e<0){return -a}if(e>f){return a}if(d>c+c){if(f<e+e){return a}}else{if(f>e+e){return -a}else{c=d-c;e=f-e;a=-a}}if(e===0){if(c===0){return 0}else{return -a}}if(c===0){return a}b=Math.floor(d/c);d=d-b*c;f=f-b*e;if(f<0){return a}if(f>e){return -a}if(c>d+d){if(e<f+f){return -a}}else{if(e>f+f){return a}else{d=c-d;f=e-f;a=-a}}if(f===0){if(d===0){return 0}else{return a}}if(d===0){return -a}}};jsts.algorithm.RobustDeterminant.orientationIndex=function(f,d,c){var g=d.x-f.x;var b=d.y-f.y;var e=c.x-d.x;var a=c.y-d.y;return jsts.algorithm.RobustDeterminant.signOfDet2x2(g,b,e,a)};jsts.index.quadtree.NodeBase=function(){this.subnode=new Array(4);this.subnode[0]=null;this.subnode[1]=null;this.subnode[2]=null;this.subnode[3]=null;this.items=[]};jsts.index.quadtree.NodeBase.prototype.getSubnodeIndex=function(a,b){var c=-1;if(a.getMinX()>=b.x){if(a.getMinY()>=b.y){c=3}if(a.getMaxY()<=b.y){c=1}}if(a.getMaxX()<=b.x){if(a.getMinY()>=b.y){c=2}if(a.getMaxY()<=b.y){c=0}}return c};jsts.index.quadtree.NodeBase.prototype.getItems=function(){return this.items};jsts.index.quadtree.NodeBase.prototype.hasItems=function(){return(this.items.length>0)};jsts.index.quadtree.NodeBase.prototype.add=function(a){this.items.push(a)};jsts.index.quadtree.NodeBase.prototype.remove=function(a,c){if(!this.isSearchMatch(a)){return false}var d=false,b=0;for(b;b<4;b++){if(this.subnode[b]!==null){d=this.subnode[b].remove(a,c);if(d){if(this.subnode[b].isPrunable()){this.subnode[b]=null}break}}}if(d){return d}if(this.items.indexOf(c)!==-1){for(var b=this.items.length-1;b>=0;b--){if(this.items[b]===c){this.items.splice(b,1)}}d=true}return d};jsts.index.quadtree.NodeBase.prototype.isPrunable=function(){return !(this.hasChildren()||this.hasItems())};jsts.index.quadtree.NodeBase.prototype.hasChildren=function(){var a=0;for(a;a<4;a++){if(this.subnode[a]!==null){return true}}return false};jsts.index.quadtree.NodeBase.prototype.isEmpty=function(){var b=true;if(this.items.length>0){b=false}var a=0;for(a;a<4;a++){if(this.subnode[a]!==null){if(!this.subnode[a].isEmpty()){b=false}}}return b};jsts.index.quadtree.NodeBase.prototype.addAllItems=function(b){b=b.concat(this.items);var a=0;for(a;a<4;a++){if(this.subnode[a]!==null){b=this.subnode[a].addAllItems(b)}}return b};jsts.index.quadtree.NodeBase.prototype.addAllItemsFromOverlapping=function(b,c){if(!this.isSearchMatch(b)){return}c=c.concat(this.items);var a=0;for(a;a<4;a++){if(this.subnode[a]!==null){c=this.subnode[a].addAllItemsFromOverlapping(b,c)}}};jsts.index.quadtree.NodeBase.prototype.visit=function(c,b){if(!this.isSearchMatch(c)){return}this.visitItems(c,b);var a=0;for(a;a<4;a++){if(this.subnode[a]!==null){this.subnode[a].visit(c,b)}}};jsts.index.quadtree.NodeBase.prototype.visitItems=function(c,d){var b=0,a=this.items.length;for(b;b<a;b++){d.visitItem(this.items[b])}};jsts.index.quadtree.NodeBase.prototype.depth=function(){var b=0,a=0,c;for(a;a<4;a++){if(this.subnode[a]!==null){c=this.subnode[a].depth();if(c>b){b=c}}}return b+1};jsts.index.quadtree.NodeBase.prototype.size=function(){var b=0,a=0;for(a;a<4;a++){if(this.subnode[a]!==null){b+=this.subnode[a].size()}}return b+this.items.length};jsts.index.quadtree.NodeBase.prototype.getNodeCount=function(){var b=0,a=0;for(a;a<4;a++){if(this.subnode[a]!==null){b+=this.subnode[a].size()}}return b+1};jsts.index.quadtree.Node=function(a,b){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.env=a;this.level=b;this.centre=new jsts.geom.Coordinate();this.centre.x=(a.getMinX()+a.getMaxX())/2;this.centre.y=(a.getMinY()+a.getMaxY())/2};jsts.index.quadtree.Node.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Node.createNode=function(b){var a,c;a=new jsts.index.quadtree.Key(b);c=new jsts.index.quadtree.Node(a.getEnvelope(),a.getLevel());return c};jsts.index.quadtree.Node.createExpanded=function(a,c){var b=new jsts.geom.Envelope(c),d;if(a!==null){b.expandToInclude(a.env)}d=jsts.index.quadtree.Node.createNode(b);if(a!==null){d.insertNode(a)}return d};jsts.index.quadtree.Node.prototype.getEnvelope=function(){return this.env};jsts.index.quadtree.Node.prototype.isSearchMatch=function(a){return this.env.intersects(a)};jsts.index.quadtree.Node.prototype.getNode=function(c){var b=this.getSubnodeIndex(c,this.centre),a;if(b!==-1){a=this.getSubnode(b);return a.getNode(c)}else{return this}};jsts.index.quadtree.Node.prototype.find=function(c){var b=this.getSubnodeIndex(c,this.centre),a;if(b===-1){return this}if(this.subnode[b]!==null){a=this.subnode[b];return a.find(c)}return this};jsts.index.quadtree.Node.prototype.insertNode=function(c){var a=this.getSubnodeIndex(c.env,this.centre),b;if(c.level===this.level-1){this.subnode[a]=c}else{b=this.createSubnode(a);b.insertNode(c);this.subnode[a]=b}};jsts.index.quadtree.Node.prototype.getSubnode=function(a){if(this.subnode[a]===null){this.subnode[a]=this.createSubnode(a)}return this.subnode[a]};jsts.index.quadtree.Node.prototype.createSubnode=function(d){var c=0,g=0,b=0,f=0,a,e;switch(d){case 0:c=this.env.getMinX();g=this.centre.x;b=this.env.getMinY();f=this.centre.y;break;case 1:c=this.centre.x;g=this.env.getMaxX();b=this.env.getMinY();f=this.centre.y;break;case 2:c=this.env.getMinX();g=this.centre.x;b=this.centre.y;f=this.env.getMaxY();break;case 3:c=this.centre.x;g=this.env.getMaxX();b=this.centre.y;f=this.env.getMaxY();break}a=new jsts.geom.Envelope(c,g,b,f);e=new jsts.index.quadtree.Node(a,this.level-1);return e};(function(){jsts.triangulate.quadedge.QuadEdge=function(){this.rot=null;this.vertex=null;this.next=null;this.data=null};var a=jsts.triangulate.quadedge.QuadEdge;jsts.triangulate.quadedge.QuadEdge.makeEdge=function(h,g){var c,b,j,f,e;c=new a();b=new a();j=new a();f=new a();c.rot=b;b.rot=j;j.rot=f;f.rot=c;c.setNext(c);b.setNext(f);j.setNext(j);f.setNext(b);e=c;e.setOrig(h);e.setDest(g);return e};jsts.triangulate.quadedge.QuadEdge.connect=function(d,c){var f=a.makeEdge(d.dest(),c.orig());a.splice(f,d.lNext());a.splice(f.sym(),c);return f};jsts.triangulate.quadedge.QuadEdge.splice=function(d,c){var k,j,h,g,f,e;k=d.oNext().rot;j=c.oNext().rot;h=c.oNext();g=d.oNext();f=j.oNext();e=k.oNext();d.setNext(h);c.setNext(g);k.setNext(f);j.setNext(e)};jsts.triangulate.quadedge.QuadEdge.swap=function(f){var d,c;d=f.oPrev();c=f.sym().oPrev();a.splice(f,d);a.splice(f.sym(),c);a.splice(f,d.lNext());a.splice(f.sym(),c.lNext());f.setOrig(d.dest());f.setDest(c.dest())};jsts.triangulate.quadedge.QuadEdge.prototype.getPrimary=function(){if(this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0){return this}else{return this.sym()}};jsts.triangulate.quadedge.QuadEdge.prototype.setData=function(b){this.data=b};jsts.triangulate.quadedge.QuadEdge.prototype.getData=function(){return this.data};jsts.triangulate.quadedge.QuadEdge.prototype.delete_jsts=function(){this.rot=null};jsts.triangulate.quadedge.QuadEdge.prototype.isLive=function(){return this.rot!==null};jsts.triangulate.quadedge.QuadEdge.prototype.setNext=function(b){this.next=b};jsts.triangulate.quadedge.QuadEdge.prototype.invRot=function(){return this.rot.sym()};jsts.triangulate.quadedge.QuadEdge.prototype.sym=function(){return this.rot.rot};jsts.triangulate.quadedge.QuadEdge.prototype.oNext=function(){return this.next};jsts.triangulate.quadedge.QuadEdge.prototype.oPrev=function(){return this.rot.next.rot};jsts.triangulate.quadedge.QuadEdge.prototype.dNext=function(){return this.sym().oNext().sym()};jsts.triangulate.quadedge.QuadEdge.prototype.dPrev=function(){return this.invRot().oNext().invRot()};jsts.triangulate.quadedge.QuadEdge.prototype.lNext=function(){return this.invRot().oNext().rot};jsts.triangulate.quadedge.QuadEdge.prototype.lPrev=function(){return this.next.sym()};jsts.triangulate.quadedge.QuadEdge.prototype.rNext=function(){return this.rot.next.invRot()};jsts.triangulate.quadedge.QuadEdge.prototype.rPrev=function(){return this.sym().oNext()};jsts.triangulate.quadedge.QuadEdge.prototype.setOrig=function(b){this.vertex=b};jsts.triangulate.quadedge.QuadEdge.prototype.setDest=function(b){this.sym().setOrig(b)};jsts.triangulate.quadedge.QuadEdge.prototype.orig=function(){return this.vertex};jsts.triangulate.quadedge.QuadEdge.prototype.dest=function(){return this.sym().orig()};jsts.triangulate.quadedge.QuadEdge.prototype.getLength=function(){return this.orig().getCoordinate().distance(dest().getCoordinate())};jsts.triangulate.quadedge.QuadEdge.prototype.equalsNonOriented=function(b){if(this.equalsOriented(b)){return true}if(this.equalsOriented(b.sym())){return true}return false};jsts.triangulate.quadedge.QuadEdge.prototype.equalsOriented=function(b){if(this.orig().getCoordinate().equals2D(b.orig().getCoordinate())&&this.dest().getCoordinate().equals2D(b.dest().getCoordinate())){return true}return false};jsts.triangulate.quadedge.QuadEdge.prototype.toLineSegment=function(){return new jsts.geom.LineSegment(this.vertex.getCoordinate(),this.dest().getCoordinate())};jsts.triangulate.quadedge.QuadEdge.prototype.toString=function(){var c,b;c=this.vertex.getCoordinate();b=this.dest().getCoordinate();return jsts.io.WKTWriter.toLineString(c,b)}})();(function(){var a=jsts.util.Assert;jsts.geomgraph.EdgeEnd=function(c,e,d,b){this.edge=c;if(e&&d){this.init(e,d)}if(b){this.label=b||null}};jsts.geomgraph.EdgeEnd.prototype.edge=null;jsts.geomgraph.EdgeEnd.prototype.label=null;jsts.geomgraph.EdgeEnd.prototype.node=null;jsts.geomgraph.EdgeEnd.prototype.p0=null;jsts.geomgraph.EdgeEnd.prototype.p1=null;jsts.geomgraph.EdgeEnd.prototype.dx=null;jsts.geomgraph.EdgeEnd.prototype.dy=null;jsts.geomgraph.EdgeEnd.prototype.quadrant=null;jsts.geomgraph.EdgeEnd.prototype.init=function(c,b){this.p0=c;this.p1=b;this.dx=b.x-c.x;this.dy=b.y-c.y;this.quadrant=jsts.geomgraph.Quadrant.quadrant(this.dx,this.dy);a.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")};jsts.geomgraph.EdgeEnd.prototype.getEdge=function(){return this.edge};jsts.geomgraph.EdgeEnd.prototype.getLabel=function(){return this.label};jsts.geomgraph.EdgeEnd.prototype.getCoordinate=function(){return this.p0};jsts.geomgraph.EdgeEnd.prototype.getDirectedCoordinate=function(){return this.p1};jsts.geomgraph.EdgeEnd.prototype.getQuadrant=function(){return this.quadrant};jsts.geomgraph.EdgeEnd.prototype.getDx=function(){return this.dx};jsts.geomgraph.EdgeEnd.prototype.getDy=function(){return this.dy};jsts.geomgraph.EdgeEnd.prototype.setNode=function(b){this.node=b};jsts.geomgraph.EdgeEnd.prototype.getNode=function(){return this.node};jsts.geomgraph.EdgeEnd.prototype.compareTo=function(b){return this.compareDirection(b)};jsts.geomgraph.EdgeEnd.prototype.compareDirection=function(b){if(this.dx===b.dx&&this.dy===b.dy){return 0}if(this.quadrant>b.quadrant){return 1}if(this.quadrant<b.quadrant){return -1}return jsts.algorithm.CGAlgorithms.computeOrientation(b.p0,b.p1,this.p1)};jsts.geomgraph.EdgeEnd.prototype.computeLabel=function(b){}})();jsts.triangulate.quadedge.TrianglePredicate=function(){};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNonRobust=function(f,e,h,g){var d=(f.x*f.x+f.y*f.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(e,h,g)-(e.x*e.x+e.y*e.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(f,h,g)+(h.x*h.x+h.y*h.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(f,e,g)-(g.x*g.x+g.y*g.y)*jsts.triangulate.quadedge.TrianglePredicate.triArea(f,e,h)>0;return d};jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized=function(v,u,t,f){var e,d,j,h,n,l,o,g,r,s,q,m,k;e=v.x-f.x;d=v.y-f.y;j=u.x-f.x;h=u.y-f.y;n=t.x-f.x;l=t.y-f.y;o=e*h-j*d;g=j*l-n*h;r=n*d-e*l;s=e*e+d*d;q=j*j+h*h;m=n*n+l*l;k=s*g+q*r+m*o;return k>0};jsts.triangulate.quadedge.TrianglePredicate.triArea=function(e,d,f){return(d.x-e.x)*(f.y-e.y)-(d.y-e.y)*(f.x-e.x)};jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust=function(e,d,g,f){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleNormalized(e,d,g,f)};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDSlow=function(u,t,s,m){var l,k,j,h,r,q,f,e,n,g,v,w,d,o;l=jsts.math.DD.valueOf(m.x);k=jsts.math.DD.valueOf(m.y);j=jsts.math.DD.valueOf(u.x);h=jsts.math.DD.valueOf(u.y);r=jsts.math.DD.valueOf(t.x);q=jsts.math.DD.valueOf(t.y);f=jsts.math.DD.valueOf(s.x);e=jsts.math.DD.valueOf(s.y);n=(j.multiply(j).add(h.multiply(h))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(r,q,f,e,l,k));g=(r.multiply(r).add(q.multiply(q))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(j,h,f,e,l,k));v=(f.multiply(f).add(e.multiply(e))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(j,h,r,q,l,k));w=(l.multiply(l).add(k.multiply(k))).multiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow(j,h,r,q,f,e));d=n.subtract(g).add(v).subtract(w);o=d.doubleValue()>0;return o};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDSlow=function(c,b,e,d,a,f){return(e.subtract(c).multiply(f.subtract(b)).subtract(d.subtract(b).multiply(a.subtract(c))))};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDFast=function(m,l,j,e){var g,f,d,n,h,k;g=(jsts.math.DD.sqr(m.x).selfAdd(jsts.math.DD.sqr(m.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(l,j,e));f=(jsts.math.DD.sqr(l.x).selfAdd(jsts.math.DD.sqr(l.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(m,j,e));d=(jsts.math.DD.sqr(j.x).selfAdd(jsts.math.DD.sqr(j.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(m,l,e));n=(jsts.math.DD.sqr(e.x).selfAdd(jsts.math.DD.sqr(e.y))).selfMultiply(jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast(m,l,j));h=g.selfSubtract(f).selfAdd(d).selfSubtract(n);k=h.doubleValue()>0;return k};jsts.triangulate.quadedge.TrianglePredicate.triAreaDDFast=function(e,d,h){var g,f;g=jsts.math.DD.valueOf(d.x).selfSubtract(e.x).selfMultiply(jsts.math.DD.valueOf(h.y).selfSubtract(e.y));f=jsts.math.DD.valueOf(d.y).selSubtract(e.y).selfMultiply(jsts.math.DD.valueOf(h.x).selfSubtract(e.x));return g.selfSubtract(f)};jsts.triangulate.quadedge.TrianglePredicate.isInCircleDDNormalized=function(w,v,t,m){var f,e,q,o,h,g,n,k,r,j,u,l,d,s;f=jsts.math.DD.valueOf(w.x).selfSubtract(m.x);e=jsts.math.DD.valueOf(w.y).selfSubtract(m.y);q=jsts.math.DD.valueOf(v.x).selfSubtract(m.x);q=jsts.math.DD.valueOf(v.y).selfSubtract(m.y);h=jsts.math.DD.valueOf(t.x).selfSubtract(m.x);h=jsts.math.DD.valueOf(t.y).selfSubtract(m.y);n=f.multiply(o).selfSubtract(q.multiply(e));k=q.multiply(g).selfSubtract(h.multiply(o));r=h.multiply(e).selfSubtract(f.multiply(g));j=f.multiply(f).selfAdd(e.multiply(e));u=q.multiply(q).selfAdd(o.multiply(o));l=h.multiply(h).selfAdd(g.multiply(g));d=j.selfMultiply(k).selfAdd(u.selfMultiply(r)).selfAdd(l.selfMultiply(n));s=d.doubleValue()>0;return s};jsts.triangulate.quadedge.TrianglePredicate.isInCircleCC=function(e,d,k,g){var j,h,f;j=jsts.geom.Triangle.circumcentre(e,d,k);h=e.distance(j);f=g.distance(j)-h;return f<=0};jsts.operation.buffer.RightmostEdgeFinder=function(){};jsts.operation.buffer.RightmostEdgeFinder.prototype.minIndex=-1;jsts.operation.buffer.RightmostEdgeFinder.prototype.minCoord=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.minDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.orientedDe=null;jsts.operation.buffer.RightmostEdgeFinder.prototype.getEdge=function(){return this.orientedDe};jsts.operation.buffer.RightmostEdgeFinder.prototype.getCoordinate=function(){return this.minCoord};jsts.operation.buffer.RightmostEdgeFinder.prototype.findEdge=function(b){for(var a=b.iterator();a.hasNext();){var d=a.next();if(!d.isForward()){continue}this.checkForRightmostCoordinate(d)}jsts.util.Assert.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing");if(this.minIndex===0){this.findRightmostEdgeAtNode()}else{this.findRightmostEdgeAtVertex()}this.orientedDe=this.minDe;var c=this.getRightmostSide(this.minDe,this.minIndex);if(c==jsts.geomgraph.Position.LEFT){this.orientedDe=this.minDe.getSym()}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtNode=function(){var a=this.minDe.getNode();var b=a.getEdges();this.minDe=b.getRightmostEdge();if(!this.minDe.isForward()){this.minDe=this.minDe.getSym();this.minIndex=this.minDe.getEdge().getCoordinates().length-1}};jsts.operation.buffer.RightmostEdgeFinder.prototype.findRightmostEdgeAtVertex=function(){var e=this.minDe.getEdge().getCoordinates();jsts.util.Assert.isTrue(this.minIndex>0&&this.minIndex<e.length,"rightmost point expected to be interior vertex of edge");var d=e[this.minIndex-1];var c=e[this.minIndex+1];var b=jsts.algorithm.CGAlgorithms.computeOrientation(this.minCoord,c,d);var a=false;if(d.y<this.minCoord.y&&c.y<this.minCoord.y&&b===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE){a=true}else{if(d.y>this.minCoord.y&&c.y>this.minCoord.y&&b===jsts.algorithm.CGAlgorithms.CLOCKWISE){a=true}}if(a){this.minIndex=this.minIndex-1}};jsts.operation.buffer.RightmostEdgeFinder.prototype.checkForRightmostCoordinate=function(c){var b=c.getEdge().getCoordinates();for(var a=0;a<b.length-1;a++){if(this.minCoord===null||b[a].x>this.minCoord.x){this.minDe=c;this.minIndex=a;this.minCoord=b[a]}}};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSide=function(c,a){var b=this.getRightmostSideOfSegment(c,a);if(b<0){b=this.getRightmostSideOfSegment(c,a-1)}if(b<0){this.minCoord=null;this.checkForRightmostCoordinate(c)}return b};jsts.operation.buffer.RightmostEdgeFinder.prototype.getRightmostSideOfSegment=function(f,a){var b=f.getEdge();var d=b.getCoordinates();if(a<0||a+1>=d.length){return -1}if(d[a].y==d[a+1].y){return -1}var c=jsts.geomgraph.Position.LEFT;if(d[a].y<d[a+1].y){c=jsts.geomgraph.Position.RIGHT}return c};(function(){jsts.triangulate.IncrementalDelaunayTriangulator=function(a){this.subdiv=a;this.isUsingTolerance=a.getTolerance()>0};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSites=function(c){var d=0,b=c.length,a;for(d;d<b;d++){a=c[d];this.insertSite(a)}};jsts.triangulate.IncrementalDelaunayTriangulator.prototype.insertSite=function(a){var f,d,b,c;f=this.subdiv.locate(a);if(this.subdiv.isVertexOfEdge(f,a)){return f}else{if(this.subdiv.isOnEdge(f,a.getCoordinate())){f=f.oPrev();this.subdiv.delete_jsts(f.oNext())}}d=this.subdiv.makeEdge(f.orig(),a);jsts.triangulate.quadedge.QuadEdge.splice(d,f);b=d;do{d=this.subdiv.connect(f,d.sym());f=d.oPrev()}while(f.lNext()!=b);do{c=f.oPrev();if(c.dest().rightOf(f)&&a.isInCircle(f.orig(),c.dest(),f.dest())){jsts.triangulate.quadedge.QuadEdge.swap(f);f=f.oPrev()}else{if(f.oNext()==b){return d}else{f=f.oNext().lPrev()}}}while(true)}}());jsts.noding.OrientedCoordinateArray=function(a){this.pts=a;this._orientation=jsts.noding.OrientedCoordinateArray.orientation(a)};jsts.noding.OrientedCoordinateArray.prototype.pts=null;jsts.noding.OrientedCoordinateArray.prototype._orientation=undefined;jsts.noding.OrientedCoordinateArray.orientation=function(a){return jsts.geom.CoordinateArrays.increasingDirection(a)===1};jsts.noding.OrientedCoordinateArray.prototype.compareTo=function(b){var c=b;var a=jsts.noding.OrientedCoordinateArray.compareOriented(this.pts,this._orientation,c.pts,c._orientation);return a};jsts.noding.OrientedCoordinateArray.compareOriented=function(h,e,g,c){var n=e?1:-1;var k=c?1:-1;var l=e?h.length:-1;var j=c?g.length:-1;var b=e?0:h.length-1;var a=c?0:g.length-1;var d=0;while(true){var f=h[b].compareTo(g[a]);if(f!==0){return f}b+=n;a+=k;var o=b===l;var m=a===j;if(o&&!m){return -1}if(!o&&m){return 1}if(o&&m){return 0}}};jsts.index.quadtree.Root=function(){jsts.index.quadtree.NodeBase.prototype.constructor.apply(this,arguments);this.origin=new jsts.geom.Coordinate(0,0)};jsts.index.quadtree.Root.prototype=new jsts.index.quadtree.NodeBase();jsts.index.quadtree.Root.prototype.insert=function(a,d){var b=this.getSubnodeIndex(a,this.origin);if(b===-1){this.add(d);return}var c=this.subnode[b];if(c===null||!c.getEnvelope().contains(a)){var e=jsts.index.quadtree.Node.createExpanded(c,a);this.subnode[b]=e}this.insertContained(this.subnode[b],a,d)};jsts.index.quadtree.Root.prototype.insertContained=function(b,a,d){var f,e,c;f=jsts.index.IntervalSize.isZeroWidth(a.getMinX(),a.getMaxX());e=jsts.index.IntervalSize.isZeroWidth(a.getMinY(),a.getMaxY());if(f||e){c=b.find(a)}else{c=b.getNode(a)}c.add(d)};jsts.index.quadtree.Root.prototype.isSearchMatch=function(a){return true};jsts.triangulate.quadedge.Vertex=function(){if(arguments.length===1){this.initFromCoordinate(arguments[0])}else{this.initFromXY(arguments[0],arguments[1])}};jsts.triangulate.quadedge.Vertex.LEFT=0;jsts.triangulate.quadedge.Vertex.RIGHT=1;jsts.triangulate.quadedge.Vertex.BEYOND=2;jsts.triangulate.quadedge.Vertex.BEHIND=3;jsts.triangulate.quadedge.Vertex.BETWEEN=4;jsts.triangulate.quadedge.Vertex.ORIGIN=5;jsts.triangulate.quadedge.Vertex.DESTINATION=6;jsts.triangulate.quadedge.Vertex.prototype.initFromXY=function(a,b){this.p=new jsts.geom.Coordinate(a,b)};jsts.triangulate.quadedge.Vertex.prototype.initFromCoordinate=function(a){this.p=new jsts.geom.Coordinate(a)};jsts.triangulate.quadedge.Vertex.prototype.getX=function(){return this.p.x};jsts.triangulate.quadedge.Vertex.prototype.getY=function(){return this.p.y};jsts.triangulate.quadedge.Vertex.prototype.getZ=function(){return this.p.z};jsts.triangulate.quadedge.Vertex.prototype.setZ=function(a){this.p.z=a};jsts.triangulate.quadedge.Vertex.prototype.getCoordinate=function(){return this.p};jsts.triangulate.quadedge.Vertex.prototype.toString=function(){return"POINT ("+this.p.x+" "+this.p.y+")"};jsts.triangulate.quadedge.Vertex.prototype.equals=function(){if(arguments.length===1){return this.equalsExact(arguments[0])}else{return this.equalsWithTolerance(arguments[0],arguments[1])}};jsts.triangulate.quadedge.Vertex.prototype.equalsExact=function(a){return(this.p.x===a.getX()&&this.p.y===a.getY())};jsts.triangulate.quadedge.Vertex.prototype.equalsWithTolerance=function(a,b){return(this.p.distance(a.getCoordinate())<b)};jsts.triangulate.quadedge.Vertex.prototype.classify=function(h,g){var f,e,d,c;f=this;e=g.sub(h);d=f.sub(h);c=e.crossProduct(d);if(c>0){return jsts.triangulate.quadedge.Vertex.LEFT}if(c<0){return jsts.triangulate.quadedge.Vertex.RIGHT}if((e.getX()*d.getX()<0)||(e.getY()*d.getY()<0)){return jsts.triangulate.quadedge.Vertex.BEHIND}if(e.magn()<d.magn()){return jsts.triangulate.quadedge.Vertex.BEYOND}if(h.equals(f)){return jsts.triangulate.quadedge.Vertex.ORIGIN}if(g.equals(f)){return jsts.triangulate.quadedge.Vertex.DESTINATION}return jsts.triangulate.quadedge.Vertex.BETWEEN};jsts.triangulate.quadedge.Vertex.prototype.crossProduct=function(a){return((this.p.x*a.getY())-(this.p.y*a.getX()))};jsts.triangulate.quadedge.Vertex.prototype.dot=function(a){return((this.p.x*a.getX())+(this.p.y*a.getY()))};jsts.triangulate.quadedge.Vertex.prototype.times=function(a){return new jsts.triangulate.quadedge.Vertex(a*this.p.x,a*this.p.y)};jsts.triangulate.quadedge.Vertex.prototype.sum=function(a){return new jsts.triangulate.quadedge.Vertex(this.p.x+a.getX(),this.p.y+a.getY())};jsts.triangulate.quadedge.Vertex.prototype.sub=function(a){return new jsts.triangulate.quadedge.Vertex(this.p.x-a.getX(),this.p.y-a.getY())};jsts.triangulate.quadedge.Vertex.prototype.magn=function(){return(Math.sqrt((this.p.x*this.p.x)+(this.p.y*this.p.y)))};jsts.triangulate.quadedge.Vertex.prototype.cross=function(){return new Vertex(this.p.y,-this.p.x)};jsts.triangulate.quadedge.Vertex.prototype.isInCircle=function(e,d,f){return jsts.triangulate.quadedge.TrianglePredicate.isInCircleRobust(e.p,d.p,f.p,this.p)};jsts.triangulate.quadedge.Vertex.prototype.isCCW=function(a,d){return((a.p.x-this.p.x)*(d.p.y-this.p.y)-(a.p.y-this.p.y)*(d.p.x-this.p.x)>0)};jsts.triangulate.quadedge.Vertex.prototype.rightOf=function(a){return this.isCCW(a.dest(),a.orig())};jsts.triangulate.quadedge.Vertex.prototype.leftOf=function(a){return this.isCCW(a.orig(),a.dest())};jsts.triangulate.quadedge.Vertex.prototype.bisector=function(g,d){var h,f,e,c;h=d.getX()-g.getX();f=d.getY()-g.getY();e=new jsts.algorithm.HCoordinate(g.getX()+(h/2),g.getY()+(f/2),1);e=new jsts.algorithm.HCoordinate(g.getX()-f+(h/2),g.getY()+h+(f/2),1);return new jsts.algorithm.HCoordinate(e,c)};jsts.triangulate.quadedge.Vertex.prototype.distance=function(b,a){return b.p.distance(a.p)};jsts.triangulate.quadedge.Vertex.prototype.circumRadiusRatio=function(f,h){var e,d,a,g;e=this.circleCenter(f,h);d=this.distance(e,f);a=this.distance(this,f);g=this.distance(f,h);if(g<a){a=g}g=this.distance(h,this);if(g<a){a=g}return d/a};jsts.triangulate.quadedge.Vertex.prototype.midPoint=function(c){var d,b;d=(this.p.x+c.getX())/2;b=(this.p.y+c.getY())/2;return new jsts.triangulate.quadedge.Vertex(d,b)};jsts.triangulate.quadedge.Vertex.prototype.circleCenter=function(d,l){var f,h,j,e,k;f=new jsts.triangulate.quadedge.Vertex(this.getX(),this.getY());h=this.bisector(f,d);j=this.bisector(d,l);e=new jsts.algorithm.HCoordinate(h,j);k=null;try{k=new jsts.triangulate.quadedge.Vertex(e.getX(),e.getY())}catch(g){}return k};jsts.noding.SegmentNodeList=function(a){this.nodeMap=new javascript.util.TreeMap();this.edge=a};jsts.noding.SegmentNodeList.prototype.nodeMap=null;jsts.noding.SegmentNodeList.prototype.iterator=function(){return this.nodeMap.values().iterator()};jsts.noding.SegmentNodeList.prototype.edge=null;jsts.noding.SegmentNodeList.prototype.getEdge=function(){return this.edge};jsts.noding.SegmentNodeList.prototype.add=function(a,d){var b=new jsts.noding.SegmentNode(this.edge,a,d,this.edge.getSegmentOctant(d));var c=this.nodeMap.get(b);if(c!==null){jsts.util.Assert.isTrue(c.coord.equals2D(a),"Found equal nodes with different coordinates");return c}this.nodeMap.put(b,b);return b};jsts.noding.SegmentNodeList.prototype.addEndpoints=function(){var a=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0);this.add(this.edge.getCoordinate(a),a)};jsts.noding.SegmentNodeList.prototype.addCollapsedNodes=function(){var c=[];this.findCollapsesFromInsertedNodes(c);this.findCollapsesFromExistingVertices(c);for(var b=0;b<c.length;b++){var a=c[b];this.add(this.edge.getCoordinate(a),a)}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromExistingVertices=function(d){for(var a=0;a<this.edge.size()-2;a++){var e=this.edge.getCoordinate(a);var c=this.edge.getCoordinate(a+1);var b=this.edge.getCoordinate(a+2);if(e.equals2D(b)){d.push(a+1)}}};jsts.noding.SegmentNodeList.prototype.findCollapsesFromInsertedNodes=function(f){var b=[null];var c=this.iterator();var d=c.next();while(c.hasNext()){var e=c.next();var a=this.findCollapseIndex(d,e,b);if(a){f.push(b[0])}d=e}};jsts.noding.SegmentNodeList.prototype.findCollapseIndex=function(d,c,a){if(!d.coord.equals2D(c.coord)){return false}var b=c.segmentIndex-d.segmentIndex;if(!c.isInterior()){b--}if(b===1){a[0]=d.segmentIndex+1;return true}return false};jsts.noding.SegmentNodeList.prototype.addSplitEdges=function(c){this.addEndpoints();this.addCollapsedNodes();var b=this.iterator();var d=b.next();while(b.hasNext()){var e=b.next();var a=this.createSplitEdge(d,e);c.add(a);d=e}};jsts.noding.SegmentNodeList.prototype.checkSplitEdgesCorrectness=function(d){var c=edge.getCoordinates();var f=d[0];var g=f.getCoordinate(0);if(!g.equals2D(c[0])){throw new Error("bad split edge start point at "+g)}var b=d[d.length-1];var a=b.getCoordinates();var e=a[a.length-1];if(!e.equals2D(c[c.length-1])){throw new Error("bad split edge end point at "+e)}};jsts.noding.SegmentNodeList.prototype.createSplitEdge=function(h,g){var f=g.segmentIndex-h.segmentIndex+2;var e=this.edge.getCoordinate(g.segmentIndex);var a=g.isInterior()||!g.coord.equals2D(e);if(!a){f--}var d=[];var c=0;d[c++]=new jsts.geom.Coordinate(h.coord);for(var b=h.segmentIndex+1;b<=g.segmentIndex;b++){d[c++]=this.edge.getCoordinate(b)}if(a){d[c]=g.coord}return new jsts.noding.NodedSegmentString(d,this.edge.getData())};jsts.operation.union.CascadedPolygonUnion=function(a){this.inputPolys=a};jsts.operation.union.CascadedPolygonUnion.union=function(a){var b=new jsts.operation.union.CascadedPolygonUnion(a);return b.union()};jsts.operation.union.CascadedPolygonUnion.prototype.inputPolys;jsts.operation.union.CascadedPolygonUnion.prototype.geomFactory=null;jsts.operation.union.CascadedPolygonUnion.prototype.STRTREE_NODE_CAPACITY=4;jsts.operation.union.CascadedPolygonUnion.prototype.union=function(){if(this.inputPolys.length===0){return null}this.geomFactory=this.inputPolys[0].getFactory();var b=new jsts.index.strtree.STRtree(this.STRTREE_NODE_CAPACITY);for(var d=0,a=this.inputPolys.length;d<a;d++){var f=this.inputPolys[d];b.insert(f.getEnvelopeInternal(),f)}var c=b.itemsTree();var e=this.unionTree(c);return e};jsts.operation.union.CascadedPolygonUnion.prototype.unionTree=function(b){var a=this.reduceToGeometries(b);var c=this.bindayUnion(a);return c};jsts.operation.union.CascadedPolygonUnion.prototype.binaryUnion=function(e,f,a){f=f||0;a=a||e.length;if(a-f<=1){var d=this.getGeometry(e,f);return this.unionSafe(d,null)}else{if(a-f===2){return this.unionSafe(this.getGeometry(e,f),this.getGeometry(e,f+1))}else{var c=(a+f)/2;var d=this.binaryUnion(e,f,c);var b=this.binaryUnion(e,c,a);return this.unionSafe(d,b)}}};jsts.operation.union.CascadedPolygonUnion.getGeometry=function(b,a){if(a>=b.length){return null}return b[i]};jsts.operation.union.CascadedPolygonUnion.prototype.reduceToGeometries=function(e){var d=[];for(var c=0,a=e.length;c<a;c++){var f=e[c],b=null;if(f instanceof Array){b=this.unionTree(f)}else{if(f instanceof jsts.geom.Geometry){b=f}}d.push(b)}return d};jsts.operation.union.CascadedPolygonUnion.prototype.unionSafe=function(b,a){if(b===null&&a===null){return null}if(b===null){return a.clone()}if(a===null){return b.clone()}return unionOptimized(b,a)};jsts.operation.union.CascadedPolygonUnion.prototype.unionOptimized=function(d,c){var b=d.getEnvelopeInternal(),f=c.getEnvelopeInternal();if(!b.intersects(f)){var e=jsts.geom.util.GeometryCombiner.combine(d,c);return e}if(d.getNumGeometries<=1&&c.getNumGeometries<=1){return this.unionActual(d,c)}var a=b.intersection(f);return this.unionUsingEnvelopeIntersection(d,c,a)};jsts.operation.union.CascadedPolygonUnion.prototype.unionUsingEnvelopeIntersection=function(c,b,d){var a=[];var h=this.extractByEnvelope(d,c,a);var e=this.extractByEnvelope(d,b,a);var g=this.unionActual(h,e);a.push(g);var f=jsts.geom.util.GeometryCombiner.combine(a);return f};jsts.operation.union.CascadedPolygonUnion.prototype.extractByEnvelope=function(d,c,f){var b=[];for(var a=0;a<c.getNumGeometries();a++){var e=c.getGeometryN(a);if(e.getEnvelopeInternal().intersects(d)){b.push(e)}else{f.add(e)}}return this.geomFactory.buildGeometry(b)};jsts.operation.union.CascadedPolygonUnion.prototype.unionActual=function(b,a){return b.union(a)};(function(){jsts.geom.MultiPoint=function(b,a){this.geometries=b||[];this.factory=a};jsts.geom.MultiPoint.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiPoint.constructor=jsts.geom.MultiPoint;jsts.geom.MultiPoint.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)};jsts.geom.MultiPoint.prototype.getGeometryN=function(a){return this.geometries[a]};jsts.geom.MultiPoint.prototype.equalsExact=function(a,b){if(!this.isEquivalentClass(a)){return false}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,a,b)};jsts.geom.MultiPoint.prototype.CLASS_NAME="jsts.geom.MultiPoint"})();jsts.operation.distance.DistanceOp=function(c,a,b){this.ptLocator=new jsts.algorithm.PointLocator();this.geom=[];this.geom[0]=c;this.geom[1]=a;this.terminateDistance=b};jsts.operation.distance.DistanceOp.prototype.geom=null;jsts.operation.distance.DistanceOp.prototype.terminateDistance=0;jsts.operation.distance.DistanceOp.prototype.ptLocator=null;jsts.operation.distance.DistanceOp.prototype.minDistanceLocation=null;jsts.operation.distance.DistanceOp.prototype.minDistance=Number.MAX_VALUE;jsts.operation.distance.DistanceOp.distance=function(b,a){var c=new jsts.operation.distance.DistanceOp(b,a,0);return c.distance()};jsts.operation.distance.DistanceOp.isWithinDistance=function(b,a,d){var c=new jsts.operation.distance.DistanceOp(b,a,d);return c.distance()<=d};jsts.operation.distance.DistanceOp.nearestPoints=function(b,a){var c=new jsts.operation.distance.DistanceOp(b,a,0);return c.nearestPoints()};jsts.operation.distance.DistanceOp.prototype.distance=function(){if(this.geom[0]===null||this.geom[1]===null){throw new jsts.error.IllegalArgumentError("null geometries are not supported")}if(this.geom[0].isEmpty()||this.geom[1].isEmpty()){return 0}this.computeMinDistance();return this.minDistance};jsts.operation.distance.DistanceOp.prototype.nearestPoints=function(){this.computeMinDistance();var a=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return a};jsts.operation.distance.DistanceOp.prototype.nearestLocations=function(){this.computeMinDistance();return this.minDistanceLocation};jsts.operation.distance.DistanceOp.prototype.updateMinDistance=function(a,b){if(a[0]===null){return}if(b){this.minDistanceLocation[0]=a[1];this.minDistanceLocation[1]=a[0]}else{this.minDistanceLocation[0]=a[0];this.minDistanceLocation[1]=a[1]}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance=function(){if(arguments.length>0){this.computeMinDistance2.apply(this,arguments);return}if(this.minDistanceLocation!==null){return}this.minDistanceLocation=[];this.computeContainmentDistance();if(this.minDistance<=this.terminateDistance){return}this.computeFacetDistance()};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance=function(){if(arguments.length===2){this.computeContainmentDistance2.apply(this,arguments);return}else{if(arguments.length===3&&(!arguments[0] instanceof jsts.operation.distance.GeometryLocation)){this.computeContainmentDistance3.apply(this,arguments);return}else{if(arguments.length===3){this.computeContainmentDistance4.apply(this,arguments);return}}}var a=[];this.computeContainmentDistance2(0,a);if(this.minDistance<=this.terminateDistance){return}this.computeContainmentDistance2(1,a)};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance2=function(d,c){var e=1-d;var a=jsts.geom.util.PolygonExtracter.getPolygons(this.geom[d]);if(a.length>0){var b=jsts.operation.distance.ConnectedElementLocationFilter.getLocations(this.geom[e]);this.computeContainmentDistance3(b,a,c);if(this.minDistance<=this.terminateDistance){this.minDistanceLocation[e]=c[0];this.minDistanceLocation[d]=c[1];return}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance3=function(e,a,d){for(var c=0;c<e.length;c++){var f=e[c];for(var b=0;b<a.length;b++){this.computeContainmentDistance4(f,a[b],d);if(this.minDistance<=this.terminateDistance){return}}}};jsts.operation.distance.DistanceOp.prototype.computeContainmentDistance4=function(d,b,a){var c=d.getCoordinate();if(jsts.geom.Location.EXTERIOR!==this.ptLocator.locate(c,b)){this.minDistance=0;a[0]=d;a[1]=new jsts.operation.distance.GeometryLocation(b,c);return}};jsts.operation.distance.DistanceOp.prototype.computeFacetDistance=function(){var a=[];var c=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[0]);var b=jsts.geom.util.LinearComponentExtracter.getLines(this.geom[1]);var e=jsts.geom.util.PointExtracter.getPoints(this.geom[0]);var d=jsts.geom.util.PointExtracter.getPoints(this.geom[1]);this.computeMinDistanceLines(c,b,a);this.updateMinDistance(a,false);if(this.minDistance<=this.terminateDistance){return}a[0]=null;a[1]=null;this.computeMinDistanceLinesPoints(c,d,a);this.updateMinDistance(a,false);if(this.minDistance<=this.terminateDistance){return}a[0]=null;a[1]=null;this.computeMinDistanceLinesPoints(b,e,a);this.updateMinDistance(a,true);if(this.minDistance<=this.terminateDistance){return}a[0]=null;a[1]=null;this.computeMinDistancePoints(e,d,a);this.updateMinDistance(a,false)};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLines=function(g,e,a){for(var f=0;f<g.length;f++){var c=g[f];for(var d=0;d<e.length;d++){var b=e[d];this.computeMinDistance(c,b,a);if(this.minDistance<=this.terminateDistance){return}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistancePoints=function(e,c,a){for(var d=0;d<e.length;d++){var h=e[d];for(var b=0;b<c.length;b++){var g=c[b];var f=h.getCoordinate().distance(g.getCoordinate());if(f<this.minDistance){this.minDistance=f;a[0]=new jsts.operation.distance.GeometryLocation(h,0,h.getCoordinate());a[1]=new jsts.operation.distance.GeometryLocation(g,0,g.getCoordinate())}if(this.minDistance<=this.terminateDistance){return}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistanceLinesPoints=function(c,f,a){for(var e=0;e<c.length;e++){var b=c[e];for(var d=0;d<f.length;d++){var g=f[d];this.computeMinDistance(b,g,a);if(this.minDistance<=this.terminateDistance){return}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance2=function(l,k,b){if(k instanceof jsts.geom.Point){this.computeMinDistance3(l,k,b);return}if(l.getEnvelopeInternal().distance(k.getEnvelopeInternal())>this.minDistance){return}var h=l.getCoordinates();var f=k.getCoordinates();for(var e=0;e<h.length-1;e++){for(var c=0;c<f.length-1;c++){var g=jsts.algorithm.CGAlgorithms.distanceLineLine(h[e],h[e+1],f[c],f[c+1]);if(g<this.minDistance){this.minDistance=g;var a=new jsts.geom.LineSegment(h[e],h[e+1]);var m=new jsts.geom.LineSegment(f[c],f[c+1]);var d=a.closestPoints(m);b[0]=new jsts.operation.distance.GeometryLocation(l,e,d[0]);b[1]=new jsts.operation.distance.GeometryLocation(k,c,d[1])}if(this.minDistance<=this.terminateDistance){return}}}};jsts.operation.distance.DistanceOp.prototype.computeMinDistance3=function(j,h,a){if(j.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this.minDistance){return}var g=j.getCoordinates();var e=h.getCoordinate();for(var d=0;d<g.length-1;d++){var f=jsts.algorithm.CGAlgorithms.distancePointLine(e,g[d],g[d+1]);if(f<this.minDistance){this.minDistance=f;var c=new jsts.geom.LineSegment(g[d],g[d+1]);var b=c.closestPoint(e);a[0]=new jsts.operation.distance.GeometryLocation(j,d,b);a[1]=new jsts.operation.distance.GeometryLocation(h,0,e)}if(this.minDistance<=this.terminateDistance){return}}};(function(){var a=function(d,b,c){this.hotPixel=d;this.parentEdge=b;this.vertexIndex=c};a.prototype=new jsts.index.chain.MonotoneChainSelectAction();a.constructor=a;a.prototype.hotPixel=null;a.prototype.parentEdge=null;a.prototype.vertexIndex=null;a.prototype._isNodeAdded=false;a.prototype.isNodeAdded=function(){return this._isNodeAdded};a.prototype.select=function(c,d){var b=c.getContext();if(this.parentEdge!==null){if(b===this.parentEdge&&d===this.vertexIndex){return}}this._isNodeAdded=this.hotPixel.addSnappedNode(b,d)};jsts.noding.snapround.MCIndexPointSnapper=function(b){this.index=b};jsts.noding.snapround.MCIndexPointSnapper.prototype.index=null;jsts.noding.snapround.MCIndexPointSnapper.prototype.snap=function(e,b,d){if(arguments.length===1){this.snap2.apply(this,arguments);return}var c=e.getSafeEnvelope();var f=new a(e,b,d);this.index.query(c,{visitItem:function(g){g.select(c,f)}});return f.isNodeAdded()};jsts.noding.snapround.MCIndexPointSnapper.prototype.snap2=function(b){return this.snap(b,null,-1)}})();jsts.geomgraph.Quadrant=function(){};jsts.geomgraph.Quadrant.NE=0;jsts.geomgraph.Quadrant.NW=1;jsts.geomgraph.Quadrant.SW=2;jsts.geomgraph.Quadrant.SE=3;jsts.geomgraph.Quadrant.quadrant=function(b,a){if(b instanceof jsts.geom.Coordinate){return jsts.geomgraph.Quadrant.quadrant2.apply(this,arguments)}if(b===0&&a===0){throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for point ( "+b+", "+a+" )")}if(b>=0){if(a>=0){return jsts.geomgraph.Quadrant.NE}else{return jsts.geomgraph.Quadrant.SE}}else{if(a>=0){return jsts.geomgraph.Quadrant.NW}else{return jsts.geomgraph.Quadrant.SW}}};jsts.geomgraph.Quadrant.quadrant2=function(b,a){if(a.x===b.x&&a.y===b.y){throw new jsts.error.IllegalArgumentError("Cannot compute the quadrant for two identical points "+b)}if(a.x>=b.x){if(a.y>=b.y){return jsts.geomgraph.Quadrant.NE}else{return jsts.geomgraph.Quadrant.SE}}else{if(a.y>=b.y){return jsts.geomgraph.Quadrant.NW}else{return jsts.geomgraph.Quadrant.SW}}};jsts.geomgraph.Quadrant.isOpposite=function(b,a){if(b===a){return false}var c=(b-a+4)%4;if(c===2){return true}return false};jsts.geomgraph.Quadrant.commonHalfPlane=function(c,b){if(c===b){return c}var e=(c-b+4)%4;if(e===2){return -1}var d=(c<b)?c:b;var a=(c>b)?c:b;if(d===0&&a===3){return 3}return d};jsts.geomgraph.Quadrant.isInHalfPlane=function(a,b){if(b===jsts.geomgraph.Quadrant.SE){return a===jsts.geomgraph.Quadrant.SE||a===jsts.geomgraph.Quadrant.SW}return a===b||a===b+1};jsts.geomgraph.Quadrant.isNorthern=function(a){return a===jsts.geomgraph.Quadrant.NE||a===jsts.geomgraph.Quadrant.NW};jsts.operation.valid.ConsistentAreaTester=function(a){this.geomGraph=a;this.li=new jsts.algorithm.RobustLineIntersector();this.nodeGraph=new jsts.operation.relate.RelateNodeGraph();this.invalidPoint=null};jsts.operation.valid.ConsistentAreaTester.prototype.getInvalidPoint=function(){return this.invalidPoint};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeConsistentArea=function(){var a=this.geomGraph.computeSelfNodes(this.li,true);if(a.hasProperIntersection()){this.invalidPoint=a.getProperIntersectionPoint();return false}this.nodeGraph.build(this.geomGraph);return this.isNodeEdgeAreaLabelsConsistent()};jsts.operation.valid.ConsistentAreaTester.prototype.isNodeEdgeAreaLabelsConsistent=function(){for(var a=this.nodeGraph.getNodeIterator();a.hasNext();){var b=a.next();if(!b.getEdges().isAreaLabelsConsistent(this.geomGraph)){this.invalidPoint=b.getCoordinate().clone();return false}}return true};jsts.operation.valid.ConsistentAreaTester.prototype.hasDuplicateRings=function(){for(var b=this.nodeGraph.getNodeIterator();b.hasNext();){var c=b.next();for(var a=c.getEdges().iterator();a.hasNext();){var d=a.next();if(d.getEdgeEnds().length>1){invalidPoint=d.getEdge().getCoordinate(0);return true}}}return false};jsts.index.strtree.AbstractNode=function(a){this.level=a;this.childBoundables=[]};jsts.index.strtree.AbstractNode.prototype=new jsts.index.strtree.Boundable();jsts.index.strtree.AbstractNode.constructor=jsts.index.strtree.AbstractNode;jsts.index.strtree.AbstractNode.prototype.childBoundables=null;jsts.index.strtree.AbstractNode.prototype.bounds=null;jsts.index.strtree.AbstractNode.prototype.level=null;jsts.index.strtree.AbstractNode.prototype.getChildBoundables=function(){return this.childBoundables};jsts.index.strtree.AbstractNode.prototype.computeBounds=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.index.strtree.AbstractNode.prototype.getBounds=function(){if(this.bounds===null){this.bounds=this.computeBounds()}return this.bounds};jsts.index.strtree.AbstractNode.prototype.getLevel=function(){return this.level};jsts.index.strtree.AbstractNode.prototype.addChildBoundable=function(a){this.childBoundables.push(a)};(function(){var c=jsts.geom.Location;var b=jsts.geomgraph.Position;var a=jsts.geomgraph.EdgeEnd;jsts.geomgraph.DirectedEdge=function(d,e){a.call(this,d);this.depth=[0,-999,-999];this._isForward=e;if(e){this.init(d.getCoordinate(0),d.getCoordinate(1))}else{var f=d.getNumPoints()-1;this.init(d.getCoordinate(f),d.getCoordinate(f-1))}this.computeDirectedLabel()};jsts.geomgraph.DirectedEdge.prototype=new a();jsts.geomgraph.DirectedEdge.constructor=jsts.geomgraph.DirectedEdge;jsts.geomgraph.DirectedEdge.depthFactor=function(d,e){if(d===c.EXTERIOR&&e===c.INTERIOR){return 1}else{if(d===c.INTERIOR&&e===c.EXTERIOR){return -1}}return 0};jsts.geomgraph.DirectedEdge.prototype._isForward=null;jsts.geomgraph.DirectedEdge.prototype._isInResult=false;jsts.geomgraph.DirectedEdge.prototype._isVisited=false;jsts.geomgraph.DirectedEdge.prototype.sym=null;jsts.geomgraph.DirectedEdge.prototype.next=null;jsts.geomgraph.DirectedEdge.prototype.nextMin=null;jsts.geomgraph.DirectedEdge.prototype.edgeRing=null;jsts.geomgraph.DirectedEdge.prototype.minEdgeRing=null;jsts.geomgraph.DirectedEdge.prototype.depth=null;jsts.geomgraph.DirectedEdge.prototype.getEdge=function(){return this.edge};jsts.geomgraph.DirectedEdge.prototype.setInResult=function(d){this._isInResult=d};jsts.geomgraph.DirectedEdge.prototype.isInResult=function(){return this._isInResult};jsts.geomgraph.DirectedEdge.prototype.isVisited=function(){return this._isVisited};jsts.geomgraph.DirectedEdge.prototype.setVisited=function(d){this._isVisited=d};jsts.geomgraph.DirectedEdge.prototype.setEdgeRing=function(d){this.edgeRing=d};jsts.geomgraph.DirectedEdge.prototype.getEdgeRing=function(){return this.edgeRing};jsts.geomgraph.DirectedEdge.prototype.setMinEdgeRing=function(d){this.minEdgeRing=d};jsts.geomgraph.DirectedEdge.prototype.getMinEdgeRing=function(){return this.minEdgeRing};jsts.geomgraph.DirectedEdge.prototype.getDepth=function(d){return this.depth[d]};jsts.geomgraph.DirectedEdge.prototype.setDepth=function(d,e){if(this.depth[d]!==-999){if(this.depth[d]!==e){throw new jsts.error.TopologyError("assigned depths do not match",this.getCoordinate())}}this.depth[d]=e};jsts.geomgraph.DirectedEdge.prototype.getDepthDelta=function(){var d=this.edge.getDepthDelta();if(!this._isForward){d=-d}return d};jsts.geomgraph.DirectedEdge.prototype.setVisitedEdge=function(d){this.setVisited(d);this.sym.setVisited(d)};jsts.geomgraph.DirectedEdge.prototype.getSym=function(){return this.sym};jsts.geomgraph.DirectedEdge.prototype.isForward=function(){return this._isForward};jsts.geomgraph.DirectedEdge.prototype.setSym=function(d){this.sym=d};jsts.geomgraph.DirectedEdge.prototype.getNext=function(){return this.next};jsts.geomgraph.DirectedEdge.prototype.setNext=function(d){this.next=d};jsts.geomgraph.DirectedEdge.prototype.getNextMin=function(){return this.nextMin};jsts.geomgraph.DirectedEdge.prototype.setNextMin=function(d){this.nextMin=d};jsts.geomgraph.DirectedEdge.prototype.isLineEdge=function(){var d=this.label.isLine(0)||this.label.isLine(1);var f=!this.label.isArea(0)||this.label.allPositionsEqual(0,c.EXTERIOR);var e=!this.label.isArea(1)||this.label.allPositionsEqual(1,c.EXTERIOR);return d&&f&&e};jsts.geomgraph.DirectedEdge.prototype.isInteriorAreaEdge=function(){var e=true;for(var d=0;d<2;d++){if(!(this.label.isArea(d)&&this.label.getLocation(d,b.LEFT)===c.INTERIOR&&this.label.getLocation(d,b.RIGHT)===c.INTERIOR)){e=false}}return e};jsts.geomgraph.DirectedEdge.prototype.computeDirectedLabel=function(){this.label=new jsts.geomgraph.Label(this.edge.getLabel());if(!this._isForward){this.label.flip()}};jsts.geomgraph.DirectedEdge.prototype.setEdgeDepths=function(e,j){var g=this.getEdge().getDepthDelta();if(!this._isForward){g=-g}var d=1;if(e===b.LEFT){d=-1}var h=b.opposite(e);var k=g*d;var f=j+k;this.setDepth(e,j);this.setDepth(h,f)}})();jsts.operation.buffer.OffsetCurveBuilder=function(a,b){this.precisionModel=a;this.bufParams=b};jsts.operation.buffer.OffsetCurveBuilder.prototype.distance=0;jsts.operation.buffer.OffsetCurveBuilder.prototype.precisionModel=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.bufParams=null;jsts.operation.buffer.OffsetCurveBuilder.prototype.getBufferParameters=function(){return this.bufParams};jsts.operation.buffer.OffsetCurveBuilder.prototype.getLineCurve=function(c,f){this.distance=f;if(this.distance<0&&!this.bufParams.isSingleSided()){return null}if(this.distance==0){return null}var e=Math.abs(this.distance);var b=this.getSegGen(e);if(c.length<=1){this.computePointCurve(c[0],b)}else{if(this.bufParams.isSingleSided()){var a=f<0;this.computeSingleSidedBufferCurve(c,a,b)}else{this.computeLineBufferCurve(c,b)}}var d=b.getCoordinates();return d};jsts.operation.buffer.OffsetCurveBuilder.prototype.getRingCurve=function(c,b,d){this.distance=d;if(c.length<=2){return this.getLineCurve(c,d)}if(this.distance==0){return jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates(c)}var a=this.getSegGen(this.distance);this.computeRingBufferCurve(c,b,a);return a.getCoordinates()};jsts.operation.buffer.OffsetCurveBuilder.prototype.getOffsetCurve=function(c,f){this.distance=f;if(this.distance===0){return null}var a=this.distance<0;var e=Math.abs(this.distance);var b=this.getSegGen(e);if(c.length<=1){this.computePointCurve(c[0],b)}else{this.computeOffsetCurve(c,a,b)}var d=b.getCoordinates();if(a){jsts.geom.CoordinateArrays.reverse(d)}return d};jsts.operation.buffer.OffsetCurveBuilder.copyCoordinates=function(b){var c=[];for(var a=0;a<b.length;a++){c.push(b[a].clone())}return c};jsts.operation.buffer.OffsetCurveBuilder.prototype.getSegGen=function(a){return new jsts.operation.buffer.OffsetSegmentGenerator(this.precisionModel,this.bufParams,a)};jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR=100;jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance=function(a){return a/jsts.operation.buffer.OffsetCurveBuilder.SIMPLIFY_FACTOR};jsts.operation.buffer.OffsetCurveBuilder.prototype.computePointCurve=function(b,a){switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:a.createCircle(b);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:a.createSquare(b);break}};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeLineBufferCurve=function(g,c){var a=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);var d=jsts.operation.buffer.BufferInputLineSimplifier.simplify(g,a);var h=d.length-1;c.initSideSegments(d[0],d[1],jsts.geomgraph.Position.LEFT);for(var f=2;f<=h;f++){c.addNextSegment(d[f],true)}c.addLastSegment();c.addLineEndCap(d[h-1],d[h]);var b=jsts.operation.buffer.BufferInputLineSimplifier.simplify(g,-a);var e=b.length-1;c.initSideSegments(b[e],b[e-1],jsts.geomgraph.Position.LEFT);for(var f=e-2;f>=0;f--){c.addNextSegment(b[f],true)}c.addLastSegment();c.addLineEndCap(b[1],b[0]);c.closeRing()};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeSingleSidedBufferCurve=function(h,j,b){var a=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(j){b.addSegments(h,true);var c=jsts.operation.buffer.BufferInputLineSimplifier.simplify(h,-a);var f=c.length-1;b.initSideSegments(c[f],c[f-1],jsts.geomgraph.Position.LEFT);b.addFirstSegment();for(var e=f-2;e>=0;e--){b.addNextSegment(c[e],true)}}else{b.addSegments(h,false);var d=jsts.operation.buffer.BufferInputLineSimplifier.simplify(h,a);var g=d.length-1;b.initSideSegments(d[0],d[1],jsts.geomgraph.Position.LEFT);b.addFirstSegment();for(var e=2;e<=g;e++){b.addNextSegment(d[e],true)}}b.addLastSegment();b.closeRing()};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeOffsetCurve=function(h,j,b){var a=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(distance);if(j){var c=jsts.operation.buffer.BufferInputLineSimplifier.simplify(h,-a);var f=c.length-1;b.initSideSegments(c[f],c[f-1],jsts.geomgraph.Position.LEFT);b.addFirstSegment();for(var e=f-2;e>=0;e--){b.addNextSegment(c[e],true)}}else{var d=jsts.operation.buffer.BufferInputLineSimplifier.simplify(h,a);var g=d.length-1;b.initSideSegments(d[0],d[1],jsts.geomgraph.Position.LEFT);b.addFirstSegment();for(var e=2;e<=g;e++){b.addNextSegment(d[e],true)}}b.addLastSegment()};jsts.operation.buffer.OffsetCurveBuilder.prototype.computeRingBufferCurve=function(g,f,d){var b=jsts.operation.buffer.OffsetCurveBuilder.simplifyTolerance(this.distance);if(f===jsts.geomgraph.Position.RIGHT){b=-b}var a=jsts.operation.buffer.BufferInputLineSimplifier.simplify(g,b);var h=a.length-1;d.initSideSegments(a[h-1],a[0],f);for(var e=1;e<=h;e++){var c=e!==1;d.addNextSegment(a[e],c)}d.closeRing()};jsts.index.strtree.SIRtree=function(a){a=a||10;jsts.index.strtree.AbstractSTRtree.call(this,a)};jsts.index.strtree.SIRtree.prototype=new jsts.index.strtree.AbstractSTRtree();jsts.index.strtree.SIRtree.constructor=jsts.index.strtree.SIRtree;jsts.index.strtree.SIRtree.prototype.comperator={compare:function(b,a){return b.getBounds().getCentre()-a.getBounds().getCentre()}};jsts.index.strtree.SIRtree.prototype.intersectionOp={intersects:function(a,b){return a.intersects(b)}};jsts.index.strtree.SIRtree.prototype.createNode=function(b){var a=function(c){jsts.index.strtree.AbstractNode.apply(this,arguments)};a.prototype=new jsts.index.strtree.AbstractNode();a.constructor=a;a.prototype.computeBounds=function(){var f=null,d=this.getChildBoundables(),g;for(var e=0,c=d.length;e<c;e++){g=d[e];if(f===null){f=new jsts.index.strtree.Interval(g.getBounds())}else{f.expandToInclude(g.getBounds())}}return f};return a};jsts.index.strtree.SIRtree.prototype.insert=function(b,a,c){jsts.index.strtree.AbstractSTRtree.prototype.insert(new jsts.index.strtree.Interval(Math.min(b,a),Math.max(b,a)),c)};jsts.index.strtree.SIRtree.prototype.query=function(b,a){a=a||b;jsts.index.strtree.AbstractSTRtree.prototype.query(new jsts.index.strtree.Interval(Math.min(b,a),Math.max(b,a)))};jsts.index.strtree.SIRtree.prototype.getIntersectsOp=function(){return this.intersectionOp};jsts.index.strtree.SIRtree.prototype.getComparator=function(){return this.comperator};(function(){var a=jsts.geom.Location;jsts.operation.relate.RelateNodeGraph=function(){this.nodes=new jsts.geomgraph.NodeMap(new jsts.operation.relate.RelateNodeFactory())};jsts.operation.relate.RelateNodeGraph.prototype.nodes=null;jsts.operation.relate.RelateNodeGraph.prototype.build=function(c){this.computeIntersectionNodes(c,0);this.copyNodesAndLabels(c,0);var b=new jsts.operation.relate.EdgeEndBuilder();var d=b.computeEdgeEnds(c.getEdgeIterator());this.insertEdgeEnds(d)};jsts.operation.relate.RelateNodeGraph.prototype.computeIntersectionNodes=function(b,d){for(var c=b.getEdgeIterator();c.hasNext();){var g=c.next();var k=g.getLabel().getLocation(d);for(var j=g.getEdgeIntersectionList().iterator();j.hasNext();){var f=j.next();var h=this.nodes.addNode(f.coord);if(k===a.BOUNDARY){h.setLabelBoundary(d)}else{if(h.getLabel().isNull(d)){h.setLabel(d,a.INTERIOR)}}}}};jsts.operation.relate.RelateNodeGraph.prototype.copyNodesAndLabels=function(b,f){for(var d=b.getNodeIterator();d.hasNext();){var e=d.next();var c=this.nodes.addNode(e.getCoordinate());c.setLabel(f,e.getLabel().getLocation(f))}};jsts.operation.relate.RelateNodeGraph.prototype.insertEdgeEnds=function(b){for(var c=b.iterator();c.hasNext();){var d=c.next();this.nodes.add(d)}};jsts.operation.relate.RelateNodeGraph.prototype.getNodeIterator=function(){return this.nodes.iterator()}})();(function(){var b=jsts.geom.Location;var a=jsts.geomgraph.Position;jsts.geomgraph.Depth=function(){this.depth=[[],[]];for(var d=0;d<2;d++){for(var c=0;c<3;c++){this.depth[d][c]=jsts.geomgraph.Depth.NULL_VALUE}}};jsts.geomgraph.Depth.NULL_VALUE=-1;jsts.geomgraph.Depth.depthAtLocation=function(c){if(c===b.EXTERIOR){return 0}if(c===b.INTERIOR){return 1}return jsts.geomgraph.Depth.NULL_VALUE};jsts.geomgraph.Depth.prototype.depth=null;jsts.geomgraph.Depth.prototype.getDepth=function(d,c){return this.depth[d][c]};jsts.geomgraph.Depth.prototype.setDepth=function(e,d,c){this.depth[e][d]=c};jsts.geomgraph.Depth.prototype.getLocation=function(d,c){if(this.depth[d][c]<=0){return b.EXTERIOR}return b.INTERIOR};jsts.geomgraph.Depth.prototype.add=function(e,d,c){if(c===b.INTERIOR){this.depth[e][d]++}};jsts.geomgraph.Depth.prototype.isNull=function(){if(arguments.length>0){return this.isNull2.apply(this,arguments)}for(var d=0;d<2;d++){for(var c=0;c<3;c++){if(this.depth[d][c]!==jsts.geomgraph.Depth.NULL_VALUE){return false}}}return true};jsts.geomgraph.Depth.prototype.isNull2=function(c){if(arguments.length>1){return this.isNull3.apply(this,arguments)}return this.depth[c][1]==jsts.geomgraph.Depth.NULL_VALUE};jsts.geomgraph.Depth.prototype.isNull3=function(d,c){return this.depth[d][c]==jsts.geomgraph.Depth.NULL_VALUE};jsts.geomgraph.Depth.prototype.add=function(e){for(var d=0;d<2;d++){for(var c=1;c<3;c++){var f=e.getLocation(d,c);if(f===b.EXTERIOR||f===b.INTERIOR){if(this.isNull(d,c)){this.depth[d][c]=jsts.geomgraph.Depth.depthAtLocation(f)}else{this.depth[d][c]+=jsts.geomgraph.Depth.depthAtLocation(f)}}}}};jsts.geomgraph.Depth.prototype.getDelta=function(c){return this.depth[c][a.RIGHT]-this.depth[c][a.LEFT]};jsts.geomgraph.Depth.prototype.normalize=function(){for(var d=0;d<2;d++){if(!this.isNull(d)){var f=this.depth[d][1];if(this.depth[d][2]<f){f=this.depth[d][2]}if(f<0){f=0}for(var c=1;c<3;c++){var e=0;if(this.depth[d][c]>f){e=1}this.depth[d][c]=e}}}};jsts.geomgraph.Depth.prototype.toString=function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]}})();jsts.operation.buffer.BufferParameters=function(a,b,d,c){if(a){this.setQuadrantSegments(a)}if(b){this.setEndCapStyle(b)}if(d){this.setJoinStyle(d)}if(c){this.setMitreLimit(c)}};jsts.operation.buffer.BufferParameters.CAP_ROUND=1;jsts.operation.buffer.BufferParameters.CAP_FLAT=2;jsts.operation.buffer.BufferParameters.CAP_SQUARE=3;jsts.operation.buffer.BufferParameters.JOIN_ROUND=1;jsts.operation.buffer.BufferParameters.JOIN_MITRE=2;jsts.operation.buffer.BufferParameters.JOIN_BEVEL=3;jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS=8;jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT=5;jsts.operation.buffer.BufferParameters.prototype.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS;jsts.operation.buffer.BufferParameters.prototype.endCapStyle=jsts.operation.buffer.BufferParameters.CAP_ROUND;jsts.operation.buffer.BufferParameters.prototype.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_ROUND;jsts.operation.buffer.BufferParameters.prototype.mitreLimit=jsts.operation.buffer.BufferParameters.DEFAULT_MITRE_LIMIT;jsts.operation.buffer.BufferParameters.prototype._isSingleSided=false;jsts.operation.buffer.BufferParameters.prototype.getQuadrantSegments=function(){return this.quadrantSegments};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(a){this.quadrantSegments=a};jsts.operation.buffer.BufferParameters.prototype.setQuadrantSegments=function(a){this.quadrantSegments=a;if(this.quadrantSegments===0){this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_BEVEL}if(this.quadrantSegments<0){this.joinStyle=jsts.operation.buffer.BufferParameters.JOIN_MITRE;this.mitreLimit=Math.abs(this.quadrantSegments)}if(a<=0){this.quadrantSegments=1}if(this.joinStyle!==jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.quadrantSegments=jsts.operation.buffer.BufferParameters.DEFAULT_QUADRANT_SEGMENTS}};jsts.operation.buffer.BufferParameters.bufferDistanceError=function(b){var a=Math.PI/2/b;return 1-Math.cos(a/2)};jsts.operation.buffer.BufferParameters.prototype.getEndCapStyle=function(){return this.endCapStyle};jsts.operation.buffer.BufferParameters.prototype.setEndCapStyle=function(a){this.endCapStyle=a};jsts.operation.buffer.BufferParameters.prototype.getJoinStyle=function(){return this.joinStyle};jsts.operation.buffer.BufferParameters.prototype.setJoinStyle=function(a){this.joinStyle=a};jsts.operation.buffer.BufferParameters.prototype.getMitreLimit=function(){return this.mitreLimit};jsts.operation.buffer.BufferParameters.prototype.setMitreLimit=function(a){this.mitreLimit=a};jsts.operation.buffer.BufferParameters.prototype.setSingleSided=function(a){this._isSingleSided=a};jsts.operation.buffer.BufferParameters.prototype.isSingleSided=function(){return this._isSingleSided};jsts.algorithm.distance.PointPairDistance=function(){this.pt=[new jsts.geom.Coordinate(),new jsts.geom.Coordinate()]};jsts.algorithm.distance.PointPairDistance.prototype.pt=null;jsts.algorithm.distance.PointPairDistance.prototype.distance=NaN;jsts.algorithm.distance.PointPairDistance.prototype.isNull=true;jsts.algorithm.distance.PointPairDistance.prototype.initialize=function(c,a,b){if(c===undefined){this.isNull=true;return}this.pt[0].setCoordinate(c);this.pt[1].setCoordinate(a);this.distance=b!==undefined?b:c.distance(a);this.isNull=false};jsts.algorithm.distance.PointPairDistance.prototype.getDistance=function(){return this.distance};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinates=function(){return this.pt};jsts.algorithm.distance.PointPairDistance.prototype.getCoordinate=function(a){return this.pt[a]};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum=function(a){if(arguments.length===2){this.setMaximum2.apply(this,arguments);return}this.setMaximum(a.pt[0],a.pt[1])};jsts.algorithm.distance.PointPairDistance.prototype.setMaximum2=function(c,b){if(this.isNull){this.initialize(c,b);return}var a=c.distance(b);if(a>this.distance){this.initialize(c,b,a)}};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum=function(a){if(arguments.length===2){this.setMinimum2.apply(this,arguments);return}this.setMinimum(a.pt[0],a.pt[1])};jsts.algorithm.distance.PointPairDistance.prototype.setMinimum2=function(c,b){if(this.isNull){this.initialize(c,b);return}var a=c.distance(b);if(a<this.distance){this.initialize(c,b,a)}};(function(){var d=jsts.algorithm.distance.PointPairDistance;var a=jsts.algorithm.distance.DistanceToPoint;var c=function(e){this.maxPtDist=new d();this.minPtDist=new d();this.euclideanDist=new a();this.geom=e};c.prototype=new jsts.geom.CoordinateFilter();c.prototype.maxPtDist=new d();c.prototype.minPtDist=new d();c.prototype.euclideanDist=new a();c.prototype.geom;c.prototype.filter=function(e){this.minPtDist.initialize();a.computeDistance(this.geom,e,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist)};c.prototype.getMaxPointDistance=function(){return this.maxPtDist};var b=function(e,f){this.maxPtDist=new d();this.minPtDist=new d();this.geom=e;this.numSubSegs=Math.round(1/f)};b.prototype=new jsts.geom.CoordinateSequenceFilter();b.prototype.maxPtDist=new d();b.prototype.minPtDist=new d();b.prototype.geom;b.prototype.numSubSegs=0;b.prototype.filter=function(n,h){if(h==0){return}var m=n[h-1];var l=n[h];var f=(l.x-m.x)/this.numSubSegs;var e=(l.y-m.y)/this.numSubSegs;for(var g=0;g<this.numSubSegs;g++){var k=m.x+g*f;var j=m.y+g*e;var o=new jsts.geom.Coordinate(k,j);this.minPtDist.initialize();a.computeDistance(this.geom,o,this.minPtDist);this.maxPtDist.setMaximum(this.minPtDist)}};b.prototype.isGeometryChanged=function(){return false};b.prototype.isDone=function(){return false};b.prototype.getMaxPointDistance=function(){return this.maxPtDist};jsts.algorithm.distance.DiscreteHausdorffDistance=function(f,e){this.g0=f;this.g1=e;this.ptDist=new jsts.algorithm.distance.PointPairDistance()};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g0=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.g1=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.ptDist=null;jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.densifyFrac=0;jsts.algorithm.distance.DiscreteHausdorffDistance.distance=function(f,e,h){var g=new jsts.algorithm.distance.DiscreteHausdorffDistance(f,e);if(h!==undefined){g.setDensifyFraction(h)}return g.distance()};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.setDensifyFraction=function(e){if(e>1||e<=0){throw new jsts.error.IllegalArgumentError("Fraction is not in range (0.0 - 1.0]")}this.densifyFrac=e};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.distance=function(){this.compute(this.g0,this.g1);return ptDist.getDistance()};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.orientedDistance=function(){this.computeOrientedDistance(this.g0,this.g1,this.ptDist);return this.ptDist.getDistance()};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.getCoordinates=function(){return ptDist.getCoordinates()};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.compute=function(f,e){this.computeOrientedDistance(f,e,this.ptDist);this.computeOrientedDistance(e,f,this.ptDist)};jsts.algorithm.distance.DiscreteHausdorffDistance.prototype.computeOrientedDistance=function(g,f,h){var e=new c(f);g.apply(e);h.setMaximum(e.getMaxPointDistance());if(this.densifyFrac>0){var j=new b(f,this.densifyFrac);g.apply(j);h.setMaximum(j.getMaxPointDistance())}}})();jsts.operation.distance.GeometryLocation=function(a,b,c){this.component=a;this.segIndex=b;this.pt=c};jsts.operation.distance.GeometryLocation.INSIDE_AREA=-1;jsts.operation.distance.GeometryLocation.prototype.component=null;jsts.operation.distance.GeometryLocation.prototype.segIndex=null;jsts.operation.distance.GeometryLocation.prototype.pt=null;jsts.operation.distance.GeometryLocation.prototype.getGeometryComponent=function(){return this.component};jsts.operation.distance.GeometryLocation.prototype.getSegmentIndex=function(){return this.segIndex};jsts.operation.distance.GeometryLocation.prototype.getCoordinate=function(){return this.pt};jsts.operation.distance.GeometryLocation.prototype.isInsideArea=function(){return this.segIndex===jsts.operation.distance.GeometryLocation.INSIDE_AREA};jsts.geom.util.PointExtracter=function(a){this.pts=a};jsts.geom.util.PointExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.PointExtracter.prototype.pts=null;jsts.geom.util.PointExtracter.getPoints=function(a,b){if(b===undefined){b=[]}if(a instanceof jsts.geom.Point){b.push(a)}else{if(a instanceof jsts.geom.GeometryCollection||a instanceof jsts.geom.MultiPoint||a instanceof jsts.geom.MultiLineString||a instanceof jsts.geom.MultiPolygon){a.apply(new jsts.geom.util.PointExtracter(b))}}return b};jsts.geom.util.PointExtracter.prototype.filter=function(a){if(a instanceof jsts.geom.Point){this.pts.push(a)}};jsts.noding.ScaledNoder=function(b,c,a,d){this.offsetX=a?a:0;this.offsetY=d?d:0;this.noder=b;this.scaleFactor=c;this.isScaled=!this.isIntegerPrecision()};jsts.noding.ScaledNoder.prototype=new jsts.noding.Noder();jsts.noding.ScaledNoder.constructor=jsts.noding.ScaledNoder;jsts.noding.ScaledNoder.prototype.noder=null;jsts.noding.ScaledNoder.prototype.scaleFactor=undefined;jsts.noding.ScaledNoder.prototype.offsetX=undefined;jsts.noding.ScaledNoder.prototype.offsetY=undefined;jsts.noding.ScaledNoder.prototype.isScaled=false;jsts.noding.ScaledNoder.prototype.isIntegerPrecision=function(){return this.scaleFactor===1};jsts.noding.ScaledNoder.prototype.getNodedSubstrings=function(){var a=this.noder.getNodedSubstrings();if(this.isScaled){this.rescale(a)}return a};jsts.noding.ScaledNoder.prototype.computeNodes=function(a){var b=a;if(this.isScaled){b=this.scale(a)}this.noder.computeNodes(b)};jsts.noding.ScaledNoder.prototype.scale=function(d){if(d instanceof Array){return this.scale2(d)}var a=new javascript.util.ArrayList();for(var c=d.iterator();c.hasNext();){var b=c.next();a.add(new jsts.noding.NodedSegmentString(this.scale(b.getCoordinates()),b.getData()))}return a};jsts.noding.ScaledNoder.prototype.scale2=function(d){var b=[];for(var c=0;c<d.length;c++){b[c]=new jsts.geom.Coordinate(Math.round((d[c].x-this.offsetX)*this.scaleFactor),Math.round((d[c].y-this.offsetY)*this.scaleFactor))}var a=jsts.geom.CoordinateArrays.removeRepeatedPoints(b);return a};jsts.noding.ScaledNoder.prototype.rescale=function(c){if(c instanceof Array){this.rescale2(c);return}for(var b=c.iterator();b.hasNext();){var a=b.next();this.rescale(a.getCoordinates())}};jsts.noding.ScaledNoder.prototype.rescale2=function(b){for(var a=0;a<b.length;a++){b[a].x=b[a].x/this.scaleFactor+this.offsetX;b[a].y=b[a].y/this.scaleFactor+this.offsetY}};jsts.noding.IntersectionAdder=function(a){this.li=a};jsts.noding.IntersectionAdder.prototype=new jsts.noding.SegmentIntersector();jsts.noding.IntersectionAdder.constructor=jsts.noding.IntersectionAdder;jsts.noding.IntersectionAdder.isAdjacentSegments=function(b,a){return Math.abs(b-a)===1};jsts.noding.IntersectionAdder.prototype._hasIntersection=false;jsts.noding.IntersectionAdder.prototype.hasProper=false;jsts.noding.IntersectionAdder.prototype.hasProperInterior=false;jsts.noding.IntersectionAdder.prototype.hasInterior=false;jsts.noding.IntersectionAdder.prototype.properIntersectionPoint=null;jsts.noding.IntersectionAdder.prototype.li=null;jsts.noding.IntersectionAdder.prototype.isSelfIntersection=null;jsts.noding.IntersectionAdder.prototype.numIntersections=0;jsts.noding.IntersectionAdder.prototype.numInteriorIntersections=0;jsts.noding.IntersectionAdder.prototype.numProperIntersections=0;jsts.noding.IntersectionAdder.prototype.numTests=0;jsts.noding.IntersectionAdder.prototype.getLineIntersector=function(){return this.li};jsts.noding.IntersectionAdder.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint};jsts.noding.IntersectionAdder.prototype.hasIntersection=function(){return this._hasIntersection};jsts.noding.IntersectionAdder.prototype.hasProperIntersection=function(){return this.hasProper};jsts.noding.IntersectionAdder.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior};jsts.noding.IntersectionAdder.prototype.hasInteriorIntersection=function(){return this.hasInterior};jsts.noding.IntersectionAdder.prototype.isTrivialIntersection=function(e,c,d,b){if(e==d){if(this.li.getIntersectionNum()==1){if(jsts.noding.IntersectionAdder.isAdjacentSegments(c,b)){return true}if(e.isClosed()){var a=e.size()-1;if((c===0&&b===a)||(b===0&&c===a)){return true}}}}return false};jsts.noding.IntersectionAdder.prototype.processIntersections=function(h,e,g,c){if(h===g&&e===c){return}this.numTests++;var b=h.getCoordinates()[e];var a=h.getCoordinates()[e+1];var f=g.getCoordinates()[c];var d=g.getCoordinates()[c+1];this.li.computeIntersection(b,a,f,d);if(this.li.hasIntersection()){this.numIntersections++;if(this.li.isInteriorIntersection()){this.numInteriorIntersections++;this.hasInterior=true}if(!this.isTrivialIntersection(h,e,g,c)){this._hasIntersection=true;h.addIntersections(this.li,e,0);g.addIntersections(this.li,c,1);if(this.li.isProper()){this.numProperIntersections++;this.hasProper=true;this.hasProperInterior=true}}}};jsts.noding.IntersectionAdder.prototype.isDone=function(){return false};jsts.triangulate.VoronoiDiagramBuilder=function(){this.siteCoords=null;this.tolerance=0;this.subdiv=null;this.clipEnv=null;this.diagramEnv=null};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSites=function(){var a=arguments[0];if(a instanceof jsts.geom.Geometry||a instanceof jsts.geom.Coordinate||a instanceof jsts.geom.Point||a instanceof jsts.geom.MultiPoint||a instanceof jsts.geom.LineString||a instanceof jsts.geom.MultiLineString||a instanceof jsts.geom.LinearRing||a instanceof jsts.geom.Polygon||a instanceof jsts.geom.MultiPolygon){this.setSitesByGeometry(a)}else{this.setSitesByArray(a)}};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByGeometry=function(a){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(a)};jsts.triangulate.VoronoiDiagramBuilder.prototype.setSitesByArray=function(a){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(a)};jsts.triangulate.VoronoiDiagramBuilder.prototype.setClipEnvelope=function(a){this.clipEnv=a};jsts.triangulate.VoronoiDiagramBuilder.prototype.setTolerance=function(a){this.tolerance=a};jsts.triangulate.VoronoiDiagramBuilder.prototype.create=function(){if(this.subdiv!==null){return}var d,c,a,b;d=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);this.diagramEnv=d;c=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(c);if(this.clipEnv!==null){this.diagramEnv.expandToInclude(this.clipEnv)}a=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(d,this.tolerance);b=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);b.insertSites(a)};jsts.triangulate.VoronoiDiagramBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv};jsts.triangulate.VoronoiDiagramBuilder.prototype.getDiagram=function(b){this.create();var a=this.subdiv.getVoronoiDiagram(b);return this.clipGeometryCollection(a,this.diagramEnv)};jsts.triangulate.VoronoiDiagramBuilder.prototype.clipGeometryCollection=function(e,j){var f,b,d,c,h,a;f=e.getFactory().toGeometry(j);b=[];d=0,c=e.getNumGeometries();for(d;d<c;d++){h=e.getGeometryN(d);a=null;if(j.contains(h.getEnvelopeInternal())){a=h}else{if(j.intersects(h.getEnvelopeInternal())){a=f.intersection(h)}}if(a!==null&&!a.isEmpty()){b.push(a)}}return e.getFactory().createGeometryCollection(b)};jsts.operation.valid.IndexedNestedRingTester=function(a){this.graph=a;this.rings=new javascript.util.ArrayList();this.totalEnv=new jsts.geom.Envelope();this.index=null;this.nestedPt=null};jsts.operation.valid.IndexedNestedRingTester.prototype.getNestedPoint=function(){return this.nestedPt};jsts.operation.valid.IndexedNestedRingTester.prototype.add=function(a){this.rings.add(a);this.totalEnv.expandToInclude(a.getEnvelopeInternal())};jsts.operation.valid.IndexedNestedRingTester.prototype.isNonNested=function(){this.buildIndex();for(var e=0;e<this.rings.size();e++){var a=this.rings.get(e);var k=a.getCoordinates();var f=this.index.query(a.getEnvelopeInternal());for(var d=0;d<f.length;d++){var c=f[d];var b=c.getCoordinates();if(a==c){continue}if(!a.getEnvelopeInternal().intersects(c.getEnvelopeInternal())){continue}var g=jsts.operation.valid.IsValidOp.findPtNotNode(k,c,this.graph);if(g==null){continue}var h=jsts.algorithm.CGAlgorithms.isPointInRing(g,b);if(h){this.nestedPt=g;return false}}}return true};jsts.operation.valid.IndexedNestedRingTester.prototype.buildIndex=function(){this.index=new jsts.index.strtree.STRtree();for(var b=0;b<this.rings.size();b++){var a=this.rings.get(b);var c=a.getEnvelopeInternal();this.index.insert(c,a)}};jsts.noding.SegmentNode=function(d,c,b,a){this.segString=d;this.coord=new jsts.geom.Coordinate(c);this.segmentIndex=b;this.segmentOctant=a;this._isInterior=!c.equals2D(d.getCoordinate(b))};jsts.noding.SegmentNode.prototype.segString=null;jsts.noding.SegmentNode.prototype.coord=null;jsts.noding.SegmentNode.prototype.segmentIndex=null;jsts.noding.SegmentNode.prototype.segmentOctant=null;jsts.noding.SegmentNode.prototype._isInterior=null;jsts.noding.SegmentNode.prototype.getCoordinate=function(){return this.coord};jsts.noding.SegmentNode.prototype.isInterior=function(){return this._isInterior};jsts.noding.SegmentNode.prototype.isEndPoint=function(a){if(this.segmentIndex===0&&!this._isInterior){return true}if(this.segmentIndex===this.maxSegmentIndex){return true}return false};jsts.noding.SegmentNode.prototype.compareTo=function(b){var a=b;if(this.segmentIndex<a.segmentIndex){return -1}if(this.segmentIndex>a.segmentIndex){return 1}if(this.coord.equals2D(a.coord)){return 0}return jsts.noding.SegmentPointComparator.compare(this.segmentOctant,this.coord,a.coord)};(function(){jsts.io.GeoJSONWriter=function(){this.parser=new jsts.io.GeoJSONParser(this.geometryFactory)};jsts.io.GeoJSONWriter.prototype.write=function(b){var a=this.parser.write(b);return a}})();jsts.io.OpenLayersParser=function(a){this.geometryFactory=a||new jsts.geom.GeometryFactory()};jsts.io.OpenLayersParser.prototype.read=function(a){if(a.CLASS_NAME==="OpenLayers.Geometry.Point"){return this.convertFromPoint(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.LineString"){return this.convertFromLineString(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.LinearRing"){return this.convertFromLinearRing(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.Polygon"){return this.convertFromPolygon(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.MultiPoint"){return this.convertFromMultiPoint(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.MultiLineString"){return this.convertFromMultiLineString(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.MultiPolygon"){return this.convertFromMultiPolygon(a)}else{if(a.CLASS_NAME==="OpenLayers.Geometry.Collection"){return this.convertFromCollection(a)}}}}}}}}};jsts.io.OpenLayersParser.prototype.convertFromPoint=function(a){return this.geometryFactory.createPoint(new jsts.geom.Coordinate(a.x,a.y))};jsts.io.OpenLayersParser.prototype.convertFromLineString=function(b){var a;var c=[];for(a=0;a<b.components.length;a++){c.push(new jsts.geom.Coordinate(b.components[a].x,b.components[a].y))}return this.geometryFactory.createLineString(c)};jsts.io.OpenLayersParser.prototype.convertFromLinearRing=function(a){var b;var c=[];for(b=0;b<a.components.length;b++){c.push(new jsts.geom.Coordinate(a.components[b].x,a.components[b].y))}return this.geometryFactory.createLinearRing(c)};jsts.io.OpenLayersParser.prototype.convertFromPolygon=function(e){var d;var c=null;var a=[];for(d=0;d<e.components.length;d++){var b=this.convertFromLinearRing(e.components[d]);if(d===0){c=b}else{a.push(b)}}return this.geometryFactory.createPolygon(c,a)};jsts.io.OpenLayersParser.prototype.convertFromMultiPoint=function(a){var b;var c=[];for(b=0;b<a.components.length;b++){c.push(this.convertFromPoint(a.components[b]))}return this.geometryFactory.createMultiPoint(c)};jsts.io.OpenLayersParser.prototype.convertFromMultiLineString=function(a){var b;var c=[];for(b=0;b<a.components.length;b++){c.push(this.convertFromLineString(a.components[b]))}return this.geometryFactory.createMultiLineString(c)};jsts.io.OpenLayersParser.prototype.convertFromMultiPolygon=function(c){var b;var a=[];for(b=0;b<c.components.length;b++){a.push(this.convertFromPolygon(c.components[b]))}return this.geometryFactory.createMultiPolygon(a)};jsts.io.OpenLayersParser.prototype.convertFromCollection=function(c){var a;var b=[];for(a=0;a<c.components.length;a++){b.push(this.convertFrom(c.components[a]))}return this.geometryFactory.createGeometryCollection(b)};jsts.io.OpenLayersParser.prototype.write=function(a){if(a.CLASS_NAME==="jsts.geom.Point"){return this.convertToPoint(a.coordinate)}else{if(a.CLASS_NAME==="jsts.geom.LineString"){return this.convertToLineString(a)}else{if(a.CLASS_NAME==="jsts.geom.LinearRing"){return this.convertToLinearRing(a)}else{if(a.CLASS_NAME==="jsts.geom.Polygon"){return this.convertToPolygon(a)}else{if(a.CLASS_NAME==="jsts.geom.MultiPoint"){return this.convertToMultiPoint(a)}else{if(a.CLASS_NAME==="jsts.geom.MultiLineString"){return this.convertToMultiLineString(a)}else{if(a.CLASS_NAME==="jsts.geom.MultiPolygon"){return this.convertToMultiPolygon(a)}else{if(a.CLASS_NAME==="jsts.geom.GeometryCollection"){return this.convertToCollection(a)}}}}}}}}};jsts.io.OpenLayersParser.prototype.convertToPoint=function(a){return new OpenLayers.Geometry.Point(a.x,a.y)};jsts.io.OpenLayersParser.prototype.convertToLineString=function(c){var a;var b=[];for(a=0;a<c.points.length;a++){var d=c.points[a];b.push(this.convertToPoint(d))}return new OpenLayers.Geometry.LineString(b)};jsts.io.OpenLayersParser.prototype.convertToLinearRing=function(a){var b;var c=[];for(b=0;b<a.points.length;b++){var d=a.points[b];c.push(this.convertToPoint(d))}return new OpenLayers.Geometry.LinearRing(c)};jsts.io.OpenLayersParser.prototype.convertToPolygon=function(c){var b;var d=[];d.push(this.convertToLinearRing(c.shell));for(b=0;b<c.holes.length;b++){var a=c.holes[b];d.push(this.convertToLinearRing(a))}return new OpenLayers.Geometry.Polygon(d)};jsts.io.OpenLayersParser.prototype.convertToMultiPoint=function(a){var b;var c=[];for(b=0;b<a.geometries.length;b++){var d=a.geometries[b].coordinate;c.push(new OpenLayers.Geometry.Point(d.x,d.y))}return new OpenLayers.Geometry.MultiPoint(c)};jsts.io.OpenLayersParser.prototype.convertToMultiLineString=function(a){var b;var c=[];for(b=0;b<a.geometries.length;b++){c.push(this.convertToLineString(a.geometries[b]))}return new OpenLayers.Geometry.MultiLineString(c)};jsts.io.OpenLayersParser.prototype.convertToMultiPolygon=function(c){var b;var a=[];for(b=0;b<c.geometries.length;b++){a.push(this.convertToPolygon(c.geometries[b]))}return new OpenLayers.Geometry.MultiPolygon(a)};jsts.io.OpenLayersParser.prototype.convertToCollection=function(e){var a;var b=[];for(a=0;a<e.geometries.length;a++){var d=e.geometries[a];var c=this.write(d);b.push(c)}return new OpenLayers.Geometry.Collection(b)};jsts.index.quadtree.Quadtree=function(){this.root=new jsts.index.quadtree.Root();this.minExtent=1};jsts.index.quadtree.Quadtree.ensureExtent=function(b,d){var c,f,a,e;c=b.getMinX();f=b.getMaxX();a=b.getMinY();e=b.getMaxY();if(c!==f&&a!==e){return b}if(c===f){c=c-(d/2);f=c+(d/2)}if(a===e){a=a-(d/2);e=a+(d/2)}return new jsts.geom.Envelope(c,f,a,e)};jsts.index.quadtree.Quadtree.prototype.depth=function(){return this.root.depth()};jsts.index.quadtree.Quadtree.prototype.size=function(){return this.root.size()};jsts.index.quadtree.Quadtree.prototype.insert=function(a,b){this.collectStats(a);var c=jsts.index.quadtree.Quadtree.ensureExtent(a,this.minExtent);this.root.insert(c,b)};jsts.index.quadtree.Quadtree.prototype.remove=function(a,c){var b=jsts.index.quadtree.Quadtree.ensureExtent(a,this.minExtent);return this.root.remove(b,c)};jsts.index.quadtree.Quadtree.prototype.query=function(){if(arguments.length===1){return jsts.index.quadtree.Quadtree.prototype.queryByEnvelope.apply(this,arguments)}else{jsts.index.quadtree.Quadtree.prototype.queryWithVisitor.apply(this,arguments)}};jsts.index.quadtree.Quadtree.prototype.queryByEnvelope=function(b){var a=new jsts.index.ArrayListVisitor();this.query(b,a);return a.getItems()};jsts.index.quadtree.Quadtree.prototype.queryWithVisitor=function(b,a){this.root.visit(b,a)};jsts.index.quadtree.Quadtree.prototype.queryAll=function(){var a=[];a=this.root.addAllItems(a);return a};jsts.index.quadtree.Quadtree.prototype.collectStats=function(a){var c=a.getWidth();if(c<this.minExtent&&c>0){this.minExtent=c}var b=a.getHeight();if(b<this.minExtent&&b>0){this.minExtent=b}};jsts.operation.relate.RelateNodeFactory=function(){};jsts.operation.relate.RelateNodeFactory.prototype=new jsts.geomgraph.NodeFactory();jsts.operation.relate.RelateNodeFactory.prototype.createNode=function(a){return new jsts.operation.relate.RelateNode(a,new jsts.operation.relate.EdgeEndBundleStar())};jsts.index.quadtree.Key=function(a){this.pt=new jsts.geom.Coordinate();this.level=0;this.env=null;this.computeKey(a)};jsts.index.quadtree.Key.computeQuadLevel=function(d){var b,a,c,e;b=d.getWidth();a=d.getHeight();c=b>a?b:a;e=jsts.index.DoubleBits.exponent(c)+1;return e};jsts.index.quadtree.Key.prototype.getPoint=function(){return this.pt};jsts.index.quadtree.Key.prototype.getLevel=function(){return this.level};jsts.index.quadtree.Key.prototype.getEnvelope=function(){return this.env};jsts.index.quadtree.Key.prototype.getCentre=function(){var a,b;a=(this.env.getMinX()+this.env.getMaxX())/2;b=(this.env.getMinY()+this.env.getMaxY())/2;return new jsts.geom.Coordinate(a,b)};jsts.index.quadtree.Key.prototype.computeKey=function(){if(arguments[0] instanceof jsts.geom.Envelope){this.computeKeyFromEnvelope(arguments[0])}else{this.computeKeyFromLevel(arguments[0],arguments[1])}};jsts.index.quadtree.Key.prototype.computeKeyFromEnvelope=function(a){this.level=jsts.index.quadtree.Key.computeQuadLevel(a);this.env=new jsts.geom.Envelope();this.computeKey(this.level,a);while(!this.env.contains(a)){this.level+=1;this.computeKey(this.level,a)}};jsts.index.quadtree.Key.prototype.computeKeyFromLevel=function(c,b){var a=jsts.index.DoubleBits.powerOf2(c);this.pt.x=Math.floor(b.getMinX()/a)*a;this.pt.y=Math.floor(b.getMinY()/a)*a;this.env.init(this.pt.x,this.pt.x+a,this.pt.y,this.pt.y+a)};jsts.operation.buffer.OffsetSegmentGenerator=function(a,b,c){this.seg0=new jsts.geom.LineSegment();this.seg1=new jsts.geom.LineSegment();this.offset0=new jsts.geom.LineSegment();this.offset1=new jsts.geom.LineSegment();this.precisionModel=a;this.bufParams=b;this.li=new jsts.algorithm.RobustLineIntersector();this.filletAngleQuantum=Math.PI/2/b.getQuadrantSegments();if(this.bufParams.getQuadrantSegments()>=8&&this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_ROUND){this.closingSegLengthFactor=jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR}this.init(c)};jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR=0.001;jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=0.001;jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=0.000001;jsts.operation.buffer.OffsetSegmentGenerator.MAX_CLOSING_SEG_LEN_FACTOR=80;jsts.operation.buffer.OffsetSegmentGenerator.prototype.maxCurveSegmentError=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.filletAngleQuantum=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.closingSegLengthFactor=1;jsts.operation.buffer.OffsetSegmentGenerator.prototype.segList=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.distance=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.bufParams=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.li=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.s2=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.seg1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset0=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.offset1=null;jsts.operation.buffer.OffsetSegmentGenerator.prototype.side=0;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=false;jsts.operation.buffer.OffsetSegmentGenerator.prototype.hasNarrowConcaveAngle=function(){return this.hasNarrowConcaveAngle};jsts.operation.buffer.OffsetSegmentGenerator.prototype.init=function(a){this.distance=a;this.maxCurveSegmentError=this.distance*(1-Math.cos(this.filletAngleQuantum/2));this.segList=new jsts.operation.buffer.OffsetSegmentString();this.segList.setPrecisionModel(this.precisionModel);this.segList.setMinimumVertexDistance(this.distance*jsts.operation.buffer.OffsetSegmentGenerator.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.initSideSegments=function(c,a,b){this.s1=c;this.s2=a;this.side=b;this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.getCoordinates=function(){return this.segList.getCoordinates()};jsts.operation.buffer.OffsetSegmentGenerator.prototype.closeRing=function(){this.segList.closeRing()};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addSegments=function(b,a){this.segList.addPts(b,a)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFirstSegment=function(){this.segList.addPt(this.offset1.p0)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLastSegment=function(){this.segList.addPt(this.offset1.p1)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addNextSegment=function(d,b){this.s0=this.s1;this.s1=this.s2;this.s2=d;this.seg0.setCoordinates(this.s0,this.s1);this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0);this.seg1.setCoordinates(this.s1,this.s2);this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1);if(this.s1.equals(this.s2)){return}var a=jsts.algorithm.CGAlgorithms.computeOrientation(this.s0,this.s1,this.s2);var c=(a===jsts.algorithm.CGAlgorithms.CLOCKWISE&&this.side===jsts.geomgraph.Position.LEFT)||(a===jsts.algorithm.CGAlgorithms.COUNTERCLOCKWISE&&this.side===jsts.geomgraph.Position.RIGHT);if(a==0){this.addCollinear(b)}else{if(c){this.addOutsideTurn(a,b)}else{this.addInsideTurn(a,b)}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addCollinear=function(b){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var a=this.li.getIntersectionNum();if(a>=2){if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL||this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){if(b){this.segList.addPt(this.offset0.p1)}this.segList.addPt(this.offset1.p0)}else{this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance)}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addOutsideTurn=function(b,a){if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.OFFSET_SEGMENT_SEPARATION_FACTOR){this.segList.addPt(this.offset0.p1);return}if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_MITRE){this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance)}else{if(this.bufParams.getJoinStyle()===jsts.operation.buffer.BufferParameters.JOIN_BEVEL){this.addBevelJoin(this.offset0,this.offset1)}else{if(a){this.segList.addPt(this.offset0.p1)}this.addFillet(this.s1,this.offset0.p1,this.offset1.p0,b,this.distance);this.segList.addPt(this.offset1.p0)}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addInsideTurn=function(b,a){this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1);if(this.li.hasIntersection()){this.segList.addPt(this.li.getIntersection(0))}else{this.hasNarrowConcaveAngle=true;if(this.offset0.p1.distance(this.offset1.p0)<this.distance*jsts.operation.buffer.OffsetSegmentGenerator.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR){this.segList.addPt(this.offset0.p1)}else{this.segList.addPt(this.offset0.p1);if(this.closingSegLengthFactor>0){var d=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(d);var c=new jsts.geom.Coordinate((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(c)}else{this.segList.addPt(this.s1)}this.segList.addPt(this.offset1.p0)}}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.computeOffsetSegment=function(e,g,c,d){var h=g===jsts.geomgraph.Position.LEFT?1:-1;var k=e.p1.x-e.p0.x;var j=e.p1.y-e.p0.y;var f=Math.sqrt(k*k+j*j);var b=h*c*k/f;var a=h*c*j/f;d.p0.x=e.p0.x-a;d.p0.y=e.p0.y+b;d.p1.x=e.p1.x-a;d.p1.y=e.p1.y+b};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLineEndCap=function(h,g){var e=new jsts.geom.LineSegment(h,g);var l=new jsts.geom.LineSegment();this.computeOffsetSegment(e,jsts.geomgraph.Position.LEFT,this.distance,l);var f=new jsts.geom.LineSegment();this.computeOffsetSegment(e,jsts.geomgraph.Position.RIGHT,this.distance,f);var k=g.x-h.x;var j=g.y-h.y;var c=Math.atan2(j,k);switch(this.bufParams.getEndCapStyle()){case jsts.operation.buffer.BufferParameters.CAP_ROUND:this.segList.addPt(l.p1);this.addFillet(g,c+Math.PI/2,c-Math.PI/2,jsts.algorithm.CGAlgorithms.CLOCKWISE,this.distance);this.segList.addPt(f.p1);break;case jsts.operation.buffer.BufferParameters.CAP_FLAT:this.segList.addPt(l.p1);this.segList.addPt(f.p1);break;case jsts.operation.buffer.BufferParameters.CAP_SQUARE:var b=new jsts.geom.Coordinate();b.x=Math.abs(this.distance)*Math.cos(c);b.y=Math.abs(this.distance)*Math.sin(c);var a=new jsts.geom.Coordinate(l.p1.x+b.x,l.p1.y+b.y);var d=new jsts.geom.Coordinate(f.p1.x+b.x,f.p1.y+b.y);this.segList.addPt(a);this.segList.addPt(d);break}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addMitreJoin=function(g,d,c,j){var b=true;var a=null;try{a=jsts.algorithm.HCoordinate.intersection(d.p0,d.p1,c.p0,c.p1);var h=j<=0?1:a.distance(g)/Math.abs(j);if(h>this.bufParams.getMitreLimit()){this.isMitreWithinLimit=false}}catch(f){if(f instanceof jsts.error.NotRepresentableError){a=new jsts.geom.Coordinate(0,0);this.isMitreWithinLimit=false}}if(b){this.segList.addPt(a)}else{this.addLimitedMitreJoin(d,c,j,bufParams.getMitreLimit())}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addLimitedMitreJoin=function(t,s,f,b){var r=this.seg0.p1;var m=jsts.algorithm.Angle.angle(r,this.seg0.p0);var l=jsts.algorithm.Angle.angle(r,this.seg1.p1);var q=jsts.algorithm.Angle.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1);var k=q/2;var h=jsts.algorithm.Angle.normalize(m+k);var j=jsts.algorithm.Angle.normalize(h+Math.PI);var c=b*f;var o=c*Math.abs(Math.sin(k));var g=f-o;var e=r.x+c*Math.cos(j);var d=r.y+c*Math.sin(j);var a=new jsts.geom.Coordinate(e,d);var n=new jsts.geom.LineSegment(r,a);var u=n.pointAlongOffset(1,g);var v=n.pointAlongOffset(1,-g);if(this.side==jsts.geomgraph.Position.LEFT){this.segList.addPt(u);this.segList.addPt(v)}else{this.segList.addPt(v);this.segList.addPt(u)}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addBevelJoin=function(b,a){this.segList.addPt(b.p1);this.segList.addPt(a.p0)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet=function(a,l,j,g,e){if(!(j instanceof jsts.geom.Coordinate)){this.addFillet2.apply(this,arguments);return}var k=l.x-a.x;var d=l.y-a.y;var f=Math.atan2(d,k);var h=j.x-a.x;var c=j.y-a.y;var b=Math.atan2(c,h);if(g===jsts.algorithm.CGAlgorithms.CLOCKWISE){if(f<=b){f+=2*Math.PI}}else{if(f>=b){f-=2*Math.PI}}this.segList.addPt(l);this.addFillet(a,f,b,g,e);this.segList.addPt(j)};jsts.operation.buffer.OffsetSegmentGenerator.prototype.addFillet2=function(a,g,c,k,f){var n=k===jsts.algorithm.CGAlgorithms.CLOCKWISE?-1:1;var h=Math.abs(g-c);var l=parseInt((h/this.filletAngleQuantum+0.5));if(l<1){return}var b,e;b=0;e=h/l;var j=b;var m=new jsts.geom.Coordinate();while(j<h){var d=g+n*j;m.x=a.x+f*Math.cos(d);m.y=a.y+f*Math.sin(d);this.segList.addPt(m);j+=e}};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createCircle=function(b){var a=new jsts.geom.Coordinate(b.x+this.distance,b.y);this.segList.addPt(a);this.addFillet(b,0,2*Math.PI,-1,this.distance);this.segList.closeRing()};jsts.operation.buffer.OffsetSegmentGenerator.prototype.createSquare=function(a){this.segList.addPt(new jsts.geom.Coordinate(a.x+distance,a.y+distance));this.segList.addPt(new jsts.geom.Coordinate(a.x+distance,a.y-distance));this.segList.addPt(new jsts.geom.Coordinate(a.x-distance,a.y-distance));this.segList.addPt(new jsts.geom.Coordinate(a.x-distance,a.y+distance));this.segList.closeRing()};jsts.geom.CoordinateArrays=function(){throw new jsts.error.AbstractMethodInvocationError()};jsts.geom.CoordinateArrays.removeRepeatedPoints=function(b){var a;if(!this.hasRepeatedPoints(b)){return b}a=new jsts.geom.CoordinateList(b,false);return a};jsts.geom.CoordinateArrays.hasRepeatedPoints=function(b){var a;for(a=1;a<b.length;a++){if(b[a-1].equals(b[a])){return true}}return false};jsts.geom.CoordinateArrays.ptNotInList=function(c,d){for(var b=0;b<c.length;b++){var a=c[b];if(jsts.geom.CoordinateArrays.indexOf(a,d)<0){return a}}return null};jsts.geom.CoordinateArrays.increasingDirection=function(d){for(var c=0;c<parseInt(d.length/2);c++){var b=d.length-1-c;var a=d[c].compareTo(d[b]);if(a!=0){return a}}return 1};jsts.geom.CoordinateArrays.minCoordinate=function(b){var c=null;for(var a=0;a<b.length;a++){if(c===null||c.compareTo(b[a])>0){c=b[a]}}return c};jsts.geom.CoordinateArrays.scroll=function(c,b){var a=jsts.geom.CoordinateArrays.indexOf(b,c);if(a<0){return}var d=c.slice(a).concat(c.slice(0,a));for(a=0;a<d.length;a++){c[a]=d[a]}};jsts.geom.CoordinateArrays.indexOf=function(c,b){for(var a=0;a<b.length;a++){if(c.equals(b[a])){return a}}return -1};jsts.operation.overlay.MinimalEdgeRing=function(b,a){jsts.geomgraph.EdgeRing.call(this,b,a)};jsts.operation.overlay.MinimalEdgeRing.prototype=new jsts.geomgraph.EdgeRing();jsts.operation.overlay.MinimalEdgeRing.constructor=jsts.operation.overlay.MinimalEdgeRing;jsts.operation.overlay.MinimalEdgeRing.prototype.getNext=function(a){return a.getNextMin()};jsts.operation.overlay.MinimalEdgeRing.prototype.setEdgeRing=function(b,a){b.setMinEdgeRing(a)};jsts.triangulate.DelaunayTriangulationBuilder=function(){this.siteCoords=null;this.tolerance=0;this.subdiv=null};jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates=function(a){if(a===undefined||a===null){return new jsts.geom.CoordinateList([],false)}var b=a.getCoordinates();return jsts.triangulate.DelaunayTriangulationBuilder.unique(b)};jsts.triangulate.DelaunayTriangulationBuilder.unique=function(b){b.sort(function(d,c){return d.compareTo(c)});var a=new jsts.geom.CoordinateList(b,false);return a.toArray()};jsts.triangulate.DelaunayTriangulationBuilder.toVertices=function(c){var e=new Array(c.length),b=0,a=c.length,d;for(b;b<a;b++){d=c[b];e[b]=new jsts.triangulate.quadedge.Vertex(d)}return e};jsts.triangulate.DelaunayTriangulationBuilder.envelope=function(d){var c=new jsts.geom.Envelope(),b=0,a=d.length;for(b;b<a;b++){c.expandToInclude(d[b])}return c};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSites=function(){var a=arguments[0];if(a instanceof jsts.geom.Geometry||a instanceof jsts.geom.Coordinate||a instanceof jsts.geom.Point||a instanceof jsts.geom.MultiPoint||a instanceof jsts.geom.LineString||a instanceof jsts.geom.MultiLineString||a instanceof jsts.geom.LinearRing||a instanceof jsts.geom.Polygon||a instanceof jsts.geom.MultiPolygon){this.setSitesFromGeometry(a)}else{this.setSitesFromCollection(a)}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromGeometry=function(a){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.extractUniqueCoordinates(a)};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setSitesFromCollection=function(a){this.siteCoords=jsts.triangulate.DelaunayTriangulationBuilder.unique(a)};jsts.triangulate.DelaunayTriangulationBuilder.prototype.setTolerance=function(a){this.tolerance=a};jsts.triangulate.DelaunayTriangulationBuilder.prototype.create=function(){if(this.subdiv===null){var c,a,b;c=jsts.triangulate.DelaunayTriangulationBuilder.envelope(this.siteCoords);a=jsts.triangulate.DelaunayTriangulationBuilder.toVertices(this.siteCoords);this.subdiv=new jsts.triangulate.quadedge.QuadEdgeSubdivision(c,this.tolerance);b=new jsts.triangulate.IncrementalDelaunayTriangulator(this.subdiv);b.insertSites(a)}};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getSubdivision=function(){this.create();return this.subdiv};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getEdges=function(a){this.create();return this.subdiv.getEdges(a)};jsts.triangulate.DelaunayTriangulationBuilder.prototype.getTriangles=function(a){this.create();return this.subdiv.getTriangles(a)};jsts.algorithm.RayCrossingCounter=function(a){this.p=a};jsts.algorithm.RayCrossingCounter.locatePointInRing=function(e,b){var a=new jsts.algorithm.RayCrossingCounter(e);for(var c=1;c<b.length;c++){var f=b[c];var d=b[c-1];a.countSegment(f,d);if(a.isOnSegment()){return a.getLocation()}}return a.getLocation()};jsts.algorithm.RayCrossingCounter.prototype.p=null;jsts.algorithm.RayCrossingCounter.prototype.crossingCount=0;jsts.algorithm.RayCrossingCounter.prototype.isPointOnSegment=false;jsts.algorithm.RayCrossingCounter.prototype.countSegment=function(h,g){if(h.x<this.p.x&&g.x<this.p.x){return}if(this.p.x==g.x&&this.p.y===g.y){this.isPointOnSegment=true;return}if(h.y===this.p.y&&g.y===this.p.y){var j=h.x;var d=g.x;if(j>d){j=g.x;d=h.x}if(this.p.x>=j&&this.p.x<=d){this.isPointOnSegment=true}return}if(((h.y>this.p.y)&&(g.y<=this.p.y))||((g.y>this.p.y)&&(h.y<=this.p.y))){var b=h.x-this.p.x;var f=h.y-this.p.y;var a=g.x-this.p.x;var e=g.y-this.p.y;var c=jsts.algorithm.RobustDeterminant.signOfDet2x2(b,f,a,e);if(c===0){this.isPointOnSegment=true;return}if(e<f){c=-c}if(c>0){this.crossingCount++}}};jsts.algorithm.RayCrossingCounter.prototype.isOnSegment=function(){return jsts.geom.isPointOnSegment};jsts.algorithm.RayCrossingCounter.prototype.getLocation=function(){if(this.isPointOnSegment){return jsts.geom.Location.BOUNDARY}if((this.crossingCount%2)===1){return jsts.geom.Location.INTERIOR}return jsts.geom.Location.EXTERIOR};jsts.algorithm.RayCrossingCounter.prototype.isPointInPolygon=function(){return this.getLocation()!==jsts.geom.Location.EXTERIOR};jsts.operation.BoundaryOp=function(a,b){this.geom=a;this.geomFact=a.getFactory();this.bnRule=b||jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE};jsts.operation.BoundaryOp.prototype.geom=null;jsts.operation.BoundaryOp.prototype.geomFact=null;jsts.operation.BoundaryOp.prototype.bnRule=null;jsts.operation.BoundaryOp.prototype.getBoundary=function(){if(this.geom instanceof jsts.geom.LineString){return this.boundaryLineString(this.geom)}if(this.geom instanceof jsts.geom.MultiLineString){return this.boundaryMultiLineString(this.geom)}return this.geom.getBoundary()};jsts.operation.BoundaryOp.prototype.getEmptyMultiPoint=function(){return this.geomFact.createMultiPoint(null)};jsts.operation.BoundaryOp.prototype.boundaryMultiLineString=function(b){if(this.geom.isEmpty()){return this.getEmptyMultiPoint()}var a=this.computeBoundaryCoordinates(b);if(a.length==1){return this.geomFact.createPoint(a[0])}return this.geomFact.createMultiPoint(a)};jsts.operation.BoundaryOp.prototype.endpoints=null;jsts.operation.BoundaryOp.prototype.computeBoundaryCoordinates=function(c){var d,a,e,b=[];this.endpoints=[];for(d=0;d<c.getNumGeometries();d++){a=c.getGeometryN(d);if(a.getNumPoints()==0){continue}this.addEndpoint(a.getCoordinateN(0));this.addEndpoint(a.getCoordinateN(a.getNumPoints()-1))}for(d=0;d<this.endpoints.length;d++){e=this.endpoints[d];if(this.bnRule.isInBoundary(e.count)){b.push(e.coordinate)}}return b};jsts.operation.BoundaryOp.prototype.addEndpoint=function(c){var a,d,b=false;for(a=0;a<this.endpoints.length;a++){d=this.endpoints[a];if(d.coordinate.equals(c)){b=true;break}}if(!b){d={};d.coordinate=c;d.count=0;this.endpoints.push(d)}d.count++};jsts.operation.BoundaryOp.prototype.boundaryLineString=function(a){if(this.geom.isEmpty()){return this.getEmptyMultiPoint()}if(a.isClosed()){var b=this.bnRule.isInBoundary(2);if(b){return a.getStartPoint()}else{return this.geomFact.createMultiPoint(null)}}return this.geomFact.createMultiPoint([a.getStartPoint(),a.getEndPoint()])};jsts.operation.buffer.OffsetCurveSetBuilder=function(b,c,a){this.inputGeom=b;this.distance=c;this.curveBuilder=a;this.curveList=new javascript.util.ArrayList()};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.inputGeom=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.distance=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveBuilder=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.curveList=null;jsts.operation.buffer.OffsetCurveSetBuilder.prototype.getCurves=function(){this.add(this.inputGeom);return this.curveList};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCurve=function(d,a,b){if(d==null||d.length<2){return}var c=new jsts.noding.NodedSegmentString(d,new jsts.geomgraph.Label(0,jsts.geom.Location.BOUNDARY,a,b));this.curveList.add(c)};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.add=function(a){if(a.isEmpty()){return}if(a instanceof jsts.geom.Polygon){this.addPolygon(a)}else{if(a instanceof jsts.geom.LineString){this.addLineString(a)}else{if(a instanceof jsts.geom.Point){this.addPoint(a)}else{if(a instanceof jsts.geom.MultiPoint){this.addCollection(a)}else{if(a instanceof jsts.geom.MultiLineString){this.addCollection(a)}else{if(a instanceof jsts.geom.MultiPolygon){this.addCollection(a)}else{if(a instanceof jsts.geom.GeometryCollection){this.addCollection(a)}else{throw new jsts.error.IllegalArgumentError()}}}}}}}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addCollection=function(c){for(var a=0;a<c.getNumGeometries();a++){var b=c.getGeometryN(a);this.add(b)}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPoint=function(a){if(this.distance<=0){return}var c=a.getCoordinates();var b=this.curveBuilder.getLineCurve(c,this.distance);this.addCurve(b,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addLineString=function(a){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided()){return}var c=jsts.geom.CoordinateArrays.removeRepeatedPoints(a.getCoordinates());var b=this.curveBuilder.getLineCurve(c,this.distance);this.addCurve(b,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR)};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygon=function(f){var h=this.distance;var b=jsts.geomgraph.Position.LEFT;if(this.distance<0){h=-this.distance;b=jsts.geomgraph.Position.RIGHT}var d=f.getExteriorRing();var a=jsts.geom.CoordinateArrays.removeRepeatedPoints(d.getCoordinates());if(this.distance<0&&this.isErodedCompletely(d,this.distance)){return}if(this.distance<=0&&a.length<3){return}this.addPolygonRing(a,h,b,jsts.geom.Location.EXTERIOR,jsts.geom.Location.INTERIOR);for(var c=0;c<f.getNumInteriorRing();c++){var e=f.getInteriorRingN(c);var g=jsts.geom.CoordinateArrays.removeRepeatedPoints(e.getCoordinates());if(this.distance>0&&this.isErodedCompletely(e,-this.distance)){continue}this.addPolygonRing(g,h,jsts.geomgraph.Position.opposite(b),jsts.geom.Location.INTERIOR,jsts.geom.Location.EXTERIOR)}};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.addPolygonRing=function(h,g,b,f,d){if(g==0&&h.length<jsts.geom.LinearRing.MINIMUM_VALID_SIZE){return}var a=f;var c=d;if(h.length>=jsts.geom.LinearRing.MINIMUM_VALID_SIZE&&jsts.algorithm.CGAlgorithms.isCCW(h)){a=d;c=f;b=jsts.geomgraph.Position.opposite(b)}var e=this.curveBuilder.getRingCurve(h,b,g);this.addCurve(e,a,c)};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isErodedCompletely=function(b,e){var f=b.getCoordinates();var d=0;if(f.length<4){return e<0}if(f.length==4){return this.isTriangleErodedCompletely(f,e)}var c=b.getEnvelopeInternal();var a=Math.min(c.getHeight(),c.getWidth());if(e<0&&2*Math.abs(e)>a){return true}return false};jsts.operation.buffer.OffsetCurveSetBuilder.prototype.isTriangleErodedCompletely=function(c,d){var e=new Triangle(c[0],c[1],c[2]);var a=e.inCentre();var b=jsts.algorithm.CGAlgorithms.distancePointLine(a,e.p0,e.p1);return b<Math.abs(d)};jsts.operation.buffer.BufferSubgraph=function(){this.dirEdgeList=new javascript.util.ArrayList();this.nodes=new javascript.util.ArrayList();this.finder=new jsts.operation.buffer.RightmostEdgeFinder()};jsts.operation.buffer.BufferSubgraph.prototype.finder=null;jsts.operation.buffer.BufferSubgraph.prototype.dirEdgeList=null;jsts.operation.buffer.BufferSubgraph.prototype.nodes=null;jsts.operation.buffer.BufferSubgraph.prototype.rightMostCoord=null;jsts.operation.buffer.BufferSubgraph.prototype.env=null;jsts.operation.buffer.BufferSubgraph.prototype.getDirectedEdges=function(){return this.dirEdgeList};jsts.operation.buffer.BufferSubgraph.prototype.getNodes=function(){return this.nodes};jsts.operation.buffer.BufferSubgraph.prototype.getEnvelope=function(){if(this.env===null){var e=new jsts.geom.Envelope();for(var b=this.dirEdgeList.iterator();b.hasNext();){var c=b.next();var d=c.getEdge().getCoordinates();for(var a=0;a<d.length-1;a++){e.expandToInclude(d[a])}}this.env=e}return this.env};jsts.operation.buffer.BufferSubgraph.prototype.getRightmostCoordinate=function(){return this.rightMostCoord};jsts.operation.buffer.BufferSubgraph.prototype.create=function(a){this.addReachable(a);this.finder.findEdge(this.dirEdgeList);this.rightMostCoord=this.finder.getCoordinate()};jsts.operation.buffer.BufferSubgraph.prototype.addReachable=function(a){var c=[];c.push(a);while(c.length!==0){var b=c.pop();this.add(b,c)}};jsts.operation.buffer.BufferSubgraph.prototype.add=function(d,e){d.setVisited(true);this.nodes.add(d);for(var b=d.getEdges().iterator();b.hasNext();){var f=b.next();this.dirEdgeList.add(f);var a=f.getSym();var c=a.getNode();if(!c.isVisited()){e.push(c)}}};jsts.operation.buffer.BufferSubgraph.prototype.clearVisitedEdges=function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var b=a.next();b.setVisited(false)}};jsts.operation.buffer.BufferSubgraph.prototype.computeDepth=function(d){this.clearVisitedEdges();var c=this.finder.getEdge();var b=c.getNode();var a=c.getLabel();c.setEdgeDepths(jsts.geomgraph.Position.RIGHT,d);this.copySymDepths(c);this.computeDepths(c)};jsts.operation.buffer.BufferSubgraph.prototype.computeDepths=function(a){var g=[];var e=[];var b=a.getNode();e.push(b);g.push(b);a.setVisited(true);while(e.length!==0){var d=e.shift();g.push(d);this.computeNodeDepth(d);for(var f=d.getEdges().iterator();f.hasNext();){var j=f.next();var c=j.getSym();if(c.isVisited()){continue}var h=c.getNode();if(g.indexOf(h)===-1){e.push(h);g.push(h)}}}};jsts.operation.buffer.BufferSubgraph.prototype.computeNodeDepth=function(d){var a=null;for(var b=d.getEdges().iterator();b.hasNext();){var c=b.next();if(c.isVisited()||c.getSym().isVisited()){a=c;break}}if(a==null){throw new jsts.error.TopologyError("unable to find edge to compute depths at "+d.getCoordinate())}d.getEdges().computeDepths(a);for(var b=d.getEdges().iterator();b.hasNext();){var c=b.next();c.setVisited(true);this.copySymDepths(c)}};jsts.operation.buffer.BufferSubgraph.prototype.copySymDepths=function(b){var a=b.getSym();a.setDepth(jsts.geomgraph.Position.LEFT,b.getDepth(jsts.geomgraph.Position.RIGHT));a.setDepth(jsts.geomgraph.Position.RIGHT,b.getDepth(jsts.geomgraph.Position.LEFT))};jsts.operation.buffer.BufferSubgraph.prototype.findResultEdges=function(){for(var a=this.dirEdgeList.iterator();a.hasNext();){var b=a.next();if(b.getDepth(jsts.geomgraph.Position.RIGHT)>=1&&b.getDepth(jsts.geomgraph.Position.LEFT)<=0&&!b.isInteriorAreaEdge()){b.setInResult(true)}}};jsts.operation.buffer.BufferSubgraph.prototype.compareTo=function(b){var a=b;if(this.rightMostCoord.x<a.rightMostCoord.x){return -1}if(this.rightMostCoord.x>a.rightMostCoord.x){return 1}return 0};jsts.geom.util.GeometryExtracter=function(a,b){this.clz=a;this.comps=b};jsts.geom.util.GeometryExtracter.prototype=new jsts.geom.GeometryFilter();jsts.geom.util.GeometryExtracter.prototype.clz=null;jsts.geom.util.GeometryExtracter.prototype.comps=null;jsts.geom.util.GeometryExtracter.extract=function(a,b,c){c=c||new javascript.util.ArrayList();if(a instanceof b){c.add(a)}else{if(a instanceof jsts.geom.GeometryCollection||a instanceof jsts.geom.MultiPoint||a instanceof jsts.geom.MultiLineString||a instanceof jsts.geom.MultiPolygon){a.apply(new jsts.geom.util.GeometryExtracter(b,c))}}return c};jsts.geom.util.GeometryExtracter.prototype.filter=function(a){if(this.clz===null||a instanceof this.clz){this.comps.add(a)}};(function(){var b=jsts.operation.overlay.OverlayOp;var a=jsts.operation.overlay.snap.SnapOverlayOp;var c=function(e,d){this.geom=[];this.geom[0]=e;this.geom[1]=d};c.overlayOp=function(e,d,f){var g=new c(e,d);return g.getResultGeometry(f)};c.intersection=function(e,d){return overlayOp(e,d,b.INTERSECTION)};c.union=function(e,d){return overlayOp(e,d,b.UNION)};c.difference=function(e,d){return overlayOp(e,d,b.DIFFERENCE)};c.symDifference=function(e,d){return overlayOp(e,d,b.SYMDIFFERENCE)};c.prototype.geom=null;c.prototype.getResultGeometry=function(g){var e=null;var d=false;var j=null;try{e=b.overlayOp(this.geom[0],this.geom[1],g);var h=true;if(h){d=true}}catch(f){j=f}if(!d){try{e=a.overlayOp(this.geom[0],this.geom[1],g)}catch(f){throw j}}return e};jsts.operation.overlay.snap.SnapIfNeededOverlayOp=c})();(function(){var f=jsts.geom.util.GeometryExtracter;var b=jsts.operation.union.CascadedPolygonUnion;var e=jsts.operation.union.PointGeometryUnion;var c=jsts.operation.overlay.OverlayOp;var d=jsts.operation.overlay.snap.SnapIfNeededOverlayOp;var a=javascript.util.ArrayList;jsts.operation.union.UnaryUnionOp=function(g,h){this.polygons=new a();this.lines=new a();this.points=new a();if(h){this.geomFact=h}this.extract(g)};jsts.operation.union.UnaryUnionOp.union=function(g,j){var h=new jsts.operation.union.UnaryUnionOp(g,j);return h.union()};jsts.operation.union.UnaryUnionOp.prototype.polygons=null;jsts.operation.union.UnaryUnionOp.prototype.lines=null;jsts.operation.union.UnaryUnionOp.prototype.points=null;jsts.operation.union.UnaryUnionOp.prototype.geomFact=null;jsts.operation.union.UnaryUnionOp.prototype.extract=function(j){if(j instanceof a){for(var h=j.iterator();h.hasNext();){var g=h.next();this.extract(g)}}else{if(this.geomFact===null){this.geomFact=j.getFactory()}f.extract(j,jsts.geom.Polygon,this.polygons);f.extract(j,jsts.geom.LineString,this.lines);f.extract(j,jsts.geom.Point,this.points)}};jsts.operation.union.UnaryUnionOp.prototype.union=function(){if(this.geomFact===null){return null}var n=null;if(this.points.size()>0){var j=this.geomFact.buildGeometry(this.points);n=this.unionNoOpt(j)}var l=null;if(this.lines.size()>0){var k=this.geomFact.buildGeometry(this.lines);l=this.unionNoOpt(k)}var h=null;if(this.polygons.size()>0){h=b.union(this.polygons)}var g=this.unionWithNull(l,h);var m=null;if(n===null){m=g}else{if(g===null){m=n}else{m=e(n,g)}}if(m===null){return this.geomFact.createGeometryCollection(null)}return m};jsts.operation.union.UnaryUnionOp.prototype.unionWithNull=function(h,g){if(h===null&&g===null){return null}if(g===null){return h}if(h===null){return g}return h.union(g)};jsts.operation.union.UnaryUnionOp.prototype.unionNoOpt=function(g){var h=this.geomFact.createPoint(null);return d.overlayOp(g,h,c.UNION)}}());jsts.index.kdtree.KdNode=function(){this.left=null;this.right=null;this.count=1;if(arguments.length===2){this.initializeFromCoordinate.apply(this,arguments[0],arguments[1])}else{if(arguments.length===3){this.initializeFromXY.apply(this,arguments[0],arguments[1],arguments[2])}}};jsts.index.kdtree.KdNode.prototype.initializeFromXY=function(a,c,b){this.p=new jsts.geom.Coordinate(a,c);this.data=b};jsts.index.kdtree.KdNode.prototype.initializeFromCoordinate=function(b,a){this.p=b;this.data=a};jsts.index.kdtree.KdNode.prototype.getX=function(){return this.p.x};jsts.index.kdtree.KdNode.prototype.getY=function(){return this.p.y};jsts.index.kdtree.KdNode.prototype.getCoordinate=function(){return this.p};jsts.index.kdtree.KdNode.prototype.getData=function(){return this.data};jsts.index.kdtree.KdNode.prototype.getLeft=function(){return this.left};jsts.index.kdtree.KdNode.prototype.getRight=function(){return this.right};jsts.index.kdtree.KdNode.prototype.increment=function(){this.count+=1};jsts.index.kdtree.KdNode.prototype.getCount=function(){return this.count};jsts.index.kdtree.KdNode.prototype.isRepeated=function(){return count>1};jsts.index.kdtree.KdNode.prototype.setLeft=function(a){this.left=a};jsts.index.kdtree.KdNode.prototype.setRight=function(a){this.right=a};(function(){jsts.geom.MultiLineString=function(b,a){this.geometries=b||[];this.factory=a};jsts.geom.MultiLineString.prototype=new jsts.geom.GeometryCollection();jsts.geom.MultiLineString.constructor=jsts.geom.MultiLineString;jsts.geom.MultiLineString.prototype.getBoundary=function(){return(new jsts.operation.BoundaryOp(this)).getBoundary()};jsts.geom.MultiLineString.prototype.equalsExact=function(a,b){if(!this.isEquivalentClass(a)){return false}return jsts.geom.GeometryCollection.prototype.equalsExact.call(this,a,b)};jsts.geom.MultiLineString.prototype.CLASS_NAME="jsts.geom.MultiLineString"})();jsts.algorithm.BoundaryNodeRule=function(){};jsts.algorithm.BoundaryNodeRule.prototype.isInBoundary=function(a){throw new jsts.error.AbstractMethodInvocationError()};jsts.algorithm.Mod2BoundaryNodeRule=function(){};jsts.algorithm.Mod2BoundaryNodeRule.prototype=new jsts.algorithm.BoundaryNodeRule();jsts.algorithm.Mod2BoundaryNodeRule.prototype.isInBoundary=function(a){return a%2===1};jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE=new jsts.algorithm.Mod2BoundaryNodeRule();jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE=jsts.algorithm.BoundaryNodeRule.MOD2_BOUNDARY_RULE;jsts.operation.buffer.BufferBuilder=function(a){this.bufParams=a;this.edgeList=new jsts.geomgraph.EdgeList()};jsts.operation.buffer.BufferBuilder.depthDelta=function(b){var a=b.getLocation(0,jsts.geomgraph.Position.LEFT);var c=b.getLocation(0,jsts.geomgraph.Position.RIGHT);if(a===jsts.geom.Location.INTERIOR&&c===jsts.geom.Location.EXTERIOR){return 1}else{if(a===jsts.geom.Location.EXTERIOR&&c===jsts.geom.Location.INTERIOR){return -1}}return 0};jsts.operation.buffer.BufferBuilder.prototype.bufParams=null;jsts.operation.buffer.BufferBuilder.prototype.workingPrecisionModel=null;jsts.operation.buffer.BufferBuilder.prototype.workingNoder=null;jsts.operation.buffer.BufferBuilder.prototype.geomFact=null;jsts.operation.buffer.BufferBuilder.prototype.graph=null;jsts.operation.buffer.BufferBuilder.prototype.edgeList=null;jsts.operation.buffer.BufferBuilder.prototype.setWorkingPrecisionModel=function(a){this.workingPrecisionModel=a};jsts.operation.buffer.BufferBuilder.prototype.setNoder=function(a){this.workingNoder=a};jsts.operation.buffer.BufferBuilder.prototype.buffer=function(h,a){var l=this.workingPrecisionModel;if(l===null){l=h.getPrecisionModel()}this.geomFact=h.getFactory();var k=new jsts.operation.buffer.OffsetCurveBuilder(l,this.bufParams);var c=new jsts.operation.buffer.OffsetCurveSetBuilder(h,a,k);var j=c.getCurves();if(j.size()<=0){return this.createEmptyResultGeometry()}this.computeNodedEdges(j,l);this.graph=new jsts.geomgraph.PlanarGraph(new jsts.operation.overlay.OverlayNodeFactory());this.graph.addEdges(this.edgeList.getEdges());var f=this.createSubgraphs(this.graph);var d=new jsts.operation.overlay.PolygonBuilder(this.geomFact);this.buildSubgraphs(f,d);var b=d.getPolygons();if(b.size()<=0){return this.createEmptyResultGeometry()}var e=this.geomFact.buildGeometry(b);return e};jsts.operation.buffer.BufferBuilder.prototype.getNoder=function(c){if(this.workingNoder!==null){return this.workingNoder}var b=new jsts.noding.MCIndexNoder();var a=new jsts.algorithm.RobustLineIntersector();a.setPrecisionModel(c);b.setSegmentIntersector(new jsts.noding.IntersectionAdder(a));return b};jsts.operation.buffer.BufferBuilder.prototype.computeNodedEdges=function(g,c){var b=this.getNoder(c);b.computeNodes(g);var f=b.getNodedSubstrings();for(var d=f.iterator();d.hasNext();){var a=d.next();var h=a.getData();var e=new jsts.geomgraph.Edge(a.getCoordinates(),new jsts.geomgraph.Label(h));this.insertUniqueEdge(e)}};jsts.operation.buffer.BufferBuilder.prototype.insertUniqueEdge=function(g){var d=this.edgeList.findEqualEdge(g);if(d!=null){var b=d.getLabel();var c=g.getLabel();if(!d.isPointwiseEqual(g)){c=new jsts.geomgraph.Label(g.getLabel());c.flip()}b.merge(c);var h=jsts.operation.buffer.BufferBuilder.depthDelta(c);var f=d.getDepthDelta();var a=f+h;d.setDepthDelta(a)}else{this.edgeList.add(g);g.setDepthDelta(jsts.operation.buffer.BufferBuilder.depthDelta(g.getLabel()))}};jsts.operation.buffer.BufferBuilder.prototype.createSubgraphs=function(f){var c=[];for(var b=f.getNodes().iterator();b.hasNext();){var d=b.next();if(!d.isVisited()){var a=new jsts.operation.buffer.BufferSubgraph();a.create(d);c.push(a)}}var e=function(h,g){return h.compareTo(g)};c.sort(e);c.reverse();return c};jsts.operation.buffer.BufferBuilder.prototype.buildSubgraphs=function(e,c){var g=[];for(var d=0;d<e.length;d++){var a=e[d];var f=a.getRightmostCoordinate();var b=new jsts.operation.buffer.SubgraphDepthLocater(g);var h=b.getDepth(f);a.computeDepth(h);a.findResultEdges();g.push(a);c.add(a.getDirectedEdges(),a.getNodes())}};jsts.operation.buffer.BufferBuilder.convertSegStrings=function(e){var c=new jsts.geom.GeometryFactory();var b=new javascript.util.ArrayList();while(e.hasNext()){var d=e.next();var a=c.createLineString(d.getCoordinates());b.add(a)}return c.buildGeometry(b)};jsts.operation.buffer.BufferBuilder.prototype.createEmptyResultGeometry=function(){var a=this.geomFact.createPolygon(null,null);return a};jsts.operation.relate.EdgeEndBundle=function(){this.edgeEnds=[];var c=arguments[0] instanceof jsts.geomgraph.EdgeEnd?arguments[0]:arguments[1];var b=c.getEdge();var f=c.getCoordinate();var d=c.getDirectedCoordinate();var a=new jsts.geomgraph.Label(c.getLabel());jsts.geomgraph.EdgeEnd.call(this,b,f,d,a);this.insert(c)};jsts.operation.relate.EdgeEndBundle.prototype=new jsts.geomgraph.EdgeEnd();jsts.operation.relate.EdgeEndBundle.prototype.edgeEnds=null;jsts.operation.relate.EdgeEndBundle.prototype.getLabel=function(){return this.label};jsts.operation.relate.EdgeEndBundle.prototype.getEdgeEnds=function(){return this.edgeEnds};jsts.operation.relate.EdgeEndBundle.prototype.insert=function(a){this.edgeEnds.push(a)};jsts.operation.relate.EdgeEndBundle.prototype.computeLabel=function(a){var c=false;for(var b=0;b<this.edgeEnds.length;b++){var d=this.edgeEnds[b];if(d.getLabel().isArea()){c=true}}if(c){this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE,jsts.geom.Location.NONE,jsts.geom.Location.NONE)}else{this.label=new jsts.geomgraph.Label(jsts.geom.Location.NONE)}for(var b=0;b<2;b++){this.computeLabelOn(b,a);if(c){this.computeLabelSides(b)}}};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelOn=function(g,b){var a=0;var c=false;for(var d=0;d<this.edgeEnds.length;d++){var f=this.edgeEnds[d];var h=f.getLabel().getLocation(g);if(h==jsts.geom.Location.BOUNDARY){a++}if(h==jsts.geom.Location.INTERIOR){c=true}}var h=jsts.geom.Location.NONE;if(c){h=jsts.geom.Location.INTERIOR}if(a>0){h=jsts.geomgraph.GeometryGraph.determineBoundary(b,a)}this.label.setLocation(g,h)};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSides=function(a){this.computeLabelSide(a,jsts.geomgraph.Position.LEFT);this.computeLabelSide(a,jsts.geomgraph.Position.RIGHT)};jsts.operation.relate.EdgeEndBundle.prototype.computeLabelSide=function(d,b){for(var a=0;a<this.edgeEnds.length;a++){var c=this.edgeEnds[a];if(c.getLabel().isArea()){var f=c.getLabel().getLocation(d,b);if(f===jsts.geom.Location.INTERIOR){this.label.setLocation(d,b,jsts.geom.Location.INTERIOR);return}else{if(f===jsts.geom.Location.EXTERIOR){this.label.setLocation(d,b,jsts.geom.Location.EXTERIOR)}}}}};jsts.operation.relate.EdgeEndBundle.prototype.updateIM=function(a){jsts.geomgraph.Edge.updateIM(this.label,a)};jsts.index.chain.MonotoneChain=function(c,d,a,b){this.pts=c;this.start=d;this.end=a;this.context=b};jsts.index.chain.MonotoneChain.prototype.pts=null;jsts.index.chain.MonotoneChain.prototype.start=null;jsts.index.chain.MonotoneChain.prototype.end=null;jsts.index.chain.MonotoneChain.prototype.env=null;jsts.index.chain.MonotoneChain.prototype.context=null;jsts.index.chain.MonotoneChain.prototype.id=null;jsts.index.chain.MonotoneChain.prototype.setId=function(a){this.id=a};jsts.index.chain.MonotoneChain.prototype.getId=function(){return this.id};jsts.index.chain.MonotoneChain.prototype.getContext=function(){return this.context};jsts.index.chain.MonotoneChain.prototype.getEnvelope=function(){if(this.env==null){var b=this.pts[this.start];var a=this.pts[this.end];this.env=new jsts.geom.Envelope(b,a)}return this.env};jsts.index.chain.MonotoneChain.prototype.getStartIndex=function(){return this.start};jsts.index.chain.MonotoneChain.prototype.getEndIndex=function(){return this.end};jsts.index.chain.MonotoneChain.prototype.getLineSegment=function(b,a){a.p0=this.pts[b];a.p1=this.pts[b+1]};jsts.index.chain.MonotoneChain.prototype.getCoordinates=function(){var c=[];var a=0;for(var b=this.start;b<=this.end;b++){c[a++]=this.pts[b]}return c};jsts.index.chain.MonotoneChain.prototype.select=function(b,a){this.computeSelect2(b,this.start,this.end,a)};jsts.index.chain.MonotoneChain.prototype.computeSelect2=function(f,c,a,e){var g=this.pts[c];var d=this.pts[a];e.tempEnv1.init(g,d);if(a-c===1){e.select(this,c);return}if(!f.intersects(e.tempEnv1)){return}var b=parseInt((c+a)/2);if(c<b){this.computeSelect2(f,c,b,e)}if(b<a){this.computeSelect2(f,b,a,e)}};jsts.index.chain.MonotoneChain.prototype.computeOverlaps=function(b,a){if(arguments.length===6){return this.computeOverlaps2.apply(this,arguments)}this.computeOverlaps2(this.start,this.end,b,b.start,b.end,a)};jsts.index.chain.MonotoneChain.prototype.computeOverlaps2=function(d,l,m,b,k,e){var j=this.pts[d];var h=this.pts[l];var c=m.pts[b];var a=m.pts[k];if(l-d===1&&k-b===1){e.overlap(this,d,m,b);return}e.tempEnv1.init(j,h);e.tempEnv2.init(c,a);if(!e.tempEnv1.intersects(e.tempEnv2)){return}var g=parseInt((d+l)/2);var f=parseInt((b+k)/2);if(d<g){if(b<f){this.computeOverlaps2(d,g,m,b,f,e)}if(f<k){this.computeOverlaps2(d,g,m,f,k,e)}}if(g<l){if(b<f){this.computeOverlaps2(g,l,m,b,f,e)}if(f<k){this.computeOverlaps2(g,l,m,f,k,e)}}};(function(){var a=jsts.geom.Location;var b=jsts.geom.Dimension;jsts.geom.IntersectionMatrix=function(d){var c=d;if(d===undefined||d===null){this.matrix=[[],[],[]];this.setAll(b.FALSE)}else{if(typeof d==="string"){this.set(d)}else{if(c instanceof jsts.geom.IntersectionMatrix){this.matrix[a.INTERIOR][a.INTERIOR]=c.matrix[a.INTERIOR][a.INTERIOR];this.matrix[a.INTERIOR][a.BOUNDARY]=c.matrix[a.INTERIOR][a.BOUNDARY];this.matrix[a.INTERIOR][a.EXTERIOR]=c.matrix[a.INTERIOR][a.EXTERIOR];this.matrix[a.BOUNDARY][a.INTERIOR]=c.matrix[a.BOUNDARY][a.INTERIOR];this.matrix[a.BOUNDARY][a.BOUNDARY]=c.matrix[a.BOUNDARY][a.BOUNDARY];this.matrix[a.BOUNDARY][a.EXTERIOR]=c.matrix[a.BOUNDARY][a.EXTERIOR];this.matrix[a.EXTERIOR][a.INTERIOR]=c.matrix[a.EXTERIOR][a.INTERIOR];this.matrix[a.EXTERIOR][a.BOUNDARY]=c.matrix[a.EXTERIOR][a.BOUNDARY];this.matrix[a.EXTERIOR][a.EXTERIOR]=c.matrix[a.EXTERIOR][a.EXTERIOR]}}}};jsts.geom.IntersectionMatrix.prototype.matrix=null;jsts.geom.IntersectionMatrix.prototype.add=function(c){var e,d;for(e=0;e<3;e++){for(d=0;d<3;d++){this.setAtLeast(e,d,c.get(e,d))}}};jsts.geom.IntersectionMatrix.matches=function(d,c){if(typeof d==="string"){return jsts.geom.IntersectionMatrix.matches2.call(this,arguments)}if(c==="*"){return true}if(c==="T"&&(d>=0||d===b.TRUE)){return true}if(c==="F"&&d===b.FALSE){return true}if(c==="0"&&d===b.P){return true}if(c==="1"&&d===b.L){return true}if(c==="2"&&d===b.A){return true}return false};jsts.geom.IntersectionMatrix.matches2=function(d,e){var c=new jsts.geom.IntersectionMatrix(d);return c.matches(e)};jsts.geom.IntersectionMatrix.prototype.set=function(e,c,d){if(typeof e==="string"){this.set2(e);return}this.matrix[e][c]=d};jsts.geom.IntersectionMatrix.prototype.set2=function(e){for(var d=0;d<e.length();d++){var f=d/3;var c=d%3;this.matrix[f][c]=b.toDimensionValue(e.charAt(d))}};jsts.geom.IntersectionMatrix.prototype.setAtLeast=function(e,d,c){if(arguments.length===1){this.setAtLeast2(arguments[0]);return}if(this.matrix[e][d]<c){this.matrix[e][d]=c}};jsts.geom.IntersectionMatrix.prototype.setAtLeastIfValid=function(e,d,c){if(e>=0&&d>=0){this.setAtLeast(e,d,c)}};jsts.geom.IntersectionMatrix.prototype.setAtLeast2=function(e){var d;for(d=0;d<e.length;d++){var f=parseInt(d/3);var c=parseInt(d%3);this.setAtLeast(f,c,jsts.geom.Dimension.toDimensionValue(e.charAt(d)))}};jsts.geom.IntersectionMatrix.prototype.setAll=function(e){var c,d;for(c=0;c<3;c++){for(d=0;d<3;d++){this.matrix[c][d]=e}}};jsts.geom.IntersectionMatrix.prototype.get=function(d,c){return this.matrix[d][c]};jsts.geom.IntersectionMatrix.prototype.isDisjoint=function(){return this.matrix[a.INTERIOR][a.INTERIOR]===b.FALSE&&this.matrix[a.INTERIOR][a.BOUNDARY]===b.FALSE&&this.matrix[a.BOUNDARY][a.INTERIOR]===b.FALSE&&this.matrix[a.BOUNDARY][a.BOUNDARY]===b.FALSE};jsts.geom.IntersectionMatrix.prototype.isIntersects=function(){return !this.isDisjoint()};jsts.geom.IntersectionMatrix.prototype.isTouches=function(d,c){if(d>c){return this.isTouches(c,d)}if((d==b.A&&c==b.A)||(d==b.L&&c==b.L)||(d==b.L&&c==b.A)||(d==b.P&&c==b.A)||(d==b.P&&c==b.L)){return this.matrix[a.INTERIOR][a.INTERIOR]===b.FALSE&&(jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.BOUNDARY],"T"))}return false};jsts.geom.IntersectionMatrix.prototype.isCrosses=function(d,c){if((d==b.P&&c==b.L)||(d==b.P&&c==b.A)||(d==b.L&&c==b.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.EXTERIOR],"T")}if((d==b.L&&c==b.P)||(d==b.A&&c==b.P)||(d==b.A&&c==b.L)){return jsts.geom.IntersectionMatrix.matches(matrix[a.INTERIOR][a.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.EXTERIOR][a.INTERIOR],"T")}if(d===b.L&&c===b.L){return this.matrix[a.INTERIOR][a.INTERIOR]===0}return false};jsts.geom.IntersectionMatrix.prototype.isWithin=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")&&this.matrix[a.INTERIOR][a.EXTERIOR]==b.FALSE&&this.matrix[a.BOUNDARY][a.EXTERIOR]==b.FALSE};jsts.geom.IntersectionMatrix.prototype.isContains=function(){return jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")&&this.matrix[a.EXTERIOR][a.INTERIOR]==b.FALSE&&this.matrix[a.EXTERIOR][a.BOUNDARY]==b.FALSE};jsts.geom.IntersectionMatrix.prototype.isCovers=function(){var c=jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.BOUNDARY],"T");return c&&this.matrix[a.EXTERIOR][a.INTERIOR]==b.FALSE&&this.matrix[a.EXTERIOR][a.BOUNDARY]==b.FALSE};jsts.geom.IntersectionMatrix.prototype.isCoveredBy=function(){var c=jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.BOUNDARY],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.INTERIOR],"T")||jsts.geom.IntersectionMatrix.matches(this.matrix[a.BOUNDARY][a.BOUNDARY],"T");return c&&this.matrix[a.INTERIOR][a.EXTERIOR]===b.FALSE&&this.matrix[a.BOUNDARY][a.EXTERIOR]===b.FALSE};jsts.geom.IntersectionMatrix.prototype.isEquals=function(d,c){if(d!==c){return false}return jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")&&this.matrix[a.EXTERIOR][a.INTERIOR]===b.FALSE&&this.matrix[a.INTERIOR][a.EXTERIOR]===b.FALSE&&this.matrix[a.EXTERIOR][a.BOUNDARY]===b.FALSE&&this.matrix[a.BOUNDARY][a.EXTERIOR]===b.FALSE};jsts.geom.IntersectionMatrix.prototype.isOverlaps=function(d,c){if((d==b.P&&c===b.P)||(d==b.A&&c===b.A)){return jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.INTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.EXTERIOR][a.INTERIOR],"T")}if(d===b.L&&c===b.L){return this.matrix[a.INTERIOR][a.INTERIOR]==1&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.INTERIOR][a.EXTERIOR],"T")&&jsts.geom.IntersectionMatrix.matches(this.matrix[a.EXTERIOR][a.INTERIOR],"T")}return false};jsts.geom.IntersectionMatrix.prototype.matches=function(e){if(e.length!=9){throw new jsts.error.IllegalArgumentException("Should be length 9: "+e)}for(var c=0;c<3;c++){for(var d=0;d<3;d++){if(!jsts.geom.IntersectionMatrix.matches(this.matrix[c][d],e.charAt(3*c+d))){return false}}}return true};jsts.geom.IntersectionMatrix.prototype.transpose=function(){var c=matrix[1][0];this.matrix[1][0]=this.matrix[0][1];this.matrix[0][1]=c;c=this.matrix[2][0];this.matrix[2][0]=this.matrix[0][2];this.matrix[0][2]=c;c=this.matrix[2][1];this.matrix[2][1]=this.matrix[1][2];this.matrix[1][2]=c;return this};jsts.geom.IntersectionMatrix.prototype.toString=function(){var c,d,e="";for(c=0;c<3;c++){for(d=0;d<3;d++){e+=b.toDimensionSymbol(this.matrix[c][d])}}return e}})();jsts.triangulate.quadedge.LastFoundQuadEdgeLocator=function(a){this.subdiv=a;this.lastEdge=null;this.init()};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.init=function(){this.lastEdge=this.findEdge()};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.findEdge=function(){var a=this.subdiv.getEdges();return a[0]};jsts.triangulate.quadedge.LastFoundQuadEdgeLocator.prototype.locate=function(a){if(!this.lastEdge.isLive()){this.init()}var b=this.subdiv.locateFromEdge(a,this.lastEdge);this.lastEdge=b;return b};jsts.io.WKTWriter=function(){this.parser=new jsts.io.WKTParser(this.geometryFactory)};jsts.io.WKTWriter.prototype.write=function(b){var a=this.parser.write(b);return a};jsts.io.WKTWriter.toLineString=function(b,a){if(arguments.length!==2){throw new jsts.error.NotImplementedError()}return"LINESTRING ( "+b.x+" "+b.y+", "+a.x+" "+a.y+" )"};jsts.io.WKTReader=function(a){this.geometryFactory=a||new jsts.geom.GeometryFactory();this.precisionModel=this.geometryFactory.getPrecisionModel();this.parser=new jsts.io.WKTParser(this.geometryFactory)};jsts.io.WKTReader.prototype.read=function(a){var b=this.parser.read(a);if(this.precisionModel.getType()===jsts.geom.PrecisionModel.FIXED){this.reducePrecision(b)}return b};jsts.io.WKTReader.prototype.reducePrecision=function(c){var b,a;if(c.coordinate){this.precisionModel.makePrecise(c.coordinate)}else{if(c.points){for(b=0,a=c.points.length;b<a;b++){this.precisionModel.makePrecise(c.points[b])}}else{if(c.geometries){for(b=0,a=c.geometries.length;b<a;b++){this.reducePrecision(c.geometries[b])}}}}};jsts.triangulate.quadedge.QuadEdgeSubdivision=function(b,a){this.tolerance=a;this.edgeCoincidenceTolerance=a/jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR;this.visitedKey=0;this.quadEdges=[];this.startingEdge;this.tolerance;this.edgeCoincidenceTolerance;this.frameEnv;this.locator=null;this.seg=new jsts.geom.LineSegment();this.triEdges=new Array(3);this.frameVertex=new Array(3);this.createFrame(b);this.startingEdge=this.initSubdiv();this.locator=new jsts.triangulate.quadedge.LastFoundQuadEdgeLocator(this)};jsts.triangulate.quadedge.QuadEdgeSubdivision.EDGE_COINCIDENCE_TOL_FACTOR=1000;jsts.triangulate.quadedge.QuadEdgeSubdivision.getTriangleEdges=function(b,a){a[0]=b;a[1]=a[0].lNext();a[2]=a[1].lNext();if(a[2].lNext()!=a[0]){throw new jsts.IllegalArgumentError("Edges do not form a triangle")}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.createFrame=function(c){var b,a,d;b=c.getWidth();a=c.getHeight();d=0;if(b>a){d=b*10}else{d=a*10}this.frameVertex[0]=new jsts.triangulate.quadedge.Vertex((c.getMaxX()+c.getMinX())/2,c.getMaxY()+d);this.frameVertex[1]=new jsts.triangulate.quadedge.Vertex(c.getMinX()-d,c.getMinY()-d);this.frameVertex[2]=new jsts.triangulate.quadedge.Vertex(c.getMaxX()+d,c.getMinY()-d);this.frameEnv=new jsts.geom.Envelope(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate());this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.initSubdiv=function(){var c,b,a;c=this.makeEdge(this.frameVertex[0],this.frameVertex[1]);b=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);jsts.triangulate.quadedge.QuadEdge.splice(c.sym(),b);a=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);jsts.triangulate.quadedge.QuadEdge.splice(b.sym(),a);jsts.triangulate.quadedge.QuadEdge.splice(a.sym(),c);return c};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTolerance=function(){return this.tolerance};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEnvelope=function(){return new jsts.geom.Envelope(this.frameEnv)};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdges=function(){if(arguments.length>0){return this.getEdgesByFactory(arguments[0])}else{return this.quadEdges}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.setLocator=function(a){this.locator=a};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.makeEdge=function(c,b){var a=jsts.triangulate.quadedge.QuadEdge.makeEdge(c,b);this.quadEdges.push(a);return a};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.connect=function(d,c){var e=jsts.triangulate.quadedge.QuadEdge.connect(d,c);this.quadEdges.push(e);return e};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.delete_jsts=function(f){jsts.triangulate.quadedge.QuadEdge.splice(f,f.oPrev());jsts.triangulate.quadedge.QuadEdge.splice(f.sym(),f.sym().oPrev());var d,b,c;f.eSym=f.sym();b=f.rot;c=f.rot.sym();var a=this.quadEdges.indexOf(f);if(a!==-1){this.quadEdges.splice(a,1)}a=this.quadEdges.indexOf(d);if(a!==-1){this.quadEdges.splice(a,1)}a=this.quadEdges.indexOf(b);if(a!==-1){this.quadEdges.splice(a,1)}a=this.quadEdges.indexOf(c);if(a!==-1){this.quadEdges.splice(a,1)}f.delete_jsts();d.delete_jsts();b.delete_jsts();c.delete_jsts()};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateFromEdge=function(b,c){var a=0,d=this.quadEdges.length,f;f=c;while(true){a++;if(a>d){throw new jsts.error.LocateFailureError(f.toLineSegment())}if((b.equals(f.orig()))||(b.equals(f.dest()))){break}else{if(b.rightOf(f)){f=f.sym()}else{if(!b.rightOf(f.oNext())){f=f.oNext()}else{if(!b.rightOf(f.dPrev())){f=f.dPrev()}else{break}}}}}return f};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locate=function(){if(arguments.length===1){if(arguments[0] instanceof jsts.triangulate.quadedge.Vertex){return this.locateByVertex(arguments[0])}else{return this.locateByCoordinate(arguments[0])}}else{return this.locateByCoordinates(arguments[0],arguments[1])}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByVertex=function(a){return this.locator.locate(a)};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinate=function(a){return this.locator.locate(new jsts.triangulate.quadedge.Vertex(a))};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.locateByCoordinates=function(f,d){var c,b,a;var c=this.locator.locate(new jsts.triangulate.quadedge.Vertex(f));if(c===null){return null}b=c;if(c.dest().getCoordinate().equals2D(f)){b=c.sym()}a=b;do{if(a.dest().getCoordinate().equals2D(d)){return a}a=a.oNext()}while(a!=b);return null};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.insertSite=function(a){var d,c,b;d=this.locate(a);if((a.equals(d.orig(),this.tolerance))||(a.equals(d.dest(),this.tolerance))){return d}c=this.makeEdge(d.orig(),a);jsts.triangulate.quadedge.QuadEdge.splice(c,d);b=c;do{c=this.connect(d,c.sym());d=c.oPrev()}while(d.lNext()!=b);return b};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameEdge=function(a){if(this.isFrameVertex(a.orig())||this.isFrameVertex(a.dest())){return true}return false};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameBorderEdge=function(f){var b,c,a,d;b=new Array(3);this.getTriangleEdges(f,b);c=new Array(3);this.getTriangleEdges(f.sym(),c);a=f.lNext().dest();if(this.isFrameVertex(a)){return true}d=f.sym().lNext().dest();if(this.isFrameVertex(d)){return true}return false};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isFrameVertex=function(a){if(a.equals(this.frameVertex[0])){return true}if(a.equals(this.frameVertex[1])){return true}if(a.equals(this.frameVertex[2])){return true}return false};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isOnEdge=function(b,a){this.seg.setCoordinates(b.orig().getCoordinate(),b.dest().getCoordinate());var c=this.seg.distance(a);return c<this.edgeCoincidenceTolerance};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.isVertexOfEdge=function(b,a){if((a.equals(b.orig(),this.tolerance))||(a.equals(b.dest(),this.tolerance))){return true}return false};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertices=function(c){var f=[],g,b,e,a,d;g=0,b=this.quadEdges.length;for(g;g<b;g++){e=this.quadEdges[g];a=e.orig();if(c||!this.isFrameVertex(a)){f.push(a)}d=e.dest();if(c||!this.isFrameVertex(d)){f.push(d)}}return f};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVertexUniqueEdges=function(g){var d,c,e,h,a,j,b,f;d=[];c=[];e=0,h=this.quadEdges.length;for(e;e<h;e++){a=this.quadEdges[e];j=a.orig();if(c.indexOf(j)===-1){c.push(j);if(g||!this.isFrameVertex(j)){d.push(a)}}b=a.sym();f=b.orig();if(c.indexOf(f)===-1){c.push(f);if(g||!this.isFrameVertex(f)){d.push(b)}}}return d};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getPrimaryEdges=function(c){this.visitedKey++;var b,d,f,e,a;b=[];d=[];d.push(this.startingEdge);f=[];while(d.length>0){e=d.pop();if(f.indexOf(e)===-1){a=e.getPrimary();if(c||!this.isFrameEdge(a)){b.push(a)}d.push(e.oNext());d.push(e.sym().oNext());f.push(e);f.push(e.sym())}}return b};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.visitTriangles=function(b,a){this.visitedKey++;var c,f,d,e;c=[];c.push(this.startingEdge);f=[];while(c.length>0){d=c.pop();if(f.indexOf(d)===-1){e=this.fetchTriangleToVisit(d,c,a,f);if(e!==null){b.visit(e)}}}};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.fetchTriangleToVisit=function(e,d,c,g){var f,h,a,b;f=e;h=0;a=false;do{this.triEdges[h]=f;if(this.isFrameEdge(f)){a=true}b=f.sym();if(g.indexOf(b)===-1){d.push(b)}g.push(f);h++;f=f.lNext()}while(f!==e);if(a&&!c){return null}return this.triEdges};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleEdges=function(a){var b=new jsts.triangulate.quadedge.TriangleEdgesListVisitor();this.visitTriangles(b,a);return b.getTriangleEdges()};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleVertices=function(a){var b=new TriangleVertexListVisitor();this.visitTriangles(b,a);return b.getTriangleVertices()};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangleCoordinates=function(a){var b=new jsts.triangulate.quadedge.TriangleCoordinatesVisitor();this.visitTriangles(b,a);return b.getTriangles()};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getEdgesByFactory=function(g){var f,b,d,a,c,e;f=this.getPrimaryEdges(false);b=new Array(f.length);d=0,a=f.length;for(d;d<a;d++){c=f[d];e=new Array(2);e[0]=(c.orig().getCoordinate());e[1]=(c.dest().getCoordinate());b[d]=g.createLineString(e)}return g.createMultiLineString(b)};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getTriangles=function(f){var b,d,e,c,a;b=this.getTriangleCoordinates(false);d=new Array(b.length);c=0,a=b.length;for(c;c<a;c++){e=b[c];d[c]=f.createPolygon(f.createLinearRing(e,null))}return f.createGeometryCollection(d)};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiDiagram=function(b){var a=this.getVoronoiCellPolygons(b);return b.createGeometryCollection(a)};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygons=function(f){this.visitTriangles(new jsts.triangulate.quadedge.TriangleCircumcentreVisitor(),true);var d,b,e,a,c;d=[];b=this.getVertexUniqueEdges(false);e=0,a=b.length;for(e;e<a;e++){c=b[e];d.push(this.getVoronoiCellPolygon(c,f))}return d};jsts.triangulate.quadedge.QuadEdgeSubdivision.prototype.getVoronoiCellPolygon=function(c,h){var f,e,g,d,b,a;f=[];startQE=c;do{g=c.rot.orig().getCoordinate();f.push(g);c=c.oPrev()}while(c!==startQE);d=new jsts.geom.CoordinateList([],false);d.add(f,false);d.closeRing();if(d.length<4){d.add(d.get(d.length-1),true)}b=h.createPolygon(h.createLinearRing(d.toArray()),null);a=startQE.orig();return b};jsts.triangulate.quadedge.TriangleCircumcentreVisitor=function(){};jsts.triangulate.quadedge.TriangleCircumcentreVisitor.prototype.visit=function(h){var e,d,k,j,g,f;e=h[0].orig().getCoordinate();d=h[1].orig().getCoordinate();k=h[2].orig().getCoordinate();j=jsts.geom.Triangle.circumcentre(e,d,k);g=new jsts.triangulate.quadedge.Vertex(j);f=0;for(f;f<3;f++){h[f].rot.setOrig(g)}};jsts.triangulate.quadedge.TriangleEdgesListVisitor=function(){this.triList=[]};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.visit=function(a){var b=a.concat();this.triList.push(b)};jsts.triangulate.quadedge.TriangleEdgesListVisitor.prototype.getTriangleEdges=function(){return this.triList};jsts.triangulate.quadedge.TriangleVertexListVisitor=function(){this.triList=[]};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.visit=function(b){var a=[];a.push(trieEdges[0].orig());a.push(trieEdges[1].orig());a.push(trieEdges[2].orig());this.triList.push(a)};jsts.triangulate.quadedge.TriangleVertexListVisitor.prototype.getTriangleVertices=function(){return this.triList};jsts.triangulate.quadedge.TriangleCoordinatesVisitor=function(){this.coordList=new jsts.geom.CoordinateList([],false);this.triCoords=[]};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.visit=function(c){this.coordList=new jsts.geom.CoordinateList([],false);var b=0,a,d;for(b;b<3;b++){a=c[b].orig();this.coordList.addCoordinate(a.getCoordinate())}if(this.coordList.length>0){this.coordList.closeRing();d=this.coordList.toArray();if(d.length!==4){return}this.triCoords.push(d)}};jsts.triangulate.quadedge.TriangleCoordinatesVisitor.prototype.getTriangles=function(){return this.triCoords};jsts.index.kdtree.KdTree=function(b){var a=0;if(b!==undefined){a=b}this.root=null;this.last=null;this.numberOfNodes=0;this.tolerance=a};jsts.index.kdtree.KdTree.prototype.insert=function(){if(arguments.length===1){return this.insertCoordinate.apply(this,arguments[0])}else{return this.insertWithData.apply(this,arguments[0],arguments[1])}};jsts.index.kdtree.KdTree.prototype.insertCoordinate=function(a){return this.insertWithData(a,null)};jsts.index.kdtree.KdTree.prototype.insertWithData=function(h,g){if(this.root===null){this.root=new jsts.index.kdtree.KdNode(h,g);return this.root}var c=this.root,d=this.root,a=true,b=true;while(c!==last){if(a){b=h.x<c.getX()}else{b=h.y<c.getY()}d=c;if(b){c=c.getLeft()}else{c=c.getRight()}if(c!==null){var f=h.distance(c.getCoordinate())<=this.tolerance;if(f){c.increment();return c}}a=!a}this.numberOfNodes=numberOfNodes+1;var e=new jsts.index.kdtree.KdNode(h,g);e.setLeft(this.last);e.setRight(this.last);if(b){d.setLeft(e)}else{d.setRight(e)}return e};jsts.index.kdtree.KdTree.prototype.queryNode=function(b,f,d,j,k){if(b===f){return}var e,g,h;if(j){e=d.getMinX();g=d.getMaxX();h=b.getX()}else{e=d.getMinY();g=d.getMaxY();h=b.getY()}var c=e<h;var a=h<=g;if(c){this.queryNode(b.getLeft(),f,d,!j,k)}if(d.contains(b.getCoordinate())){k.add(b)}if(a){this.queryNode(b.getRight(),f,d,!j,k)}};jsts.index.kdtree.KdTree.prototype.query=function(){if(arguments.length===1){return this.queryByEnvelope.apply(this,arguments[0])}else{return this.queryWithArray.apply(this,arguments[0],arguments[1])}};jsts.index.kdtree.KdTree.prototype.queryByEnvelope=function(b){var a=[];this.queryNode(this.root,this.last,b,true,a);return a};jsts.index.kdtree.KdTree.prototype.queryWithArray=function(b,a){this.queryNode(this.root,this.last,b,true,a)};jsts.operation.relate.RelateOp=function(){jsts.operation.GeometryGraphOperation.apply(this,arguments);this._relate=new jsts.operation.relate.RelateComputer(this.arg)};jsts.operation.relate.RelateOp.prototype=new jsts.operation.GeometryGraphOperation();jsts.operation.relate.RelateOp.relate=function(f,c,e){var g=new jsts.operation.relate.RelateOp(f,c,e);var d=g.getIntersectionMatrix();return d};jsts.operation.relate.RelateOp.prototype._relate=null;jsts.operation.relate.RelateOp.prototype.getIntersectionMatrix=function(){return this._relate.computeIM()};jsts.geom.Triangle=function(){};jsts.geom.Triangle.isAcute=function(e,d,f){if(!jsts.algorithm.Angle.isAcute(e,d,f)){return false}if(!jsts.algorithm.Angle.isAcute(d,f,e)){return false}if(!jsts.algorithm.Angle.isAcute(f,e,d)){return false}return true};jsts.geom.Triangle.perpendicularBisector=function(g,d){var h,f,e,c;h=d.x-g.x;f=d.y-g.y;e=new jsts.algorithm.HCoordinate(g.x+h/2,g.y+f/2,1);c=new jsts.algorithm.HCoordinate(g.x-f+h/2,g.y+h+f/2,1);return new jsts.algorithm.HCoordinate(e,c)};jsts.geom.Triangle.circumcentre=function(o,n,l){var f,e,d,s,m,k,g,j,h,r,q;f=l.x;e=l.y;d=o.x-f;s=o.y-e;m=n.x-f;k=n.y-e;g=2*jsts.geom.Triangle.det(d,s,m,k);j=jsts.geom.Triangle.det(s,d*d+s*s,k,m*m+k*k);h=jsts.geom.Triangle.det(d,d*d+s*s,m,m*m+k*k);r=f-j/g;q=e+h/g;return new jsts.geom.Coordinate(r,q)};jsts.geom.Triangle.det=function(b,a,d,c){return b*c-a*d};jsts.geom.Triangle.inCentre=function(k,j,h){var f,e,d,g,m,l;f=j.distance(h);e=k.distance(h);d=k.distance(j);g=f+e+d;m=(f*k.x+e*j.x+d*h.x)/g;l=(f*k.y+e*j.y+d*h.y)/g;return new jsts.geom.Coordinate(m,l)};jsts.geom.Triangle.centroid=function(f,e,h){var d,g;d=(f.x+e.x+h.x)/3;g=(f.y+e.y+h.y)/3;return new jsts.geom.Coordinate(d,g)};jsts.geom.Triangle.longestSideLength=function(g,d,k){var f,h,j,e;f=g.distance(d);h=d.distance(k);j=k.distance(g);e=f;if(h>e){e=h}if(j>e){e=j}return e};jsts.geom.Triangle.angleBisector=function(k,j,h){var g,e,d,m,l,f;g=j.distance(k);e=j.distance(h);d=g/(g+e);m=h.x-k.x;l=h.y-k.y;f=new jsts.geom.Coordinate(k.x+d*m,k.y+d*l);return f};jsts.geom.Triangle.area=function(e,d,f){return Math.abs(((f.x-e.x)*(d.y-e.y)-(d.x-e.x)*(f.y-e.y))/2)};jsts.geom.Triangle.signedArea=function(e,d,f){return((f.x-e.x)*(d.y-e.y)-(d.x-e.x)*(f.y-e.y))/2};jsts.geom.Triangle.prototype.initialize=function(c,b,a){this.p0=c;this.p1=b;this.p2=a};jsts.geom.Triangle.prototype.inCentre=function(){return jsts.geom.Triangle.inCentre(this.p0,this.p1,this.p2)};jsts.algorithm.CentroidArea=function(){this.basePt=null;this.triangleCent3=new jsts.geom.Coordinate();this.centSum=new jsts.geom.Coordinate();this.cg3=new jsts.geom.Coordinate()};jsts.algorithm.CentroidArea.prototype.basePt=null;jsts.algorithm.CentroidArea.prototype.triangleCent3=null;jsts.algorithm.CentroidArea.prototype.areasum2=0;jsts.algorithm.CentroidArea.prototype.cg3=null;jsts.algorithm.CentroidArea.prototype.centSum=null;jsts.algorithm.CentroidArea.prototype.totalLength=0;jsts.algorithm.CentroidArea.prototype.add=function(b){if(b instanceof jsts.geom.Polygon){var d=b;this.setBasePoint(d.getExteriorRing().getCoordinateN(0));this.add3(d)}else{if(b instanceof jsts.geom.GeometryCollection||b instanceof jsts.geom.MultiPolygon){var c=b;for(var a=0;a<c.getNumGeometries();a++){this.add(c.getGeometryN(a))}}else{if(b instanceof Array){this.add2(b)}}}};jsts.algorithm.CentroidArea.prototype.add2=function(a){this.setBasePoint(a[0]);this.addShell(a)};jsts.algorithm.CentroidArea.prototype.getCentroid=function(){var a=new jsts.geom.Coordinate();if(Math.abs(this.areasum2)>0){a.x=this.cg3.x/3/this.areasum2;a.y=this.cg3.y/3/this.areasum2}else{a.x=this.centSum.x/this.totalLength;a.y=this.centSum.y/this.totalLength}return a};jsts.algorithm.CentroidArea.prototype.setBasePoint=function(a){if(this.basePt==null){this.basePt=a}};jsts.algorithm.CentroidArea.prototype.add3=function(b){this.addShell(b.getExteriorRing().getCoordinates());for(var a=0;a<b.getNumInteriorRing();a++){this.addHole(b.getInteriorRingN(a).getCoordinates())}};jsts.algorithm.CentroidArea.prototype.addShell=function(c){var a=!jsts.algorithm.CGAlgorithms.isCCW(c);for(var b=0;b<c.length-1;b++){this.addTriangle(this.basePt,c[b],c[b+1],a)}this.addLinearSegments(c)};jsts.algorithm.CentroidArea.prototype.addHole=function(c){var a=jsts.algorithm.CGAlgorithms.isCCW(c);for(var b=0;b<c.length-1;b++){this.addTriangle(this.basePt,c[b],c[b+1],a)}this.addLinearSegments(c)};jsts.algorithm.CentroidArea.prototype.addTriangle=function(f,e,d,c){var b=(c)?1:-1;jsts.algorithm.CentroidArea.centroid3(f,e,d,this.triangleCent3);var a=jsts.algorithm.CentroidArea.area2(f,e,d);this.cg3.x+=b*a*this.triangleCent3.x;this.cg3.y+=b*a*this.triangleCent3.y;this.areasum2+=b*a};jsts.algorithm.CentroidArea.centroid3=function(d,b,a,e){e.x=d.x+b.x+a.x;e.y=d.y+b.y+a.y;return};jsts.algorithm.CentroidArea.area2=function(c,b,a){return(b.x-c.x)*(a.y-c.y)-(a.x-c.x)*(b.y-c.y)};jsts.algorithm.CentroidArea.prototype.addLinearSegments=function(e){for(var c=0;c<e.length-1;c++){var d=e[c].distance(e[c+1]);this.totalLength+=d;var b=(e[c].x+e[c+1].x)/2;this.centSum.x+=d*b;var a=(e[c].y+e[c+1].y)/2;this.centSum.y+=d*a}};jsts.algorithm.CentralEndpointIntersector=function(b,a,d,c){this.pts=[b,a,d,c];this.compute()};jsts.algorithm.CentralEndpointIntersector.getIntersection=function(b,a,d,c){var e=new jsts.algorithm.CentralEndpointIntersector(b,a,d,c);return e.getIntersection()};jsts.algorithm.CentralEndpointIntersector.prototype.pts=null;jsts.algorithm.CentralEndpointIntersector.prototype.intPt=null;jsts.algorithm.CentralEndpointIntersector.prototype.compute=function(){var a=jsts.algorithm.CentralEndpointIntersector.average(this.pts);this.intPt=this.findNearestPoint(a,this.pts)};jsts.algorithm.CentralEndpointIntersector.prototype.getIntersection=function(){return this.intPt};jsts.algorithm.CentralEndpointIntersector.average=function(c){var b=new jsts.geom.Coordinate();var a,d=c.length;for(a=0;a<d;a++){b.x+=c[a].x;b.y+=c[a].y}if(d>0){b.x/=d;b.y/=d}return b};jsts.algorithm.CentralEndpointIntersector.prototype.findNearestPoint=function(d,f){var b=Number.MAX_VALUE;var c,a=null,e;for(c=0;c<f.length;c++){e=d.distance(f[c]);if(e<b){b=e;a=f[c]}}return a};(function(){var c=javascript.util.ArrayList;var a=jsts.geom.GeometryComponentFilter;var e=jsts.geom.LineString;var d=jsts.operation.polygonize.EdgeRing;var f=jsts.operation.polygonize.PolygonizeGraph;var b=function(){var h=this;var g=function(){};g.prototype=new a();g.prototype.filter=function(j){if(j instanceof e){h.add(j)}};this.lineStringAdder=new g();this.dangles=new c();this.cutEdges=new c();this.invalidRingLines=new c()};b.prototype.lineStringAdder=null;b.prototype.graph=null;b.prototype.dangles=null;b.prototype.cutEdges=null;b.prototype.invalidRingLines=null;b.prototype.holeList=null;b.prototype.shellList=null;b.prototype.polyList=null;b.prototype.add=function(g){if(g instanceof jsts.geom.LineString){return this.add3(g)}else{if(g instanceof jsts.geom.Geometry){return this.add2(g)}}for(var h=g.iterator();h.hasNext();){var j=h.next();this.add2(j)}};b.prototype.add2=function(h){h.apply(this.lineStringAdder)};b.prototype.add3=function(g){if(this.graph==null){this.graph=new f(g.getFactory())}this.graph.addEdge(g)};b.prototype.getPolygons=function(){this.polygonize();return this.polyList};b.prototype.getDangles=function(){this.polygonize();return this.dangles};b.prototype.getCutEdges=function(){this.polygonize();return this.cutEdges};b.prototype.getInvalidRingLines=function(){this.polygonize();return this.invalidRingLines};b.prototype.polygonize=function(){if(this.polyList!=null){return}this.polyList=new c();if(this.graph==null){return}this.dangles=this.graph.deleteDangles();this.cutEdges=this.graph.deleteCutEdges();var j=this.graph.getEdgeRings();var g=new c();this.invalidRingLines=new c();this.findValidRings(j,g,this.invalidRingLines);this.findShellsAndHoles(g);b.assignHolesToShells(this.holeList,this.shellList);this.polyList=new c();for(var h=this.shellList.iterator();h.hasNext();){var k=h.next();this.polyList.add(k.getPolygon())}};b.prototype.findValidRings=function(j,g,k){for(var h=j.iterator();h.hasNext();){var l=h.next();if(l.isValid()){g.add(l)}else{k.add(l.getLineString())}}};b.prototype.findShellsAndHoles=function(h){this.holeList=new c();this.shellList=new c();for(var g=h.iterator();g.hasNext();){var j=g.next();if(j.isHole()){this.holeList.add(j)}else{this.shellList.add(j)}}};b.assignHolesToShells=function(j,k){for(var h=j.iterator();h.hasNext();){var g=h.next();b.assignHoleToShell(g,k)}};b.assignHoleToShell=function(g,j){var h=d.findEdgeRingContaining(g,j);if(h!=null){h.addHole(g.getRing())}};jsts.operation.polygonize.Polygonizer=b})();jsts.operation.relate.RelateNode=function(b,a){jsts.geomgraph.Node.apply(this,arguments)};jsts.operation.relate.RelateNode.prototype=new jsts.geomgraph.Node();jsts.operation.relate.RelateNode.prototype.computeIM=function(a){a.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)};jsts.operation.relate.RelateNode.prototype.updateIMFromEdges=function(a){this.edges.updateIM(a)};jsts.operation.buffer.OffsetSegmentString=function(){this.ptList=[]};jsts.operation.buffer.OffsetSegmentString.prototype.ptList=null;jsts.operation.buffer.OffsetSegmentString.prototype.precisionModel=null;jsts.operation.buffer.OffsetSegmentString.prototype.minimimVertexDistance=0;jsts.operation.buffer.OffsetSegmentString.prototype.setPrecisionModel=function(a){this.precisionModel=a};jsts.operation.buffer.OffsetSegmentString.prototype.setMinimumVertexDistance=function(a){this.minimimVertexDistance=a};jsts.operation.buffer.OffsetSegmentString.prototype.addPt=function(b){var a=new jsts.geom.Coordinate(b);this.precisionModel.makePrecise(a);if(this.isRedundant(a)){return}this.ptList.push(a)};jsts.operation.buffer.OffsetSegmentString.prototype.addPts=function(c,b){if(b){for(var a=0;a<c.length;a++){this.addPt(c[a])}}else{for(var a=c.length-1;a>=0;a--){this.addPt(c[a])}}};jsts.operation.buffer.OffsetSegmentString.prototype.isRedundant=function(b){if(this.ptList.length<1){return false}var a=this.ptList[this.ptList.length-1];var c=b.distance(a);if(c<this.minimimVertexDistance){return true}return false};jsts.operation.buffer.OffsetSegmentString.prototype.closeRing=function(){if(this.ptList.length<1){return}var c=new jsts.geom.Coordinate(this.ptList[0]);var a=this.ptList[this.ptList.length-1];var b=null;if(this.ptList.length>=2){b=this.ptList[this.ptList.length-2]}if(c.equals(a)){return}this.ptList.push(c)};jsts.operation.buffer.OffsetSegmentString.prototype.reverse=function(){};jsts.operation.buffer.OffsetSegmentString.prototype.getCoordinates=function(){return this.ptList};(function(){var a=javascript.util.ArrayList;var c=javascript.util.TreeSet;var b=jsts.geom.CoordinateFilter;jsts.util.UniqueCoordinateArrayFilter=function(){this.treeSet=new c();this.list=new a()};jsts.util.UniqueCoordinateArrayFilter.prototype=new b();jsts.util.UniqueCoordinateArrayFilter.prototype.treeSet=null;jsts.util.UniqueCoordinateArrayFilter.prototype.list=null;jsts.util.UniqueCoordinateArrayFilter.prototype.getCoordinates=function(){return this.list.toArray()};jsts.util.UniqueCoordinateArrayFilter.prototype.filter=function(d){if(!this.treeSet.contains(d)){this.list.add(d);this.treeSet.add(d)}}})();(function(){var e=jsts.algorithm.CGAlgorithms;var c=jsts.util.UniqueCoordinateArrayFilter;var f=jsts.util.Assert;var d=javascript.util.Stack;var a=javascript.util.ArrayList;var b=javascript.util.Arrays;var g=function(h){this.origin=h};g.prototype.origin=null;g.prototype.compare=function(j,h){var l=j;var k=h;return g.polarCompare(this.origin,l,k)};g.polarCompare=function(m,k,h){var l=k.x-m.x;var u=k.y-m.y;var j=h.x-m.x;var t=h.y-m.y;var n=e.computeOrientation(m,k,h);if(n==e.COUNTERCLOCKWISE){return 1}if(n==e.CLOCKWISE){return -1}var s=l*l+u*u;var r=j*j+t*t;if(s<r){return -1}if(s>r){return 1}return 0};jsts.algorithm.ConvexHull=function(){if(arguments.length===1){var h=arguments[0];this.inputPts=jsts.algorithm.ConvexHull.extractCoordinates(h);this.geomFactory=h.getFactory()}else{this.pts=arguments[0];this.geomFactory=arguments[1]}};jsts.algorithm.ConvexHull.prototype.geomFactory=null;jsts.algorithm.ConvexHull.prototype.inputPts=null;jsts.algorithm.ConvexHull.extractCoordinates=function(h){var j=new c();h.apply(j);return j.getCoordinates()};jsts.algorithm.ConvexHull.prototype.getConvexHull=function(){if(this.inputPts.length==0){return this.geomFactory.createGeometryCollection(null)}if(this.inputPts.length==1){return this.geomFactory.createPoint(this.inputPts[0])}if(this.inputPts.length==2){return this.geomFactory.createLineString(this.inputPts)}var j=this.inputPts;if(this.inputPts.length>50){j=this.reduce(this.inputPts)}var h=this.preSort(j);var l=this.grahamScan(h);var k=l.toArray();return this.lineOrPolygon(k)};jsts.algorithm.ConvexHull.prototype.reduce=function(m){var h=this.computeOctRing(m);if(h==null){return this.inputPts}var l=new javascript.util.TreeSet();for(var k=0;k<h.length;k++){l.add(h[k])}for(var k=0;k<m.length;k++){if(!e.isPointInRing(m[k],h)){l.add(m[k])}}var j=l.toArray();if(j.length<3){return this.padArray3(j)}return j};jsts.algorithm.ConvexHull.prototype.padArray3=function(k){var j=[];for(var h=0;h<j.length;h++){if(h<k.length){j[h]=k[h]}else{j[h]=k[0]}}return j};jsts.algorithm.ConvexHull.prototype.preSort=function(k){var j;for(var h=1;h<k.length;h++){if((k[h].y<k[0].y)||((k[h].y==k[0].y)&&(k[h].x<k[0].x))){j=k[0];k[0]=k[h];k[h]=j}}b.sort(k,1,k.length,new g(k[0]));return k};jsts.algorithm.ConvexHull.prototype.grahamScan=function(l){var j;var k=new d();j=k.push(l[0]);j=k.push(l[1]);j=k.push(l[2]);for(var h=3;h<l.length;h++){j=k.pop();while(!k.empty()&&e.computeOrientation(k.peek(),j,l[h])>0){j=k.pop()}j=k.push(j);j=k.push(l[h])}j=k.push(l[0]);return k};jsts.algorithm.ConvexHull.prototype.isBetween=function(k,j,h){if(e.computeOrientation(k,j,h)!==0){return false}if(k.x!=h.x){if(k.x<=j.x&&j.x<=h.x){return true}if(h.x<=j.x&&j.x<=k.x){return true}}if(k.y!=h.y){if(k.y<=j.y&&j.y<=h.y){return true}if(h.y<=j.y&&j.y<=k.y){return true}}return false};jsts.algorithm.ConvexHull.prototype.computeOctRing=function(j){var k=this.computeOctPts(j);var h=new jsts.geom.CoordinateList();h.add(k,false);if(h.length<3){return null}h.closeRing();return h};jsts.algorithm.ConvexHull.prototype.computeOctPts=function(l){var m=[];for(var h=0;h<8;h++){m[h]=l[0]}for(var k=1;k<l.length;k++){if(l[k].x<m[0].x){m[0]=l[k]}if(l[k].x-l[k].y<m[1].x-m[1].y){m[1]=l[k]}if(l[k].y>m[2].y){m[2]=l[k]}if(l[k].x+l[k].y>m[3].x+m[3].y){m[3]=l[k]}if(l[k].x>m[4].x){m[4]=l[k]}if(l[k].x-l[k].y>m[5].x-m[5].y){m[5]=l[k]}if(l[k].y<m[6].y){m[6]=l[k]}if(l[k].x+l[k].y<m[7].x+m[7].y){m[7]=l[k]}}return m};jsts.algorithm.ConvexHull.prototype.lineOrPolygon=function(j){j=this.cleanRing(j);if(j.length==3){return this.geomFactory.createLineString([j[0],j[1]])}var h=this.geomFactory.createLinearRing(j);return this.geomFactory.createPolygon(h,null)};jsts.algorithm.ConvexHull.prototype.cleanRing=function(n){f.equals(n[0],n[n.length-1]);var j=new a();var l=null;for(var m=0;m<=n.length-2;m++){var h=n[m];var o=n[m+1];if(h.equals(o)){continue}if(l!=null&&this.isBetween(l,h,o)){continue}j.add(h);l=h}j.add(n[n.length-1]);var k=[];return j.toArray(k)}})();(function(){var a=javascript.util.ArrayList;jsts.geomgraph.index.SegmentIntersector=function(b,d,c){this.li=b;this.includeProper=d;this.recordIsolated=c};jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments=function(c,b){return Math.abs(c-b)===1};jsts.geomgraph.index.SegmentIntersector.prototype._hasIntersection=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProper=false;jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInterior=false;jsts.geomgraph.index.SegmentIntersector.prototype.properIntersectionPoint=null;jsts.geomgraph.index.SegmentIntersector.prototype.li=null;jsts.geomgraph.index.SegmentIntersector.prototype.includeProper=null;jsts.geomgraph.index.SegmentIntersector.prototype.recordIsolated=null;jsts.geomgraph.index.SegmentIntersector.prototype.isSelfIntersection=null;jsts.geomgraph.index.SegmentIntersector.prototype.numIntersections=0;jsts.geomgraph.index.SegmentIntersector.prototype.numTests=0;jsts.geomgraph.index.SegmentIntersector.prototype.bdyNodes=null;jsts.geomgraph.index.SegmentIntersector.prototype.setBoundaryNodes=function(c,b){this.bdyNodes=[];this.bdyNodes[0]=c;this.bdyNodes[1]=b};jsts.geomgraph.index.SegmentIntersector.prototype.getProperIntersectionPoint=function(){return this.properIntersectionPoint};jsts.geomgraph.index.SegmentIntersector.prototype.hasIntersection=function(){return this._hasIntersection};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperIntersection=function(){return this.hasProper};jsts.geomgraph.index.SegmentIntersector.prototype.hasProperInteriorIntersection=function(){return this.hasProperInterior};jsts.geomgraph.index.SegmentIntersector.prototype.isTrivialIntersection=function(f,d,e,c){if(f===e){if(this.li.getIntersectionNum()===1){if(jsts.geomgraph.index.SegmentIntersector.isAdjacentSegments(d,c)){return true}if(f.isClosed()){var b=f.getNumPoints()-1;if((d===0&&c===b)||(c===0&&d===b)){return true}}}}return false};jsts.geomgraph.index.SegmentIntersector.prototype.addIntersections=function(j,f,h,d){if(j===h&&f===d){return}this.numTests++;var c=j.getCoordinates()[f];var b=j.getCoordinates()[f+1];var g=h.getCoordinates()[d];var e=h.getCoordinates()[d+1];this.li.computeIntersection(c,b,g,e);if(this.li.hasIntersection()){if(this.recordIsolated){j.setIsolated(false);h.setIsolated(false)}this.numIntersections++;if(!this.isTrivialIntersection(j,f,h,d)){this._hasIntersection=true;if(this.includeProper||!this.li.isProper()){j.addIntersections(this.li,f,0);h.addIntersections(this.li,d,1)}if(this.li.isProper()){this.properIntersectionPoint=this.li.getIntersection(0).clone();this.hasProper=true;if(!this.isBoundaryPoint(this.li,this.bdyNodes)){this.hasProperInterior=true}}}}};jsts.geomgraph.index.SegmentIntersector.prototype.isBoundaryPoint=function(b,c){if(c===null){return false}if(c instanceof Array){if(this.isBoundaryPoint(b,c[0])){return true}if(this.isBoundaryPoint(b,c[1])){return true}return false}else{for(var d=c.iterator();d.hasNext();){var e=d.next();var f=e.getCoordinate();if(b.isIntersection(f)){return true}}return false}}})();(function(){var b=jsts.geom.Location;var a=jsts.geomgraph.Position;var c=jsts.util.Assert;jsts.geomgraph.GeometryGraph=function(e,f,d){jsts.geomgraph.PlanarGraph.call(this);this.lineEdgeMap=new javascript.util.HashMap();this.ptLocator=new jsts.algorithm.PointLocator();this.argIndex=e;this.parentGeom=f;this.boundaryNodeRule=d||jsts.algorithm.BoundaryNodeRule.OGC_SFS_BOUNDARY_RULE;if(f!==null){this.add(f)}};jsts.geomgraph.GeometryGraph.prototype=new jsts.geomgraph.PlanarGraph();jsts.geomgraph.GeometryGraph.constructor=jsts.geomgraph.GeometryGraph;jsts.geomgraph.GeometryGraph.prototype.createEdgeSetIntersector=function(){return new jsts.geomgraph.index.SimpleEdgeSetIntersector()};jsts.geomgraph.GeometryGraph.determineBoundary=function(e,d){return e.isInBoundary(d)?b.BOUNDARY:b.INTERIOR};jsts.geomgraph.GeometryGraph.prototype.parentGeom=null;jsts.geomgraph.GeometryGraph.prototype.lineEdgeMap=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodeRule=null;jsts.geomgraph.GeometryGraph.prototype.useBoundaryDeterminationRule=true;jsts.geomgraph.GeometryGraph.prototype.argIndex=null;jsts.geomgraph.GeometryGraph.prototype.boundaryNodes=null;jsts.geomgraph.GeometryGraph.prototype.hasTooFewPoints=false;jsts.geomgraph.GeometryGraph.prototype.invalidPoint=null;jsts.geomgraph.GeometryGraph.prototype.areaPtLocator=null;jsts.geomgraph.GeometryGraph.prototype.ptLocator=null;jsts.geomgraph.GeometryGraph.prototype.getGeometry=function(){return this.parentGeom};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodes=function(){if(this.boundaryNodes===null){this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)}return this.boundaryNodes};jsts.geomgraph.GeometryGraph.prototype.getBoundaryNodeRule=function(){return this.boundaryNodeRule};jsts.geomgraph.GeometryGraph.prototype.findEdge=function(d){return this.lineEdgeMap.get(d)};jsts.geomgraph.GeometryGraph.prototype.computeSplitEdges=function(g){for(var d=this.edges.iterator();d.hasNext();){var f=d.next();f.eiList.addSplitEdges(g)}};jsts.geomgraph.GeometryGraph.prototype.add=function(d){if(d.isEmpty()){return}if(d instanceof jsts.geom.MultiPolygon){this.useBoundaryDeterminationRule=false}if(d instanceof jsts.geom.Polygon){this.addPolygon(d)}else{if(d instanceof jsts.geom.LineString){this.addLineString(d)}else{if(d instanceof jsts.geom.Point){this.addPoint(d)}else{if(d instanceof jsts.geom.MultiPoint){this.addCollection(d)}else{if(d instanceof jsts.geom.MultiLineString){this.addCollection(d)}else{if(d instanceof jsts.geom.MultiPolygon){this.addCollection(d)}else{if(d instanceof jsts.geom.GeometryCollection){this.addCollection(d)}else{throw new jsts.error.IllegalArgumentError("Geometry type not supported.")}}}}}}}};jsts.geomgraph.GeometryGraph.prototype.addCollection=function(f){for(var d=0;d<f.getNumGeometries();d++){var e=f.getGeometryN(d);this.add(e)}};jsts.geomgraph.GeometryGraph.prototype.addEdge=function(d){this.insertEdge(d);var f=d.getCoordinates();this.insertPoint(this.argIndex,f[0],b.BOUNDARY);this.insertPoint(this.argIndex,f[f.length-1],b.BOUNDARY)};jsts.geomgraph.GeometryGraph.prototype.addPoint=function(d){var e=d.getCoordinate();this.insertPoint(this.argIndex,e,b.INTERIOR)};jsts.geomgraph.GeometryGraph.prototype.addLineString=function(d){var g=jsts.geom.CoordinateArrays.removeRepeatedPoints(d.getCoordinates());if(g.length<2){this.hasTooFewPoints=true;this.invalidPoint=coords[0];return}var f=new jsts.geomgraph.Edge(g,new jsts.geomgraph.Label(this.argIndex,b.INTERIOR));this.lineEdgeMap.put(d,f);this.insertEdge(f);c.isTrue(g.length>=2,"found LineString with single point");this.insertBoundaryPoint(this.argIndex,g[0]);this.insertBoundaryPoint(this.argIndex,g[g.length-1])};jsts.geomgraph.GeometryGraph.prototype.addPolygonRing=function(d,g,k){if(d.isEmpty()){return}var l=jsts.geom.CoordinateArrays.removeRepeatedPoints(d.getCoordinates());if(l.length<4){this.hasTooFewPoints=true;this.invalidPoint=l[0];return}var j=g;var f=k;if(jsts.algorithm.CGAlgorithms.isCCW(l)){j=k;f=g}var h=new jsts.geomgraph.Edge(l,new jsts.geomgraph.Label(this.argIndex,b.BOUNDARY,j,f));this.lineEdgeMap.put(d,h);this.insertEdge(h);this.insertPoint(this.argIndex,l[0],b.BOUNDARY)};jsts.geomgraph.GeometryGraph.prototype.addPolygon=function(f){this.addPolygonRing(f.getExteriorRing(),b.EXTERIOR,b.INTERIOR);for(var d=0;d<f.getNumInteriorRing();d++){var e=f.getInteriorRingN(d);this.addPolygonRing(e,b.INTERIOR,b.EXTERIOR)}};jsts.geomgraph.GeometryGraph.prototype.computeEdgeIntersections=function(h,d,j){var e=new jsts.geomgraph.index.SegmentIntersector(d,j,true);e.setBoundaryNodes(this.getBoundaryNodes(),h.getBoundaryNodes());var f=this.createEdgeSetIntersector();f.computeIntersections(this.edges,h.edges,e);return e};jsts.geomgraph.GeometryGraph.prototype.computeSelfNodes=function(d,g){var e=new jsts.geomgraph.index.SegmentIntersector(d,true,false);var f=this.createEdgeSetIntersector();if(!g&&(this.parentGeom instanceof jsts.geom.LinearRing||this.parentGeom instanceof jsts.geom.Polygon||this.parentGeom instanceof jsts.geom.MultiPolygon)){f.computeIntersections(this.edges,e,false)}else{f.computeIntersections(this.edges,e,true)}this.addSelfIntersectionNodes(this.argIndex);return e};jsts.geomgraph.GeometryGraph.prototype.insertPoint=function(e,h,f){var g=this.nodes.addNode(h);var d=g.getLabel();if(d==null){g.label=new jsts.geomgraph.Label(e,f)}else{d.setLocation(e,f)}};jsts.geomgraph.GeometryGraph.prototype.insertBoundaryPoint=function(g,k){var j=this.nodes.addNode(k);var f=j.getLabel();var d=1;var h=b.NONE;if(f!==null){h=f.getLocation(g,a.ON)}if(h===b.BOUNDARY){d++}var e=jsts.geomgraph.GeometryGraph.determineBoundary(this.boundaryNodeRule,d);f.setLocation(g,e)};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNodes=function(f){for(var d=this.edges.iterator();d.hasNext();){var h=d.next();var k=h.getLabel().getLocation(f);for(var j=h.eiList.iterator();j.hasNext();){var g=j.next();this.addSelfIntersectionNode(f,g.coord,k)}}};jsts.geomgraph.GeometryGraph.prototype.addSelfIntersectionNode=function(d,f,e){if(this.isBoundaryNode(d,f)){return}if(e===b.BOUNDARY&&this.useBoundaryDeterminationRule){this.insertBoundaryPoint(d,f)}else{this.insertPoint(d,f,e)}};jsts.geomgraph.GeometryGraph.prototype.getInvalidPoint=function(){return this.invalidPoint}})();