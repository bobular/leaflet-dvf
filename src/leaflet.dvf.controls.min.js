L.Control.Legend=L.Control.extend({options:{position:"bottomright",autoAdd:true},onAdd:function(d){var c="leaflet-control-legend",a=L.DomUtil.create("div",c);var b=this;if(this.options.autoAdd){d.on("layeradd",function(g){var f=g.layer;b.addLayer(f)});d.on("layerremove",function(g){var f=g.layer;b.removeLayer(f)})}this.toggleSize=L.bind(this.toggleSize,this);L.DomEvent.addListener(a,"mouseover",this.toggleSize).addListener(a,"mouseout",this.toggleSize).addListener(a,"touchstart",this.toggleSize).addListener(a,"touchend",this.toggleSize).addListener(a,"click",L.DomEvent.stopPropagation).addListener(a,"click",L.DomEvent.preventDefault);return a},clear:function(){this._container.innerHTML=""},toggleSize:function(){if(L.DomUtil.hasClass(this._container,"larger")){L.DomUtil.removeClass(this._container,"larger")}else{L.DomUtil.addClass(this._container,"larger")}},redrawLayer:function(a){this.removeLayer(a);this.addLayer(a)},addLayer:function(a){var c=L.Util.stamp(a);var b=this;if(a.getLegend){this.addLegend(c,a.getLegend());a.on("legendChanged",function(){b.redrawLayer(a)})}},removeLayer:function(b){var c=L.Util.stamp(b);if(b.getLegend){var a=document.getElementById(c);a.parentNode.removeChild(a);b.off("legendChanged")}},addLegend:function(d,b){var a=this._container,c=document.getElementById(d);if(!c){c=L.DomUtil.create("div","",a);c.id=d}c.innerHTML=b}});L.control.legend=function(a){return new L.Control.Legend(a)};